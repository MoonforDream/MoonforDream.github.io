

<!DOCTYPE html>
<html lang="zh-CN" data-default-color-scheme=auto>



<head>
  <meta charset="UTF-8">
  <link rel="apple-touch-icon" sizes="76x76" href="https://cdn.jsdelivr.net/gh/MoonforDream/photohouse/hexo/202405190208396.jpg">
  <link rel="icon" href="https://cdn.jsdelivr.net/gh/MoonforDream/photohouse/hexo/202405190208396.jpg">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=5.0, shrink-to-fit=no">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  
  <meta name="theme-color" content="#2f4154">
  <meta name="author" content="Moon">
  <meta name="keywords" content="">
  
    <meta name="description" content="本文记载了C++的语法学习以及STL的学习，该笔记是黑马c++教程的笔记记录">
<meta property="og:type" content="article">
<meta property="og:title" content="C++学习">
<meta property="og:url" content="https://moonfordream.github.io/posts/C-%E5%AD%A6%E4%B9%A0/index.html">
<meta property="og:site_name" content="Moon&#39;s Blog">
<meta property="og:description" content="本文记载了C++的语法学习以及STL的学习，该笔记是黑马c++教程的笔记记录">
<meta property="og:locale" content="zh_CN">
<meta property="og:image" content="https://cdn.jsdelivr.net/gh/MoonforDream/photohouse/hexo/202405190009275.jpg">
<meta property="og:image" content="https://cdn.jsdelivr.net/gh/MoonforDream/photohouse/hexo/202405190009276.png">
<meta property="og:image" content="https://moonfordream.github.io/study/images/Snipaste_2023-05-17_11-32-07.jpg">
<meta property="og:image" content="https://cdn.jsdelivr.net/gh/MoonforDream/photohouse/hexo/202405190009277.png">
<meta property="og:image" content="https://cdn.jsdelivr.net/gh/MoonforDream/photohouse/hexo/202405190009278.png">
<meta property="og:image" content="https://cdn.jsdelivr.net/gh/MoonforDream/photohouse/hexo/202405190009279.png">
<meta property="og:image" content="https://cdn.jsdelivr.net/gh/MoonforDream/photohouse/hexo/202405190009280.png">
<meta property="og:image" content="https://cdn.jsdelivr.net/gh/MoonforDream/photohouse/hexo/202405190009281.png">
<meta property="og:image" content="https://cdn.jsdelivr.net/gh/MoonforDream/photohouse/hexo/202405190009282.png">
<meta property="article:published_time" content="2024-05-18T17:06:36.000Z">
<meta property="article:modified_time" content="2024-05-20T02:12:31.864Z">
<meta property="article:author" content="Moon">
<meta property="article:tag" content="C++">
<meta name="twitter:card" content="summary_large_image">
<meta name="twitter:image" content="https://cdn.jsdelivr.net/gh/MoonforDream/photohouse/hexo/202405190009275.jpg">
  
  
  
  <title>C++学习 - Moon&#39;s Blog</title>

  <link  rel="stylesheet" href="https://lib.baomitu.com/twitter-bootstrap/4.6.1/css/bootstrap.min.css" />



  <link  rel="stylesheet" href="https://lib.baomitu.com/github-markdown-css/4.0.0/github-markdown.min.css" />

  <link  rel="stylesheet" href="https://lib.baomitu.com/hint.css/2.7.0/hint.min.css" />

  <link  rel="stylesheet" href="https://lib.baomitu.com/fancybox/3.5.7/jquery.fancybox.min.css" />



<!-- 主题依赖的图标库，不要自行修改 -->
<!-- Do not modify the link that theme dependent icons -->

<link rel="stylesheet" href="//at.alicdn.com/t/font_1749284_hj8rtnfg7um.css">



<link rel="stylesheet" href="//at.alicdn.com/t/font_1736178_lbnruvf0jn.css">


<link  rel="stylesheet" href="/css/main.css" />


  <link id="highlight-css" rel="stylesheet" href="/css/highlight.css" />
  
    <link id="highlight-css-dark" rel="stylesheet" href="/css/highlight-dark.css" />
  




  <script id="fluid-configs">
    var Fluid = window.Fluid || {};
    Fluid.ctx = Object.assign({}, Fluid.ctx)
    var CONFIG = {"hostname":"moonfordream.github.io","root":"/","version":"1.9.7","typing":{"enable":true,"typeSpeed":70,"cursorChar":"_","loop":false,"scope":[]},"anchorjs":{"enable":true,"element":"h1,h2,h3,h4,h5,h6","placement":"left","visible":"hover","icon":""},"progressbar":{"enable":true,"height_px":3,"color":"#29d","options":{"showSpinner":false,"trickleSpeed":100}},"code_language":{"enable":true,"default":"TEXT"},"copy_btn":true,"image_caption":{"enable":true},"image_zoom":{"enable":true,"img_url_replace":["",""]},"toc":{"enable":true,"placement":"right","headingSelector":"h1,h2,h3,h4,h5,h6","collapseDepth":0},"lazyload":{"enable":true,"loading_img":"/img/loading.gif","onlypost":false,"offset_factor":2},"web_analytics":{"enable":false,"follow_dnt":true,"baidu":null,"google":{"measurement_id":null},"tencent":{"sid":null,"cid":null},"woyaola":null,"cnzz":null,"leancloud":{"app_id":null,"app_key":null,"server_url":null,"path":"window.location.pathname","ignore_local":false}},"search_path":"/local-search.xml","include_content_in_search":true};

    if (CONFIG.web_analytics.follow_dnt) {
      var dntVal = navigator.doNotTrack || window.doNotTrack || navigator.msDoNotTrack;
      Fluid.ctx.dnt = dntVal && (dntVal.startsWith('1') || dntVal.startsWith('yes') || dntVal.startsWith('on'));
    }
  </script>
  <script  src="/js/utils.js" ></script>
  <script  src="/js/color-schema.js" ></script>
  


  
<meta name="generator" content="Hexo 7.2.0"></head>


<body>
  

  <header>
    

<div class="header-inner" style="height: 70vh;">
  <nav id="navbar" class="navbar fixed-top  navbar-expand-lg navbar-dark scrolling-navbar">
  <div class="container">
    <a class="navbar-brand" href="/">
      <strong>Moon&#39;s Blog</strong>
    </a>

    <button id="navbar-toggler-btn" class="navbar-toggler" type="button" data-toggle="collapse"
            data-target="#navbarSupportedContent"
            aria-controls="navbarSupportedContent" aria-expanded="false" aria-label="Toggle navigation">
      <div class="animated-icon"><span></span><span></span><span></span></div>
    </button>

    <!-- Collapsible content -->
    <div class="collapse navbar-collapse" id="navbarSupportedContent">
      <ul class="navbar-nav ml-auto text-center">
        
          
          
          
          
            <li class="nav-item">
              <a class="nav-link" href="/" target="_self">
                <i class="iconfont icon-home-fill"></i>
                <span>首页</span>
              </a>
            </li>
          
        
          
          
          
          
            <li class="nav-item">
              <a class="nav-link" href="/archives/" target="_self">
                <i class="iconfont icon-archive-fill"></i>
                <span>归档</span>
              </a>
            </li>
          
        
          
          
          
          
            <li class="nav-item">
              <a class="nav-link" href="/categories/" target="_self">
                <i class="iconfont icon-category-fill"></i>
                <span>分类</span>
              </a>
            </li>
          
        
          
          
          
          
            <li class="nav-item">
              <a class="nav-link" href="/tags/" target="_self">
                <i class="iconfont icon-tags-fill"></i>
                <span>标签</span>
              </a>
            </li>
          
        
          
          
          
          
            <li class="nav-item">
              <a class="nav-link" href="/about/" target="_self">
                <i class="iconfont icon-user-fill"></i>
                <span>关于</span>
              </a>
            </li>
          
        
        
          <li class="nav-item" id="search-btn">
            <a class="nav-link" target="_self" href="javascript:;" data-toggle="modal" data-target="#modalSearch" aria-label="Search">
              <i class="iconfont icon-search"></i>
            </a>
          </li>
          
        
        
          <li class="nav-item" id="color-toggle-btn">
            <a class="nav-link" target="_self" href="javascript:;" aria-label="Color Toggle">
              <i class="iconfont icon-dark" id="color-toggle-icon"></i>
            </a>
          </li>
        
      </ul>
    </div>
  </div>
</nav>

  

<div id="banner" class="banner" parallax=true
     style="background: url('https://cdn.jsdelivr.net/gh/MoonforDream/photohouse/hexo/202405190159278.png') no-repeat center center; background-size: cover;">
  <div class="full-bg-img">
    <div class="mask flex-center" style="background-color: rgba(0, 0, 0, 0.3)">
      <div class="banner-text text-center fade-in-up">
        <div class="h2">
          
            <span id="subtitle" data-typed-text="C++学习"></span>
          
        </div>

        
          
  <div class="mt-3">
    
    
      <span class="post-meta">
        <i class="iconfont icon-date-fill" aria-hidden="true"></i>
        <time datetime="2024-05-19 01:06" pubdate>
          2024年5月19日 凌晨
        </time>
      </span>
    
  </div>

  <div class="mt-1">
    
      <span class="post-meta mr-2">
        <i class="iconfont icon-chart"></i>
        
          43k 字
        
      </span>
    

    
      <span class="post-meta mr-2">
        <i class="iconfont icon-clock-fill"></i>
        
        
        
          362 分钟
        
      </span>
    

    
    
  </div>


        
      </div>

      
    </div>
  </div>
</div>

</div>

  </header>

  <main>
    
      

<div class="container-fluid nopadding-x">
  <div class="row nomargin-x">
    <div class="side-col d-none d-lg-block col-lg-2">
      

    </div>

    <div class="col-lg-8 nopadding-x-md">
      <div class="container nopadding-x-md" id="board-ctn">
        <div id="board">
          <article class="post-content mx-auto">
            <h1 id="seo-header">C++学习</h1>
            
            
              <div class="markdown-body">
                
                <h1 id="C-学习"><a href="#C-学习" class="headerlink" title="C++ 学习"></a>C++ 学习</h1><h2 id="学习路线"><a href="#学习路线" class="headerlink" title="学习路线"></a>学习路线</h2><p><img src="https://cdn.jsdelivr.net/gh/MoonforDream/photohouse/hexo/202405190009275.jpg" srcset="/img/loading.gif" lazyload alt="image"></p>
<h2 id="基本语法"><a href="#基本语法" class="headerlink" title="基本语法"></a>基本语法</h2><p>通常头文件我们都选择使用<iostream>,虽然&lt;bits&#x2F;stdc++.h&gt;包含c++所有的头文件，但是会产生很多我们不使用的头文件，导致编译时间增长。个人认为输入输出还是使用c的函数为好(c的输入输出更快)。</p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><code class="hljs c++"><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;iostream&gt;</span>  <span class="hljs-comment">//为输入输出流的头文件(c++)</span></span><br><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;bits/stdc++.h&gt;</span>  <span class="hljs-comment">//该头文件包含c++中所有的头文件</span></span><br><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;cstdio&gt;</span>  <span class="hljs-comment">//在c语言头文件的基础上加上c，去掉.h尾缀</span></span><br><span class="hljs-keyword">using</span> <span class="hljs-keyword">namespace</span> std; <span class="hljs-comment">//使用定义的名字空间，指定缺省的命名空间，如果没有该声明，后面的输入输出前都需加入std::</span><br><br><span class="hljs-function"><span class="hljs-type">int</span> <span class="hljs-title">main</span><span class="hljs-params">()</span></span>&#123;<br>    <span class="hljs-type">int</span> n;<br>	cin&gt;&gt;n;<span class="hljs-comment">//cin为c++的输入函数</span><br>    cout&lt;&lt;n&lt;&lt;endl; <span class="hljs-comment">//cout为c++的输出函数，而endl就是换行</span><br>    <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;<br>&#125;<br></code></pre></td></tr></table></figure>

<p><strong>变量的定义</strong></p>
<p>相比c语言，c++多了string字符串类型的定义</p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs c++">string name;<br></code></pre></td></tr></table></figure>

<p><strong>宏常量</strong></p>
<p>一般在main函数的上面声明，用大写命名.</p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs c++"><span class="hljs-meta">#<span class="hljs-keyword">define</span> 常量名 值</span><br></code></pre></td></tr></table></figure>

<h3 id="命名规则"><a href="#命名规则" class="headerlink" title="命名规则"></a>命名规则</h3><p>c++规定给标识符(变量、常量、函数、结构体、类等)命名时，必须遵守以下规则。</p>
<ul>
<li>在名称中只能使用字母字符、数字和下划线</li>
<li>名称的第一个字符不能是数字</li>
<li>区分大写字符与小写字符</li>
<li>不能将C++关键词用作名称</li>
<li>以下划线和大写字母打头的名称被保留给编译器机器使用的资源使用，如果违反了这一规则，会导致行为的不确定性</li>
<li>C++对名称的长度没有限制，但有些平台可能有长度限制</li>
</ul>
<h3 id="算术运算"><a href="#算术运算" class="headerlink" title="算术运算"></a>算术运算</h3><p>注意：</p>
<ul>
<li>整数进行除法运算时，如果分母为0，程序将异常退出</li>
<li>浮点数进行除法运算时，如果分母为0.0，将得到inf(nfinite，无穷大)</li>
<li>两个整数进行除法运算时，将舍去小数部分，得到一个整数</li>
<li>整数与浮点数进行除法运算时，得到的结果是浮点数</li>
<li>在整数前面加(float)或(double)可以将整数转换为float或double类型</li>
<li>取模运算只能用于整数(分母也不能为0)</li>
</ul>
<h3 id="赋值运算"><a href="#赋值运算" class="headerlink" title="赋值运算"></a>赋值运算</h3><p>注意</p>
<ul>
<li>字符串(string)只能使用等号赋值，不能使用其他的赋值运算符</li>
<li>浮点数不能使用%&#x3D;运算符</li>
</ul>
<h3 id="C-初始化"><a href="#C-初始化" class="headerlink" title="C++初始化"></a>C++初始化</h3><ol>
<li><p>把值写在小括号中，等于号可以省略(C++标准）</p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs c++"><span class="hljs-type">int</span> a=(<span class="hljs-number">15</span>);<br><span class="hljs-function"><span class="hljs-type">int</span> <span class="hljs-title">b</span><span class="hljs-params">(<span class="hljs-number">20</span>)</span></span><br></code></pre></td></tr></table></figure>
</li>
<li><p>把值写在花括号中，等于号也可以省略(C++11标准)</p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs c++"><span class="hljs-type">int</span> a=&#123;<span class="hljs-number">15</span>&#125;;<br><span class="hljs-type">int</span> b&#123;<span class="hljs-number">20</span>&#125;;<br></code></pre></td></tr></table></figure>

<p>注意：在Linux平台下，编译需要加-std&#x3D;c++11 参数。</p>
</li>
</ol>
<h3 id="C-类型转换"><a href="#C-类型转换" class="headerlink" title="C++类型转换"></a>C++类型转换</h3><p><strong>功能</strong>:</p>
<ul>
<li>强制转换类型</li>
</ul>
<p><strong>C++类型转换符</strong>：</p>
<ul>
<li><code>static_cast</code></li>
<li><code>dynamic_cast</code></li>
<li><code>reinterpret_cast</code></li>
<li><code>const_cast</code></li>
<li><strong>使用方式</strong>：<code>xx_cast&lt;type&gt;(expression)</code></li>
</ul>
<p>C语言的风格：</p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs c">(type)expression;<br></code></pre></td></tr></table></figure>



<p>C++语言风格：</p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs c++"><span class="hljs-built_in">xx_cast</span>&lt;type&gt;(expression);<br></code></pre></td></tr></table></figure>





<p><strong>const_cast转换符</strong></p>
<ul>
<li><p><strong>功能</strong>：一般用于去除const属性，<strong>将const类型转换成非const</strong></p>
</li>
<li><p>例子：</p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs c++"><span class="hljs-type">const</span> Person *p1=<span class="hljs-keyword">new</span> <span class="hljs-built_in">Person</span>();<br>Person *p2=<span class="hljs-built_in">const_cast</span>&lt;Person *&gt;(p1);<br></code></pre></td></tr></table></figure></li>
</ul>
<h2 id="读写优化"><a href="#读写优化" class="headerlink" title="读写优化"></a>读写优化</h2><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs c++">ios::<span class="hljs-built_in">sync_with_stdio</span>(<span class="hljs-literal">false</span>);<br>cin.<span class="hljs-built_in">tie</span>(<span class="hljs-number">0</span>),cout.<span class="hljs-built_in">tie</span>(<span class="hljs-number">0</span>);<br></code></pre></td></tr></table></figure>











<h2 id="命名空间"><a href="#命名空间" class="headerlink" title="命名空间"></a>命名空间</h2><p>用于解决名字冲突</p>
<p>使用关键字namespace，控制名称的作用域</p>
<p>命名空间的<strong>本质</strong>：对符号常量、变量、函数、结构、枚举、类和对象等等进行封装</p>
<p>命名空间<strong>语法</strong>：<code>namespace A&#123;&#125;</code></p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><code class="hljs c++"><span class="hljs-keyword">namespace</span> A&#123;<br>    <span class="hljs-type">int</span> data=<span class="hljs-number">10</span>;<br>    <span class="hljs-keyword">namespace</span> C&#123;<br>        <span class="hljs-type">int</span> data=<span class="hljs-number">30</span>;<br>    &#125;<br>&#125;<br><br><span class="hljs-keyword">namespace</span> B&#123;<br>    <span class="hljs-type">int</span> data=<span class="hljs-number">20</span>;<br>&#125;<br><br><span class="hljs-keyword">namespace</span> D&#123;<br>    <span class="hljs-type">int</span> data=<span class="hljs-number">10</span>;<br>&#125;<br><span class="hljs-comment">//1000行代码</span><br><span class="hljs-keyword">namespace</span> D&#123;  <span class="hljs-comment">//如果存在就追加，不存在就新建</span><br>    <span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">func</span><span class="hljs-params">()</span></span>&#123;<br>        cout&lt;&lt;<span class="hljs-string">&quot;func函数&quot;</span>&lt;&lt;endl;<br>    &#125;<br>&#125;<br><br><span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">test01</span><span class="hljs-params">()</span></span>&#123;<br>    <span class="hljs-keyword">using</span> A::a;<span class="hljs-comment">//下方如果出现a，就拿A中的a使用</span><br>    cout&lt;&lt;<span class="hljs-string">&quot;a=&quot;</span>&lt;&lt;a&lt;&lt;endl; <br>    cout&lt;&lt;<span class="hljs-string">&quot;A::data= &quot;</span>&lt;&lt;A::data&lt;&lt;endl;<br>    cout&lt;&lt;<span class="hljs-string">&quot;A::B::data= &quot;</span>&lt;&lt;A::B::data&lt;&lt;endl;<br>&#125;<br></code></pre></td></tr></table></figure>

<p><strong>注意事项</strong>：</p>
<ul>
<li>命名空间只能定义在全局中</li>
<li>命名空间可以嵌套</li>
<li>命名空间是开放的，可以随时将新的成员加入命名空间</li>
<li>命名空间可以声明和实现分离(外部实现时要加作用域)</li>
<li>无名空间(<code>namespace&#123;&#125;</code>)只能在本源文件使用，里面的成员相当于静态全局成员一样</li>
<li>命名空间起别名(<code>namespace 别名=要取别名的空间名</code>)</li>
<li>使用using声明命名空间中的某几个成员可用，容易造成名字冲突(会合普通变量名字冲突)</li>
<li>using使用命名空间中的函数重载过的函数，函数重载，命名空间的所有同名函数都被声明</li>
</ul>
<p><strong>using编译指令</strong>：</p>
<p><em>using声明整个命名空间，可以直接通过成员名使用</em></p>
<p>语法：<code>using namespace 空间名</code></p>
<p><strong>注意事项</strong>：如果外部有定义空间中的变量，调用时则会先找普通变量，再找命名空间的，全局范围的变量会与局部的命名空间的变量产生冲突</p>
<h2 id="内存分区模型"><a href="#内存分区模型" class="headerlink" title="内存分区模型"></a>内存分区模型</h2><p>C++程序运行时，将内存大方向划分为<strong>4个区域</strong></p>
<ul>
<li>代码区：存放函数体的二进制代码，由操作系统进行管理的</li>
<li>全局区：存放全局变量和静态变量以及常量</li>
<li>栈区：由编译器自动分配释放，存放函数的参数值，局部变量等</li>
<li>堆区：由程序员分配和释放，若程序员不释放，程序结束时由操作系统回收</li>
</ul>
<p><strong>内存四区意义</strong>：</p>
<p>不同区域存放的数据，赋予不同的生命周期，给我们更大的灵活编程</p>
<h3 id="程序运行前"><a href="#程序运行前" class="headerlink" title="程序运行前"></a>程序运行前</h3><p>在程序编译后，生成了exe可执行程序，为执行该程序前分为两个区域</p>
<p><strong>代码区</strong>：</p>
<p>​		存放cpu执行的机器指令</p>
<p>​		代码区是共享的，共享的目的是对于频繁被执行的程		序，只需要在内存中有一份代码即可</p>
<p>​		代码区是只读的，使其只读的原因是防止程序意外地修		改了它的指令</p>
<p><strong>全局区</strong>：</p>
<p>​		全局变量和静态变量存放在此</p>
<p>​		全局区还包含了常量区，字符串常量和其他常量也存放		在此</p>
<p>​		<em>该区域的数据在程序结束后由操作系统释放</em></p>
<p><strong>总结</strong>：</p>
<ul>
<li>C++中在程序运行前分为全局区和代码区</li>
<li>代码区特点是共享和只读</li>
<li>全局区存放全局变量、静态变量、常量</li>
<li>常量区中存放const修饰的全局常量和字符串常量</li>
</ul>
<h3 id="程序运行后"><a href="#程序运行后" class="headerlink" title="程序运行后"></a>程序运行后</h3><p><strong>栈区</strong>：</p>
<p>​		由编译器自动分配释放，存放函数的参数值，局部变量		等</p>
<p>​		注意事项：不要返回局部变量的地址，栈区开辟的数据		由编译器自动释放</p>
<p><strong>堆区</strong>：</p>
<p>​		由程序员分配释放，若程序员不释放，程序结束时由操作		系统回收</p>
<p>​		在C++中主要利用new在堆区开辟内存</p>
<p>​		</p>
<p><strong>总结</strong>：</p>
<p>​	堆区数据由程序员管理开辟和释放</p>
<p>​	堆区数据利用new关键字进行开辟内存</p>
<h3 id="new操作符"><a href="#new操作符" class="headerlink" title="new操作符"></a>new操作符</h3><p>​	C++中利用<strong>new</strong>操作符在堆区开辟数据</p>
<p>​	堆区开辟的数据，由程序员手动开辟，手动释放，释放利用	<strong>delete</strong></p>
<p>​	语法：<em>new 数据类型</em></p>
<p>​	利用new创建的数据，会返回该数据对应的类型的指针</p>
<p>​	</p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br></pre></td><td class="code"><pre><code class="hljs c++"><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;iostream&gt;</span></span><br><span class="hljs-keyword">using</span> <span class="hljs-keyword">namespace</span> std;<br><br><span class="hljs-comment">//new的基本语法</span><br><span class="hljs-function"><span class="hljs-type">int</span> *<span class="hljs-title">func</span><span class="hljs-params">()</span></span>&#123;<br>    <span class="hljs-comment">//在堆区创建整型数据</span><br>    <span class="hljs-comment">//new返回是该数据类型的指针</span><br>    <span class="hljs-type">int</span> *p=<span class="hljs-keyword">new</span> <span class="hljs-built_in">int</span>(<span class="hljs-number">10</span>);<br>    <span class="hljs-keyword">return</span> p;<br>&#125;<br><br><span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">test01</span><span class="hljs-params">()</span></span>&#123;<br>    <span class="hljs-type">int</span> *p=<span class="hljs-built_in">func</span>();<br>    cout&lt;&lt;*p&lt;&lt;endl;<br>    cout&lt;&lt;*p&lt;&lt;endl;<br>    cout&lt;&lt;*p&lt;&lt;endl;<br>    <span class="hljs-comment">//堆区的数据是由程序员管理开辟和释放</span><br>    <span class="hljs-comment">//如果想释放用关键字delete</span><br>    <span class="hljs-keyword">delete</span> p;<br>    cout&lt;&lt;*p&lt;&lt;endl; <span class="hljs-comment">//内存已经被释放，再次访问就是非法操作</span><br>&#125;<br><br><span class="hljs-comment">//在堆区利用new开辟数组f</span><br><span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">test02</span><span class="hljs-params">()</span></span>&#123;<br>    <span class="hljs-comment">//创建10整型数据的数组，在堆区</span><br>    <span class="hljs-type">int</span> *arr=<span class="hljs-keyword">new</span> <span class="hljs-type">int</span>[<span class="hljs-number">10</span>]; <span class="hljs-comment">//10代表数组有10个元素</span><br>    <span class="hljs-keyword">for</span>(<span class="hljs-type">int</span> i=<span class="hljs-number">0</span>;i&lt;<span class="hljs-number">10</span>;i++)&#123;<br>        arr[i]=i+<span class="hljs-number">100</span>;<br>    &#125;<br>    <span class="hljs-keyword">for</span>(<span class="hljs-type">int</span> i=<span class="hljs-number">0</span>;i&lt;<span class="hljs-number">10</span>;i++)&#123;<br>        cout&lt;&lt;arr[i]&lt;&lt;endl;<br>    &#125;<br>    <span class="hljs-comment">//释放堆区数组</span><br>    <span class="hljs-comment">//释放数组的时候，要加入[]</span><br>    <span class="hljs-keyword">delete</span>[] arr;<br>&#125;<br><span class="hljs-function"><span class="hljs-type">int</span> <span class="hljs-title">main</span><span class="hljs-params">()</span></span>&#123;<br>    <span class="hljs-built_in">test01</span>();<br>    <span class="hljs-built_in">test02</span>();<br>    <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;<br>&#125;<br></code></pre></td></tr></table></figure>





<h2 id="引用"><a href="#引用" class="headerlink" title="引用"></a>引用</h2><h3 id="引用的基本使用"><a href="#引用的基本使用" class="headerlink" title="引用的基本使用"></a>引用的基本使用</h3><p>作用：给变量起别名</p>
<p>语法：<em>数据类型 &amp;别名 &#x3D; 原名</em></p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><code class="hljs c++"><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;iostream&gt;</span></span><br><span class="hljs-keyword">using</span> <span class="hljs-keyword">namespace</span> std;<br><br><span class="hljs-function"><span class="hljs-type">int</span> <span class="hljs-title">main</span><span class="hljs-params">()</span></span>&#123;<br>    <span class="hljs-type">int</span> a=<span class="hljs-number">10</span>;<br>    <span class="hljs-type">int</span> &amp;b=a;<br>    cout&lt;&lt;<span class="hljs-string">&quot;a=&quot;</span>&lt;&lt;a&lt;&lt;endl;<br>    cout&lt;&lt;<span class="hljs-string">&quot;b=&quot;</span>&lt;&lt;b&lt;&lt;endl;<br>    <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;<br>&#125;<br></code></pre></td></tr></table></figure>





<h3 id="引用注意事项"><a href="#引用注意事项" class="headerlink" title="引用注意事项"></a>引用注意事项</h3><ul>
<li>引用必须要初始化</li>
<li>引用在初始化后，不可以改变</li>
</ul>
<h3 id="引用做函数参数"><a href="#引用做函数参数" class="headerlink" title="引用做函数参数"></a>引用做函数参数</h3><p><strong>作用</strong>：函数传参时，可以利用引用的技术让形参修饰实参</p>
<p><strong>优点</strong>：可以简化指针修改实参</p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><code class="hljs c++"><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;iostream&gt;</span></span><br><span class="hljs-keyword">using</span> <span class="hljs-keyword">namespace</span> std;<br><br><span class="hljs-comment">//引用传递</span><br><span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">myswap</span><span class="hljs-params">(<span class="hljs-type">int</span> &amp;a,<span class="hljs-type">int</span> &amp;b)</span></span>&#123;<br>    <span class="hljs-type">int</span> temp=a;<br>    a=b;<br>    b=temp;<br>&#125;<br><br><span class="hljs-function"><span class="hljs-type">int</span> <span class="hljs-title">main</span><span class="hljs-params">()</span></span>&#123;<br>    <span class="hljs-type">int</span> a=<span class="hljs-number">10</span>;<br>    <span class="hljs-type">int</span> b=<span class="hljs-number">20</span>;<br>    <span class="hljs-built_in">myswap</span>(a,b);  <span class="hljs-comment">//引用传递，形参会修饰实参的</span><br>    cout&lt;&lt;<span class="hljs-string">&quot;a= &quot;</span>&lt;&lt;a&lt;&lt;endl;<br>    cout&lt;&lt;<span class="hljs-string">&quot;b= &quot;</span>&lt;&lt;b&lt;&lt;endl;<br>    <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;<br>&#125;<br></code></pre></td></tr></table></figure>



<p><strong>总结</strong>：通过引用参数产生的效果同地址传递是一样的，引用的语法更清楚更简单</p>
<h3 id="引用做函数返回值"><a href="#引用做函数返回值" class="headerlink" title="引用做函数返回值"></a>引用做函数返回值</h3><p><strong>作用</strong>：引用是可以作为函数的返回值存在的</p>
<p><strong>注意</strong>：<em>不要返回局部变量引用</em></p>
<p><strong>用法</strong>：函数调用作为左值</p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><code class="hljs c++"><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;iostream&gt;</span></span><br><span class="hljs-keyword">using</span> <span class="hljs-keyword">namespace</span> std;<br><br><span class="hljs-comment">//不要返回局部变量引用</span><br><span class="hljs-function"><span class="hljs-type">int</span>&amp; <span class="hljs-title">test01</span><span class="hljs-params">()</span></span>&#123;<br>    <span class="hljs-type">int</span> a=<span class="hljs-number">10</span>;<span class="hljs-comment">//局部变量存放在栈区</span><br>    <span class="hljs-keyword">return</span> a;<br>&#125;<br><span class="hljs-comment">//函数的调用可以作为左值</span><br><span class="hljs-function"><span class="hljs-type">int</span>&amp; <span class="hljs-title">test02</span><span class="hljs-params">()</span></span>&#123;<br>    <span class="hljs-type">static</span> <span class="hljs-type">int</span> a=<span class="hljs-number">10</span>; <span class="hljs-comment">//静态变量，存放在全局区，全局区上的数据在程序结束后系统释放</span><br>    <span class="hljs-keyword">return</span> a;<br>&#125;<br><br><span class="hljs-function"><span class="hljs-type">int</span> <span class="hljs-title">main</span><span class="hljs-params">()</span></span>&#123;<br>    <span class="hljs-type">int</span> &amp;ref=<span class="hljs-built_in">test01</span>(); <span class="hljs-comment">//非法操作</span><br>    cout&lt;&lt;<span class="hljs-string">&quot;ref= &quot;</span>&lt;&lt;ref&lt;&lt;endl;<span class="hljs-comment">//第一次结果正确是编译器做了保留</span><br>    cout&lt;&lt;<span class="hljs-string">&quot;ref= &quot;</span>&lt;&lt;ref&lt;&lt;endl;<span class="hljs-comment">//第二次结果错误是因为a的内存已经释放</span><br>    <span class="hljs-type">int</span> &amp;ref2=<span class="hljs-built_in">test02</span>();<br>    cout&lt;&lt;<span class="hljs-string">&quot;ref2= &quot;</span>&lt;&lt;ref2&lt;&lt;endl;<span class="hljs-comment">//输出10</span><br>    cout&lt;&lt;<span class="hljs-string">&quot;ref2= &quot;</span>&lt;&lt;ref2&lt;&lt;endl;<br>    <span class="hljs-built_in">test02</span>()=<span class="hljs-number">1000</span>; <span class="hljs-comment">//如果函数的返回值是引用，这个函数的调用可以作为左值</span><br>    cout&lt;&lt;<span class="hljs-string">&quot;ref2= &quot;</span>&lt;&lt;ref2&lt;&lt;endl;<span class="hljs-comment">//输出1000</span><br>    cout&lt;&lt;<span class="hljs-string">&quot;ref2= &quot;</span>&lt;&lt;ref2&lt;&lt;endl;<br>    <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;<br>&#125;<br></code></pre></td></tr></table></figure>





<h3 id="引用的本质"><a href="#引用的本质" class="headerlink" title="引用的本质"></a>引用的本质</h3><p><strong>本质</strong>：<em>引用的本质在C++内部实现是一个指针常量</em></p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><code class="hljs c++"><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;iostream&gt;</span></span><br><span class="hljs-keyword">using</span> <span class="hljs-keyword">namespace</span> std;<br><br><span class="hljs-comment">//发现是引用，转换为int* const ref=&amp;a;</span><br><span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">func</span><span class="hljs-params">(<span class="hljs-type">int</span>&amp; ref)</span></span>&#123;<br>    ref=<span class="hljs-number">100</span>;<span class="hljs-comment">//ref是引用，转换为*ref=100</span><br>&#125;<br><br><span class="hljs-function"><span class="hljs-type">int</span> <span class="hljs-title">main</span><span class="hljs-params">()</span></span>&#123;<br>    <span class="hljs-type">int</span> a=<span class="hljs-number">10</span>;<br>    <span class="hljs-comment">//自动转换为int* const ref=&amp;a;指针常量是指针指向不可改，也说明为什么引用不可更改</span><br>    <span class="hljs-type">int</span>&amp; ref=a;<br>    ref=<span class="hljs-number">20</span>; <span class="hljs-comment">//内部发现ref是引用，自动帮我们转换为：*ref=20;</span><br>    cout&lt;&lt;<span class="hljs-string">&quot;a:&quot;</span>&lt;&lt;a&lt;&lt;endl;<br>    cout&lt;&lt;<span class="hljs-string">&quot;ref:&quot;</span>&lt;&lt;ref&lt;&lt;endl;<br>    <span class="hljs-built_in">func</span>(a);<br>    <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;<br>&#125;<br></code></pre></td></tr></table></figure>



<p><strong>总结</strong>：C++推荐使用引用技术，因为语法方便，引用本质是指针常量，但是所有的指针操作编译器都帮我们做了</p>
<h3 id="常量引用"><a href="#常量引用" class="headerlink" title="常量引用"></a>常量引用</h3><p><strong>作用</strong>：常量引用主要用来修饰形参，防止误操作</p>
<p>在函数形参列表中，可以加const修饰形参，防止形参改变实参</p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><code class="hljs c++"><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;iostream&gt;</span></span><br><span class="hljs-keyword">using</span> <span class="hljs-keyword">namespace</span> std;<br><span class="hljs-comment">//打印数据函数</span><br><span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">showValue</span><span class="hljs-params">(<span class="hljs-type">const</span> <span class="hljs-type">int</span> &amp;val)</span></span>&#123;<br>    <span class="hljs-comment">//val=1000;   如果没加上const，外面的a也会更改</span><br>    <span class="hljs-comment">//加上了const，上段代码就会报错</span><br>    cout&lt;&lt;<span class="hljs-string">&quot;val= &quot;</span>&lt;&lt;val&lt;&lt;endl;<br>&#125;<br><br><span class="hljs-function"><span class="hljs-type">int</span> <span class="hljs-title">main</span><span class="hljs-params">()</span></span>&#123;<br>    <span class="hljs-comment">//常量引用</span><br>    <span class="hljs-type">int</span> &amp;ref=<span class="hljs-number">10</span>;<span class="hljs-comment">//错误，引用必须引一块合法的内存空间</span><br>    <span class="hljs-comment">//加上const之后，编译器将代码修改为 int temp=10; const int &amp;ref=temp;</span><br>    <span class="hljs-type">const</span> <span class="hljs-type">int</span> &amp;ref=<span class="hljs-number">10</span>;<span class="hljs-comment">//正确</span><br>    <span class="hljs-comment">//使用场景：用来修饰形参，防止误操作</span><br>    <span class="hljs-type">int</span> a=<span class="hljs-number">100</span>;<br>    <span class="hljs-built_in">showValue</span>(a);<br>    cout&lt;&lt;<span class="hljs-string">&quot;a= &quot;</span>&lt;&lt;a&lt;&lt;endl;<br>    <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;<br>&#125;<br></code></pre></td></tr></table></figure>







<h2 id="函数提高"><a href="#函数提高" class="headerlink" title="函数提高"></a>函数提高</h2><h3 id="函数默认参数"><a href="#函数默认参数" class="headerlink" title="函数默认参数"></a>函数默认参数</h3><p>在C++中，函数的形参列表中的形参是可以有默认值的。</p>
<p><strong>语法</strong>：<em>返回值类型 函数名 (参数 &#x3D; 默认值){}</em></p>
<p><strong>注意事项</strong>：</p>
<ul>
<li>如果某个位置已经有了默认参数，那么从这个位置往后，从左向右的形参都必须要有默认参数</li>
<li>如果函数声明有默认参数，函数实现就不能有默认参数</li>
<li>声明和实现只能有一个有默认参数</li>
</ul>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><code class="hljs c++"><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;iostream&gt;</span></span><br><span class="hljs-keyword">using</span> <span class="hljs-keyword">namespace</span> std;<br><br><span class="hljs-comment">//函数默认参数</span><br><span class="hljs-function"><span class="hljs-type">int</span> <span class="hljs-title">func</span><span class="hljs-params">(<span class="hljs-type">int</span> a,<span class="hljs-type">int</span> b=<span class="hljs-number">20</span>,<span class="hljs-type">int</span> c=<span class="hljs-number">30</span>)</span></span>&#123;<br>    <span class="hljs-keyword">return</span> a+b+c;<br>&#125;<br><br><span class="hljs-function"><span class="hljs-type">int</span> <span class="hljs-title">main</span><span class="hljs-params">()</span></span>&#123;<br>    cout&lt;&lt;<span class="hljs-built_in">func</span>(<span class="hljs-number">10</span>)&lt;&lt;endl;<span class="hljs-comment">//有默认值可以只传没有默认值的形参</span><br>    cout&lt;&lt;<span class="hljs-built_in">func</span>(<span class="hljs-number">10</span>,<span class="hljs-number">30</span>)&lt;&lt;endl;<span class="hljs-comment">//如果自己传入数据，就用自己的数据</span><br>    <br>    <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;<br>&#125;<br></code></pre></td></tr></table></figure>





<h3 id="函数占位参数"><a href="#函数占位参数" class="headerlink" title="函数占位参数"></a>函数占位参数</h3><p>C++中函数的形参列表里可以有占位参数，用来做占位，调用函数时必须填补该位置</p>
<p><strong>语法</strong>：<em>返回值类型 函数名(数据类型){}</em></p>
<p>在现阶段函数的占位参数存在意义不大，但是后面的课程中会用到该技术</p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><code class="hljs c++"><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;iostream&gt;</span></span><br><span class="hljs-keyword">using</span> <span class="hljs-keyword">namespace</span> std;<br><br><span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">func</span><span class="hljs-params">(<span class="hljs-type">int</span> a,<span class="hljs-type">int</span>)</span></span>&#123;<br>    cout&lt;&lt;<span class="hljs-string">&quot;this is func&quot;</span>&lt;&lt;endl;<br>&#125;<br><br><span class="hljs-comment">//占位参数还可以默认参数</span><br><span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">func1</span><span class="hljs-params">(<span class="hljs-type">int</span> a,<span class="hljs-type">int</span> =<span class="hljs-number">10</span>)</span></span>&#123;<br>    cout&lt;&lt;<span class="hljs-string">&quot;this is func1&quot;</span>&lt;&lt;endl;<br>&#125;<br><br><span class="hljs-function"><span class="hljs-type">int</span> <span class="hljs-title">main</span><span class="hljs-params">()</span></span>&#123;<br>	<span class="hljs-built_in">func</span>(<span class="hljs-number">10</span>,<span class="hljs-number">10</span>);<br>    <span class="hljs-built_in">func1</span>(<span class="hljs-number">10</span>);<br>    <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;<br>&#125;<br></code></pre></td></tr></table></figure>





<h3 id="函数重载"><a href="#函数重载" class="headerlink" title="函数重载"></a><strong>函数重载</strong></h3><h4 id="概述"><a href="#概述" class="headerlink" title="概述"></a>概述</h4><p><strong>作用</strong>：函数名可以相同，提高复用性</p>
<p><strong>函数重载满足条件</strong>：</p>
<ul>
<li>同一个作用域下</li>
<li>函数名称相同</li>
<li>函数参数<strong>类型不同</strong>或者<strong>个数不同</strong>或者<strong>顺序不同</strong></li>
</ul>
<p><strong>注意</strong>：函数的返回值类型不可以作为函数重载的条件</p>
<p>例如：函数func返回值类型为int，而还有一个func函数返回值为void，这个时候编译器会报错！</p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br></pre></td><td class="code"><pre><code class="hljs c++"><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;iostream&gt;</span></span><br><span class="hljs-keyword">using</span> <span class="hljs-keyword">namespace</span> std;<br><span class="hljs-comment">//函数重载需要在同一个作用域中</span><br><span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">func</span><span class="hljs-params">()</span></span>&#123;<br>    cout&lt;&lt;<span class="hljs-string">&quot;func的调用&quot;</span>&lt;&lt;endl;<br>&#125;<br><br><span class="hljs-comment">//个数不同</span><br><span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">func</span><span class="hljs-params">(<span class="hljs-type">int</span> a)</span></span>&#123;<br>    cout&lt;&lt;<span class="hljs-string">&quot;func(int a)的调用&quot;</span>&lt;&lt;endl;<br>&#125;<br><br><span class="hljs-comment">//参数类型不同</span><br><span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">func</span><span class="hljs-params">(<span class="hljs-type">double</span> a)</span></span>&#123;<br>    cout&lt;&lt;<span class="hljs-string">&quot;func(double a)的调用&quot;</span>&lt;&lt;endl;<br>&#125;<br><br><span class="hljs-comment">//顺序不同</span><br><span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">func</span><span class="hljs-params">(<span class="hljs-type">int</span> a,<span class="hljs-type">double</span> b)</span></span>&#123;<br>    cout&lt;&lt;<span class="hljs-string">&quot;func(int a,double b)的调用&quot;</span>&lt;&lt;endl;<br>&#125;<br><br><span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">func</span><span class="hljs-params">(<span class="hljs-type">double</span> a,<span class="hljs-type">int</span> b)</span></span>&#123;<br>    cout&lt;&lt;<span class="hljs-string">&quot;func(double a,int b)的调用&quot;</span>&lt;&lt;endl;<br>&#125;<br><br><span class="hljs-comment">//注意事项</span><br><span class="hljs-comment">//函数的返回值类型不能作为函数重载的条件</span><br><span class="hljs-function"><span class="hljs-type">int</span> <span class="hljs-title">main</span><span class="hljs-params">()</span></span>&#123;<br>	<span class="hljs-built_in">func</span>();<br>    <span class="hljs-built_in">func</span>(<span class="hljs-number">10</span>);<br>    <span class="hljs-built_in">func</span>(<span class="hljs-number">0.1</span>);<br>    <span class="hljs-built_in">func</span>(<span class="hljs-number">10</span>,<span class="hljs-number">0.1</span>);<br>    <span class="hljs-built_in">func</span>(<span class="hljs-number">0.1</span>,<span class="hljs-number">10</span>);<br>    <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;<br>&#125;<br></code></pre></td></tr></table></figure>





<h4 id="函数重载注意事项"><a href="#函数重载注意事项" class="headerlink" title="函数重载注意事项"></a>函数重载注意事项</h4><ul>
<li>引用作为函数重载条件</li>
<li>函数重载碰到函数默认参数</li>
</ul>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><code class="hljs c++"><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;iostream&gt;</span></span><br><span class="hljs-keyword">using</span> <span class="hljs-keyword">namespace</span> std;<br><br><span class="hljs-comment">//引用作为函数重载条件</span><br><span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">func</span><span class="hljs-params">(<span class="hljs-type">int</span> &amp;a)</span></span>&#123;  <span class="hljs-comment">//int &amp;a=10;不合法</span><br>    cout&lt;&lt;<span class="hljs-string">&quot;func(int &amp;a)的调用&quot;</span>&lt;&lt;endl;<br>&#125;<br><br><span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">func</span><span class="hljs-params">(<span class="hljs-type">const</span> <span class="hljs-type">int</span> &amp;a)</span></span>&#123;  <span class="hljs-comment">//const int &amp;a=10;合法</span><br>    cout&lt;&lt;<span class="hljs-string">&quot;func(const int &amp;a)的调用&quot;</span>&lt;&lt;endl;<br>&#125;<br><br><span class="hljs-comment">//函数重载碰到默认参数,出现二义性，报错，尽量避免这种情况</span><br><span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">func2</span><span class="hljs-params">(<span class="hljs-type">int</span> a,<span class="hljs-type">int</span> b=<span class="hljs-number">10</span>)</span></span>&#123;<br>    cout&lt;&lt;<span class="hljs-string">&quot;func2(int a,int b)的调用&quot;</span>&lt;&lt;endl;<br>&#125;<br><br><span class="hljs-function"><span class="hljs-type">void</span>  <span class="hljs-title">func2</span><span class="hljs-params">(<span class="hljs-type">int</span> a)</span></span>&#123;<br>    cout&lt;&lt;<span class="hljs-string">&quot;func2(int a)的调用&quot;</span>&lt;&lt;endl;<br>&#125;<br><br><span class="hljs-function"><span class="hljs-type">int</span> <span class="hljs-title">main</span><span class="hljs-params">()</span></span>&#123;<br>    <span class="hljs-type">int</span> a=<span class="hljs-number">10</span>;<br>    <span class="hljs-built_in">func</span>(a);<br>    <span class="hljs-built_in">func</span>(<span class="hljs-number">10</span>);<br>    <span class="hljs-built_in">func2</span>(<span class="hljs-number">10</span>);<br>    <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;<br>&#125;<br></code></pre></td></tr></table></figure>









<h2 id="类和对象"><a href="#类和对象" class="headerlink" title="类和对象"></a><strong>类和对象</strong></h2><p>C++面向对象的三大特性为：<em>封装</em>、<em>继承</em>、<em>多态</em></p>
<p>C++认为万事万物都皆为对象，对象上有其属性和行为</p>
<h3 id="封装"><a href="#封装" class="headerlink" title="封装"></a>封装</h3><h4 id="封装的意义"><a href="#封装的意义" class="headerlink" title="封装的意义"></a><strong>封装的意义</strong></h4><p>封装是C++面向对象三大特性之一</p>
<p>封装的意义：</p>
<ul>
<li>将属性和行为作为一个整体，表现生活中的事物</li>
<li>将属性和行为加以权限控制</li>
</ul>
<p><strong>封装意义一</strong>：</p>
<p>​	在设计类的时候，属性和行为写在一起，表现事物</p>
<p><strong>语法</strong>：<em>class 类名{ 访问权限：属性 &#x2F; 行为 };</em></p>
<p>类中的属性和行为，我们统一称为成员</p>
<p>属性：成员属性 成员变量</p>
<p>行为：成员函数 成员方法</p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><code class="hljs c++"><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;iostream&gt;</span></span><br><span class="hljs-keyword">using</span> <span class="hljs-keyword">namespace</span> std;<br><br><span class="hljs-comment">//设计一个圆类，求圆的周长</span><br><span class="hljs-keyword">class</span> <span class="hljs-title class_">Circle</span>&#123;<br>    <span class="hljs-comment">//访问权限</span><br><span class="hljs-keyword">public</span>:  <span class="hljs-comment">//公共权限</span><br>    <span class="hljs-comment">//属性</span><br>    <span class="hljs-type">int</span> m_r;<br>    <span class="hljs-comment">//行为</span><br>    <span class="hljs-function"><span class="hljs-type">double</span> <span class="hljs-title">calculateZC</span><span class="hljs-params">()</span></span>&#123;<br>        <span class="hljs-keyword">return</span> <span class="hljs-number">2</span>*PI*m_r;<br>    &#125;<br>&#125;;<br><br><span class="hljs-function"><span class="hljs-type">int</span> <span class="hljs-title">main</span><span class="hljs-params">()</span></span>&#123;<br>    <span class="hljs-comment">//通过圆类，创建具体的圆(对象)</span><br>    <span class="hljs-comment">//实例化  （通过一个类，创建一个对象的过程）</span><br>    Circle c1;<br>    <span class="hljs-comment">//给圆对象的属性进行赋值</span><br>    c1.m_r=<span class="hljs-number">10</span>;<br>    cout&lt;&lt;<span class="hljs-string">&quot;圆的周长为：&quot;</span>&lt;&lt;c1.<span class="hljs-built_in">calculateZC</span>()&lt;&lt;endl;<br>    <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;<br>&#125;<br></code></pre></td></tr></table></figure>



<p><strong>封装的意义二</strong>：</p>
<p>类在设计时，可以把属性和行为放在不同的权限下，加以控制</p>
<p>访问权限有三种：</p>
<ol>
<li><em>public		公共权限，成员类内外可以访问</em></li>
<li><em>protected	保护权限，成员类内可以访问，类外不可以访问，在继承中，父类的保护权限的内容，子类也可以访问</em></li>
<li><em>private		私有权限，成员类内可以访问，类外不可以访问，父类的私有权限的内容，子类不可以访问</em></li>
</ol>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><code class="hljs c++"><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;iostream&gt;</span></span><br><span class="hljs-keyword">using</span> <span class="hljs-keyword">namespace</span> std;<br><br><span class="hljs-keyword">class</span> <span class="hljs-title class_">Person</span>&#123;<br>  <span class="hljs-comment">//公共权限</span><br><span class="hljs-keyword">public</span>:<br>    string m_Name;<br>  <span class="hljs-comment">//保护权限</span><br><span class="hljs-keyword">protected</span>:<br>    string m_car;<br>  <span class="hljs-comment">//私有权限</span><br><span class="hljs-keyword">private</span>:<br>    <span class="hljs-type">int</span> m_password;<br><span class="hljs-keyword">public</span>:<br>    <span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">func</span><span class="hljs-params">()</span></span>&#123;<br>        m_Name=<span class="hljs-string">&quot;张三&quot;</span>;<br>        m_car=<span class="hljs-string">&quot;拖拉机&quot;</span>;<br>        m_password=<span class="hljs-number">123456</span>;<br>    &#125;<br>&#125;;<br><br><span class="hljs-function"><span class="hljs-type">int</span> <span class="hljs-title">main</span><span class="hljs-params">()</span></span>&#123;<br>    Person p1;<br>    p1.m_Name=<span class="hljs-string">&quot;李四&quot;</span>;<br>    p1.m_car=<span class="hljs-string">&quot;奔驰&quot;</span>;  <span class="hljs-comment">//报错，保护权限类外不可访问</span><br>    p1.m_password=<span class="hljs-number">12</span>;  <span class="hljs-comment">//报错，私有权限类外不可访问</span><br>    p1.<span class="hljs-built_in">func</span>(); <span class="hljs-comment">//公共权限可以访问</span><br>    <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;<br>&#125;<br></code></pre></td></tr></table></figure>





<h4 id="struct和class区别"><a href="#struct和class区别" class="headerlink" title="struct和class区别"></a>struct和class区别</h4><p>在C++中struct和class唯一的区别就在于<strong>默认的访问权限不同</strong></p>
<p>区别：</p>
<ul>
<li><em>struct 默认权限为公共</em></li>
<li><em>class 默认权限为私有</em></li>
</ul>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><code class="hljs c++"><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;iostream&gt;</span></span><br><span class="hljs-keyword">using</span> <span class="hljs-keyword">namespace</span> std;<br><br><span class="hljs-keyword">class</span> <span class="hljs-title class_">C1</span>&#123;<br>    <span class="hljs-type">int</span> m_A;   <span class="hljs-comment">//默认权限  是私有</span><br>&#125;;<br><br><span class="hljs-keyword">struct</span> <span class="hljs-title class_">C2</span>&#123;<br>    <span class="hljs-type">int</span> m_A;  <span class="hljs-comment">//默认权限为公有</span><br>&#125;<br><br><span class="hljs-function"><span class="hljs-type">int</span> <span class="hljs-title">main</span><span class="hljs-params">()</span></span>&#123;<br>	C1 c1;<br>    c1.m_A=<span class="hljs-number">100</span>;  <span class="hljs-comment">//报错</span><br>    C2 c2;<br>    c2.m_A=<span class="hljs-number">100</span>;  <span class="hljs-comment">//不会报错,在struct默认的权限为公共的，所以可以访问</span><br>    <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;<br>&#125;<br></code></pre></td></tr></table></figure>





<h4 id="成员属性设置为私有"><a href="#成员属性设置为私有" class="headerlink" title="成员属性设置为私有"></a>成员属性设置为私有</h4><p><strong>优点1</strong>：将所有成员属性设置为私有，可以自己控制读写权限</p>
<p><strong>优点2</strong>：对于写权限，我们可以监测数据的有效性</p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><code class="hljs c++"><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;iostream&gt;</span></span><br><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;string&gt;</span></span><br><span class="hljs-keyword">using</span> <span class="hljs-keyword">namespace</span> std;<br><br><span class="hljs-keyword">class</span> <span class="hljs-title class_">Person</span>&#123;<br><span class="hljs-keyword">public</span>:<br>	<span class="hljs-comment">//设置姓名</span><br>    <span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">setName</span><span class="hljs-params">(string name)</span></span>&#123;<br>        m_Name=name;<br>    &#125;<br>    <span class="hljs-comment">//获取姓名</span><br>    <span class="hljs-function">string <span class="hljs-title">getName</span><span class="hljs-params">()</span></span>&#123;<br>        <span class="hljs-keyword">return</span> m_Name;<br>    &#125;<br><span class="hljs-keyword">private</span>:<br>    <span class="hljs-comment">//姓名  可读可写</span><br>    string m_Name;<br>    <span class="hljs-comment">//年龄 只读</span><br>    <span class="hljs-type">int</span> m_Age;<br>    <span class="hljs-comment">// 只写</span><br>    string m_lover;<br>&#125;<br><br><span class="hljs-function"><span class="hljs-type">int</span> <span class="hljs-title">main</span><span class="hljs-params">()</span></span>&#123;<br>	Person p1;<br>    p1.<span class="hljs-built_in">setName</span>(<span class="hljs-string">&quot;张三&quot;</span>);<br>    cout&lt;&lt;<span class="hljs-string">&quot;姓名：&quot;</span>&lt;&lt;p1.<span class="hljs-built_in">getName</span>()&lt;&lt;endl;<br>    <br>	<span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;<br>&#125;<br></code></pre></td></tr></table></figure>









<h3 id="对象的初始化和清理"><a href="#对象的初始化和清理" class="headerlink" title="对象的初始化和清理"></a>对象的初始化和清理</h3><p>C++中的面向对象来源于生活，每个对象也会有初始化设置以及对象销毁前的清理数据的设置</p>
<h4 id="构造函数和析构函数"><a href="#构造函数和析构函数" class="headerlink" title="构造函数和析构函数"></a>构造函数和析构函数</h4><p>对象的<strong>初始化和清理</strong>也是两个非常重要的安全问题</p>
<ul>
<li>一个对象或者变量没有初始状态，对其使用后果是未知的</li>
<li>同样的使用完一个对象或变量，没有及时清理，也会造成一定的安全问题</li>
</ul>
<p>C++利用了<strong>构造函数</strong>和<strong>析构函数</strong>解决上述问题，这两个函数将会被编译器自动调用，完成对象的初始化和清理工作。</p>
<p>对象的初始化和清理工作是编译器强制要我们做的事情，因此如果<strong>我们不提供构造和析构，编译器会提供</strong></p>
<p><strong>编译器提供的构造函数和析构函数是空实现</strong></p>
<ul>
<li><em>构造函数</em>：主要用于创建的对象时为对象的成员属性赋值，构造函数由编译器自动调用，无须手动调用</li>
<li><em>析构函数</em>：主要作用在于对象<strong>销毁前</strong>系统自动调用，执行一些清理工作。</li>
</ul>
<p><strong>构造函数</strong>：</p>
<p>语法：<em>类名(){}</em></p>
<ol>
<li>构造函数，没有返回值也不写void</li>
<li>函数名称与类名相同</li>
<li>构造函数可以有参数，因此可以发生重载</li>
<li>程序在调用对象时候会自动调用构造，无须手动调用，而且只会调用一次</li>
</ol>
<p><strong>析构函数</strong>：</p>
<p>语法：*~类名(){}*</p>
<ol>
<li>析构函数，没有返回值也不写void</li>
<li>函数名称与类名相同，在名称前加上<em>符号~</em></li>
<li>析构函数不可以有参数，因此不可以发生重载</li>
<li>程序在对象销毁前会自动化调用，无须手动调用，而且只会调用一次</li>
</ol>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><code class="hljs c++"><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;iostream&gt;</span></span><br><span class="hljs-keyword">using</span> <span class="hljs-keyword">namespace</span> std;<br><br><span class="hljs-keyword">class</span> <span class="hljs-title class_">Person</span>&#123;<br><span class="hljs-keyword">public</span>:<br>    <span class="hljs-comment">//构造函数进行初始化操作</span><br>    <span class="hljs-built_in">Person</span>()&#123;<br>        cout&lt;&lt;<span class="hljs-string">&quot;Person 构造函数的调用&quot;</span>&lt;&lt;endl;<br>    &#125;<br>    <span class="hljs-comment">//析构函数进行清理的操作</span><br>	~<span class="hljs-built_in">Person</span>()&#123;<br>        cout&lt;&lt;<span class="hljs-string">&quot;Person 析构函数调用&quot;</span>&lt;&lt;endl;<br>    &#125;    <br>&#125;;<br><br><span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">test01</span><span class="hljs-params">()</span></span>&#123;<br>    Person p; <span class="hljs-comment">//创建对象就会自动调用构造函数</span><br>    <span class="hljs-comment">//在栈上的数据，test01执行完毕后，释放这个对象，对象销毁前会执行析构函数的操作</span><br>&#125;<br><br><span class="hljs-function"><span class="hljs-type">int</span> <span class="hljs-title">main</span><span class="hljs-params">()</span></span>&#123;<br>    <span class="hljs-comment">//test01();</span><br>    Person p; <span class="hljs-comment">//main函数内，析构执行代码的操作输出我们看不到</span><br>    <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;<br>&#125;<br></code></pre></td></tr></table></figure>







<h4 id="析构函数的分类及调用"><a href="#析构函数的分类及调用" class="headerlink" title="析构函数的分类及调用"></a>析构函数的分类及调用</h4><p>两种分类方式：</p>
<ul>
<li>按参数分为：有参构造和无参构造</li>
<li>按类型分为：普通构造和拷贝构造</li>
</ul>
<p>三种调用方式：</p>
<ul>
<li>括号法</li>
<li>显示法</li>
<li>隐式转换法</li>
</ul>
<p>注意事项：</p>
<ol>
<li>调用默认构造函数的时候不用加(),加入了括号，编译器会认为	是一个函数的声明，不会认为在创建对象</li>
<li>不要利用拷贝构造函数初始化匿名对象，编译器会认为Person(p3)&#x3D;&#x3D;Person p3; 造成重定义报错</li>
<li></li>
</ol>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br></pre></td><td class="code"><pre><code class="hljs c++"><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;iostream&gt;</span></span><br><span class="hljs-keyword">using</span> <span class="hljs-keyword">namespace</span> std;<br><span class="hljs-comment">//分类</span><br><span class="hljs-keyword">class</span> <span class="hljs-title class_">Person</span>&#123;<br><span class="hljs-keyword">public</span>:<br>    <span class="hljs-comment">//普通构造函数</span><br>    <span class="hljs-comment">//无参构造</span><br>    <span class="hljs-built_in">Person</span>()&#123;<br>        cout&lt;&lt;<span class="hljs-string">&quot;Person的无参构造函数的调用&quot;</span>&lt;&lt;endl;<br>    &#125;<br>    <span class="hljs-comment">//有参构造</span><br>    <span class="hljs-built_in">Person</span>(<span class="hljs-type">int</span> a)&#123;<br>        age=a;<br>        cout&lt;&lt;<span class="hljs-string">&quot;Person的有参构造函数的调用&quot;</span>&lt;&lt;endl;<br>    &#125;<br>    <span class="hljs-comment">//拷贝构造函数</span><br>    <span class="hljs-built_in">Person</span>(<span class="hljs-type">const</span> Person &amp;p)&#123;  <span class="hljs-comment">//将实例化对象传入，将这个对象的属性拷贝到这个函数的实例化对象中</span><br>        age=p.age;<br>    &#125;<br>	~<span class="hljs-built_in">Person</span>()&#123;<br>        cout&lt;&lt;<span class="hljs-string">&quot;Person 析构函数调用&quot;</span>&lt;&lt;endl;<br>    &#125;  <br>    <span class="hljs-type">int</span> age;<br>&#125;;<br><br><span class="hljs-comment">//调用</span><br><span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">test01</span><span class="hljs-params">()</span></span>&#123;<br>    <span class="hljs-comment">//括号法</span><br>    Person p; <span class="hljs-comment">//默认构造函数调用</span><br>    <span class="hljs-function">Person <span class="hljs-title">p2</span><span class="hljs-params">(<span class="hljs-number">10</span>)</span></span>;<span class="hljs-comment">//有参构造函数</span><br>    <span class="hljs-function">Person <span class="hljs-title">p3</span><span class="hljs-params">(p2)</span></span>;<span class="hljs-comment">//拷贝构造函数</span><br>    <br>    <span class="hljs-comment">//显示法</span><br>    Person p1; <span class="hljs-comment">//默认</span><br>    Person p2=<span class="hljs-built_in">Person</span>(<span class="hljs-number">10</span>); <span class="hljs-comment">//调用有参构造函数</span><br>    Person p3=<span class="hljs-built_in">Person</span>(p2);<span class="hljs-comment">//调用拷贝构造函数</span><br>    <span class="hljs-built_in">Person</span>(<span class="hljs-number">10</span>);  <span class="hljs-comment">//匿名对象，特点：当前行执行结束后，系统会立即回收掉匿名对象</span><br>    <br>    <span class="hljs-comment">//隐式转换法</span><br>    Person p4=<span class="hljs-number">10</span>; <span class="hljs-comment">//相当于写了Person p4(10); 有参构造</span><br>    Person p5=p4; <span class="hljs-comment">//拷贝构造函数</span><br>    <br>&#125;<br><br><span class="hljs-function"><span class="hljs-type">int</span> <span class="hljs-title">main</span><span class="hljs-params">()</span></span>&#123;<br>    <span class="hljs-built_in">test01</span>();<br>    <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;<br>&#125;<br></code></pre></td></tr></table></figure>







<h4 id="拷贝构造函数调用时机"><a href="#拷贝构造函数调用时机" class="headerlink" title="拷贝构造函数调用时机"></a>拷贝构造函数调用时机</h4><p>C++中拷贝构造函数调用时机通常有三种情况：</p>
<ul>
<li>使用一个已经创建完毕的对象来初始化一个新对象</li>
<li>值传递的方式给函数参数传值</li>
<li>以值方式返回局部对象</li>
</ul>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br></pre></td><td class="code"><pre><code class="hljs c++"><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;iostream&gt;</span></span><br><span class="hljs-keyword">using</span> <span class="hljs-keyword">namespace</span> std;<br><br><span class="hljs-keyword">class</span> <span class="hljs-title class_">Person</span>&#123;<br><span class="hljs-keyword">public</span>:<br>    <span class="hljs-built_in">Person</span>()&#123;<br>        cout&lt;&lt;<span class="hljs-string">&quot;Person默认构造函数调用&quot;</span>&lt;&lt;endl;<br>    &#125;<br>    <span class="hljs-built_in">Person</span>(<span class="hljs-type">int</span> age)&#123;<br>        cout&lt;&lt;<span class="hljs-string">&quot;Person有参构造函数调用&quot;</span>&lt;&lt;endl;<br>        m_Age=age;<br>    &#125;<br>    <span class="hljs-built_in">Person</span>(<span class="hljs-type">const</span> Person &amp;p)&#123;<br>        cout&lt;&lt;<span class="hljs-string">&quot;Person拷贝构造函数调用&quot;</span>&lt;&lt;endl;<br>        m_Aoge=p.m_Age;<br>    &#125;<br>&#125;;<br><span class="hljs-comment">//使用一个已经创建完毕的对象来初始化一个新对象</span><br><span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">test01</span><span class="hljs-params">()</span></span>&#123;<br>    <span class="hljs-function">Person <span class="hljs-title">p1</span><span class="hljs-params">(<span class="hljs-number">20</span>)</span></span>;<br>    <span class="hljs-function">Person <span class="hljs-title">p2</span><span class="hljs-params">(p1)</span></span>;<br>&#125;<br><br><span class="hljs-comment">//值传递的方式给函数参数传值</span><br><span class="hljs-function"><span class="hljs-type">void</span>  <span class="hljs-title">doWork</span><span class="hljs-params">(Person p)</span></span>&#123;<br>&#125;<br><span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">test02</span><span class="hljs-params">()</span></span>&#123;<br>    Person p;<br>    <span class="hljs-built_in">doWotk</span>(p); <span class="hljs-comment">//值传递时，会拷贝一个副本，所以会执行拷贝构造函数</span><br>&#125;<br><br><span class="hljs-comment">//以值方式返回局部对象</span><br><span class="hljs-function">Person <span class="hljs-title">doWork2</span><span class="hljs-params">()</span></span>&#123;<br>    Person p1;<br>    cout&lt;&lt;(<span class="hljs-type">int</span>*)&amp;p1&lt;&lt;endl;<br>    <span class="hljs-keyword">return</span> p1;    <span class="hljs-comment">//局部对象会拷贝出新对象返回</span><br>&#125;<br><br><span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">test03</span><span class="hljs-params">()</span></span>&#123;<br>    Person p=<span class="hljs-built_in">doWork2</span>();<br>    cout&lt;&lt;(<span class="hljs-type">int</span>*)&amp;p&lt;&lt;endl;<br>&#125;<br><span class="hljs-function"><span class="hljs-type">int</span> <span class="hljs-title">main</span><span class="hljs-params">()</span></span>&#123;<br>	<span class="hljs-built_in">test01</span>();<br>    <span class="hljs-built_in">test02</span>();<br>    <span class="hljs-built_in">test03</span>();<br>    <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;<br>&#125;<br></code></pre></td></tr></table></figure>









<h4 id="构造函数调用规则"><a href="#构造函数调用规则" class="headerlink" title="构造函数调用规则"></a>构造函数调用规则</h4><p>默认情况下，C++编译器至少给一个类添加3个函数</p>
<ol>
<li>默认构造函数(无参，函数体为空)</li>
<li>默认析构函数(无参，函数体为空)</li>
<li>默认拷贝构造函数，对属性进行值拷贝</li>
</ol>
<p>构造函数调用规则如下：</p>
<ul>
<li>如果用户定义有参构造函数，C++不再提供默认无参构造，但是会提供默认拷贝构造</li>
<li>如果用户定义拷贝构造函数，C++不会再提供其他构造函数</li>
</ul>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><code class="hljs c++"><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;iostream&gt;</span></span><br><span class="hljs-keyword">using</span> <span class="hljs-keyword">namespace</span> std;<br><br><span class="hljs-keyword">class</span> <span class="hljs-title class_">Person</span>&#123;<br><span class="hljs-keyword">public</span>:<br>    <span class="hljs-built_in">Person</span>()&#123;<br>        cout&lt;&lt;<span class="hljs-string">&quot;Person默认构造函数调用&quot;</span>&lt;&lt;endl;<br>    &#125;<br>    <span class="hljs-built_in">Person</span>(<span class="hljs-type">int</span> age)&#123;<br>        cout&lt;&lt;<span class="hljs-string">&quot;Person有参构造函数调用&quot;</span>&lt;&lt;endl;<br>        m_Age=age;<br>    &#125;<br>    <span class="hljs-built_in">Person</span>(<span class="hljs-type">const</span> Person &amp;p)&#123;<br>        cout&lt;&lt;<span class="hljs-string">&quot;Person拷贝构造函数调用&quot;</span>&lt;&lt;endl;<br>        m_Age=p.m_Age;<br>    &#125;<br>    ~<span class="hljs-built_in">Person</span>()&#123;<br>        cout&lt;&lt;<span class="hljs-string">&quot;Person析构函数调用&quot;</span>&lt;&lt;endl;<br>    &#125;<br>    <span class="hljs-type">int</span> m_Age;<br>&#125;;<br><br><span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">test01</span><span class="hljs-params">()</span></span>&#123;<br>	Person p;<br>    p.m_Age=<span class="hljs-number">18</span>;<br>    <span class="hljs-function">Person <span class="hljs-title">p2</span><span class="hljs-params">(p)</span></span>;<br>    cout&lt;&lt;<span class="hljs-string">&quot;p2的年龄为：&quot;</span>&lt;&lt;p2.m_Age&lt;&lt;endl;<br>&#125;<br><br><span class="hljs-function"><span class="hljs-type">int</span> <span class="hljs-title">main</span><span class="hljs-params">()</span></span>&#123;<br>    <br>    <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;<br>&#125;<br></code></pre></td></tr></table></figure>







<h4 id="深拷贝与浅拷贝"><a href="#深拷贝与浅拷贝" class="headerlink" title="深拷贝与浅拷贝"></a>深拷贝与浅拷贝</h4><p>深浅拷贝是面试的经典问题，也是一个常见的坑</p>
<p><strong>浅拷贝</strong>：简单的赋值拷贝操作</p>
<p><strong>深拷贝</strong>：在堆区重新申请空间，进行拷贝操作</p>
<p><em>浅拷贝带来的问题就是堆区的内存重复释放</em></p>
<p><em>浅拷贝的问题要利用深拷贝进行解决，自己写一个拷贝函数</em></p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br></pre></td><td class="code"><pre><code class="hljs c++"><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;iostream&gt;</span></span><br><span class="hljs-keyword">using</span> <span class="hljs-keyword">namespace</span> std;<br><br><span class="hljs-keyword">class</span> <span class="hljs-title class_">Person</span>&#123;<br><span class="hljs-keyword">public</span>:<br>    <span class="hljs-built_in">Person</span>()&#123;<br>        cout&lt;&lt;<span class="hljs-string">&quot;Person的默认构造函数调用&quot;</span>&lt;&lt;endl;<br>    &#125;<br>	<span class="hljs-built_in">Person</span>(<span class="hljs-type">int</span> age,<span class="hljs-type">int</span> height)&#123;<br>        m_Age=age;<br>        m_Height=<span class="hljs-keyword">new</span> <span class="hljs-built_in">int</span>(height); <span class="hljs-comment">//需要程序员手动销毁</span><br>        cout&lt;&lt;<span class="hljs-string">&quot;Person有参构造函数调用&quot;</span>&lt;&lt;endl;<br>    &#125;<br>    <span class="hljs-comment">//自己实现拷贝函数来解决浅拷贝带来的问题</span><br>    <span class="hljs-built_in">Person</span>(<span class="hljs-type">const</span> Person &amp;p)&#123;<br>        cout&lt;&lt;<span class="hljs-string">&quot;拷贝构造函数的调用&quot;</span>&lt;&lt;endl;<br>        m_Age=p.m_Age;<br>        <span class="hljs-comment">//m_Height=p.m_Height; 编译器默认实现</span><br>        <span class="hljs-comment">//深拷贝操作</span><br>        m_Height=<span class="hljs-keyword">new</span> <span class="hljs-built_in">int</span>(*p.m_Height);<br>    &#125;<br>    ~<span class="hljs-built_in">Person</span>()&#123;<br>        <span class="hljs-comment">//析构代码，将堆区开辟数据做释放操作</span><br>        <span class="hljs-keyword">if</span>(m_Height!=<span class="hljs-literal">NULL</span>)&#123;<br>            <span class="hljs-keyword">delete</span> m_Height;<br>            m_Height=<span class="hljs-literal">NULL</span>;<br>        &#125;<br>        cout&lt;&lt;<span class="hljs-string">&quot;Person析构函数调用&quot;</span>&lt;&lt;endl;<br>    &#125;<br>    <span class="hljs-type">int</span> m_Age;<br>    <span class="hljs-type">int</span> *m_Height<br>&#125;;<br><br><span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">test01</span><span class="hljs-params">()</span></span>&#123;<br>    <span class="hljs-function">Person <span class="hljs-title">p1</span><span class="hljs-params">(<span class="hljs-number">18</span>,<span class="hljs-number">160</span>)</span></span>;<br>    cout&lt;&lt;<span class="hljs-string">&quot;p1的年龄为: &quot;</span>&lt;&lt;p1.m_Age&lt;&lt;<span class="hljs-string">&quot;p1的身高为：&quot;</span>&lt;&lt;*p1.m_Height&lt;&lt;endl;<br>    <span class="hljs-function">Person <span class="hljs-title">p2</span><span class="hljs-params">(p1)</span></span>;  <span class="hljs-comment">//编译器给的拷贝是浅拷贝操作</span><br>    cout&lt;&lt;<span class="hljs-string">&quot;p2的年龄为：&quot;</span>&lt;&lt;p2.m_Age&lt;&lt;<span class="hljs-string">&quot;p2的身高为：&quot;</span>&lt;&lt;*p2.m_Height&lt;&lt;endl;<br>&#125;<br><br><span class="hljs-function"><span class="hljs-type">int</span> <span class="hljs-title">main</span><span class="hljs-params">()</span></span>&#123;<br>    <span class="hljs-built_in">test01</span>();<br>    <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;<br>&#125;<br></code></pre></td></tr></table></figure>



<blockquote>
<p><strong>总结</strong>：如果属性有在堆区开辟的，一定要自己提供拷贝构造函数，防止浅拷贝带来的问题</p>
</blockquote>
<h4 id="初始化列表"><a href="#初始化列表" class="headerlink" title="初始化列表"></a>初始化列表</h4><p><strong>作用</strong>：</p>
<p>C++提供了初始化列表语法，用来初始化属性</p>
<p><strong>语法</strong>：<em>构造函数():属性1(值1),属性2(值2) …{}</em></p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><code class="hljs c++"><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;iostream&gt;</span></span><br><span class="hljs-keyword">using</span> <span class="hljs-keyword">namespace</span> std;<br><br><span class="hljs-keyword">class</span> <span class="hljs-title class_">Person</span>&#123;<br><span class="hljs-keyword">public</span>:<br>    <span class="hljs-comment">//传统初始化操作</span><br>    <span class="hljs-comment">//Person(int a,int b,int c)&#123;</span><br>        <span class="hljs-comment">//m_A=a;</span><br>        <span class="hljs-comment">//m_B=b;</span><br>        <span class="hljs-comment">//m_C=c;</span><br>    <span class="hljs-comment">//&#125;</span><br>    <span class="hljs-comment">//初始化列表初始化属性</span><br>    <span class="hljs-built_in">Person</span>(<span class="hljs-type">int</span> a,<span class="hljs-type">int</span> b,<span class="hljs-type">int</span> c):<span class="hljs-built_in">m_A</span>(a),<span class="hljs-built_in">m_B</span>(b),<span class="hljs-built_in">m_C</span>(c)&#123;<br>        <br>    &#125;<br>    <span class="hljs-type">int</span> m_A;<br>    <span class="hljs-type">int</span> m_B;<br>    <span class="hljs-type">int</span> m_C;<br>&#125;<br><br><span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">test01</span><span class="hljs-params">()</span></span>&#123;<br>    <span class="hljs-function">Person <span class="hljs-title">p</span><span class="hljs-params">(<span class="hljs-number">10</span>,<span class="hljs-number">20</span>,<span class="hljs-number">30</span>)</span></span>; <span class="hljs-comment">//传统给属性赋初值方法</span><br>    <span class="hljs-function">Person <span class="hljs-title">p1</span><span class="hljs-params">(<span class="hljs-number">30</span>,<span class="hljs-number">20</span>,<span class="hljs-number">10</span>)</span></span>;  <span class="hljs-comment">//初始化列表赋初值方法</span><br>&#125;<br><br><span class="hljs-function"><span class="hljs-type">int</span> <span class="hljs-title">main</span><span class="hljs-params">()</span></span>&#123;<br>    <br>    <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;<br>&#125;<br></code></pre></td></tr></table></figure>





<h4 id="类对象作为类成员"><a href="#类对象作为类成员" class="headerlink" title="类对象作为类成员"></a>类对象作为类成员</h4><p>C++类中的成员可以是另一个类的对象，我们称该成员为<em>对象成员</em></p>
<p>例如：</p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs c++"><span class="hljs-keyword">class</span> <span class="hljs-title class_">A</span>&#123;&#125;;<br><span class="hljs-keyword">class</span> <span class="hljs-title class_">B</span>&#123;<br>    A a;<br>&#125;;<br></code></pre></td></tr></table></figure>



<p>B类中有对象作为一个成员，A为对象成员</p>
<p>那么创建B对象时，A与B的构造和析构的顺序是谁先谁后？</p>
<p><em>先构造A对象再构造B对象</em></p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><code class="hljs c++"><span class="hljs-keyword">class</span> <span class="hljs-title class_">Phone</span>&#123;<br><span class="hljs-keyword">public</span>:<br>    <br>    <span class="hljs-built_in">Phone</span>(string PName)&#123;<br>        m_PName=PName;<br>        cout&lt;&lt;<span class="hljs-string">&quot;Phone的构造函数调用&quot;</span>&lt;&lt;endl;<br>    &#125;<br>    ~<span class="hljs-built_in">Phone</span>()&#123;<br>        cout&lt;&lt;<span class="hljs-string">&quot;Phone的析构函数调用&quot;</span>&lt;&lt;endl;<br>    &#125;<br>    <span class="hljs-comment">//手机品牌名称</span><br>    string m_PName;<br>    <br>&#125;;<br><br><br><span class="hljs-keyword">class</span> <span class="hljs-title class_">Person</span>&#123;<br><span class="hljs-keyword">public</span>:<br>    <span class="hljs-built_in">Person</span>(string name,string pName):<span class="hljs-built_in">m_Name</span>(name),<span class="hljs-built_in">m_Phone</span>(pName)&#123;<br>        cout&lt;&lt;<span class="hljs-string">&quot;Person构造函数调用&quot;</span>&lt;&lt;endl;<br>    &#125;<br>    ~<span class="hljs-built_in">Person</span>()&#123;<br>        cout&lt;&lt;<span class="hljs-string">&quot;Person析构函数调用&quot;</span>&lt;&lt;endl;<br>    &#125;<br>    <span class="hljs-comment">//姓名</span><br>    string m_Name;<br>    <span class="hljs-comment">//手机</span><br>    Phone m_Phone; <br>&#125;;<br><br><span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">test01</span><span class="hljs-params">()</span></span>&#123;<br>    <span class="hljs-function">Person <span class="hljs-title">p</span><span class="hljs-params">(<span class="hljs-string">&quot;张三&quot;</span>,<span class="hljs-string">&quot;苹果MAX&quot;</span>)</span></span>;<br>&#125;<br></code></pre></td></tr></table></figure>

<blockquote>
<p><strong>总结</strong>：当其他类对象作为本类成员，我们称该成员为<em>对象成员</em>，构造顺序是：先调用对象成员的构造，再调用本类构造，析构顺序与构造相反。</p>
</blockquote>
<h4 id="静态成员"><a href="#静态成员" class="headerlink" title="静态成员"></a>静态成员</h4><p>静态成员就是在成员变量和成员函数前加上关键词static，称为<em>静态成员</em></p>
<p>静态成员分为：</p>
<ul>
<li><strong>静态成员变量</strong><ul>
<li>所有对象共享同一份数据</li>
<li>在编译阶段分配内存</li>
<li>类内声明，类外初始化(必须的操作)</li>
</ul>
</li>
<li><strong>静态成员函数</strong><ul>
<li>所有成员共享同一个函数</li>
<li>静态成员函数只能访问静态成员变量</li>
</ul>
</li>
</ul>
<p>静态成员变量：</p>
<p><strong>注意事项</strong>：静态成员变量也是有访问权限的</p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><code class="hljs c++"><span class="hljs-comment">//静态成员变量</span><br><span class="hljs-keyword">class</span> <span class="hljs-title class_">Person</span>&#123;<br><span class="hljs-keyword">public</span>:<br>    <span class="hljs-comment">//所有对象都共享同一份数据</span><br>    <span class="hljs-type">static</span> <span class="hljs-type">int</span> m_A;<br>&#125;;<br><br><span class="hljs-type">int</span> Person::m_A=<span class="hljs-number">100</span>; <span class="hljs-comment">//类外初始化</span><br><br><span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">test01</span><span class="hljs-params">()</span></span>&#123;<br>    Person p;<br>    cout&lt;&lt;p.m_A&lt;&lt;endl;<br>    Person p2;<br>    p2.m_A=<span class="hljs-number">200</span>;<br>    cout&lt;&lt;p.m_A&lt;&lt;endl;  <span class="hljs-comment">//所有对象共享同一份数据,会输出200</span><br>&#125;<br><br><span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">test02</span><span class="hljs-params">()</span></span>&#123;<br>    <span class="hljs-comment">//静态成员变量不属于某个对象上，所有对象都共享同一分数据</span><br>    <span class="hljs-comment">//1.通过对象进行访问</span><br>    Person p;<br>    cout&lt;&lt;p.m_A&lt;&lt;endl;<br>    <span class="hljs-comment">//2.通过类名进行访问</span><br>    cout&lt;&lt;Person::m_A&lt;&lt;endl;<br>&#125;<br></code></pre></td></tr></table></figure>



<p>静态成员函数：</p>
<p><strong>注意事项</strong>：静态成员函数也是有访问权限的</p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><code class="hljs c++"><span class="hljs-comment">//静态成员函数</span><br><span class="hljs-keyword">class</span> <span class="hljs-title class_">Person</span>&#123;<br><span class="hljs-keyword">public</span>:<br>    <span class="hljs-comment">//静态成员函数</span><br>    <span class="hljs-function"><span class="hljs-type">static</span> <span class="hljs-type">void</span> <span class="hljs-title">func</span><span class="hljs-params">()</span></span>&#123;<br>        m_A=<span class="hljs-number">100</span>;<span class="hljs-comment">//静态成员函数可以访问静态成员变量</span><br>        m_B=<span class="hljs-number">200</span>;<span class="hljs-comment">//静态成员函数不可以访问非静态成员变量,无法区分是哪个对象的属性</span><br>        cout&lt;&lt;<span class="hljs-string">&quot;static void func函数的调用&quot;</span>&lt;&lt;endl;<br>    &#125;<br>    <br>    <span class="hljs-type">static</span> <span class="hljs-type">int</span> m_A;<br>    <span class="hljs-type">int</span> m_B;<span class="hljs-comment">//非静态成员变量</span><br>&#125;;<br><br><span class="hljs-type">int</span> Person::m_A=<span class="hljs-number">0</span>;<br><br><span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">test01</span><span class="hljs-params">()</span></span>&#123;<br>    <span class="hljs-comment">//通过对象访问</span><br>    Person p;<br>    p.<span class="hljs-built_in">func</span>();<br>    <span class="hljs-comment">//通过类名访问</span><br>    Person::<span class="hljs-built_in">func</span>();<br>&#125;<br></code></pre></td></tr></table></figure>







<h3 id="C-对象模型和this指针"><a href="#C-对象模型和this指针" class="headerlink" title="C++对象模型和this指针"></a>C++对象模型和this指针</h3><h4 id="成员变量和成员函数分开存储"><a href="#成员变量和成员函数分开存储" class="headerlink" title="成员变量和成员函数分开存储"></a>成员变量和成员函数分开存储</h4><p>在C++中，类内的成员变量和成员函数分开存储</p>
<p>只有非静态成员变量才属于类的对象上</p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><code class="hljs c++"><span class="hljs-keyword">class</span> <span class="hljs-title class_">Person</span>&#123;<br><span class="hljs-keyword">public</span>:<br>    <span class="hljs-type">int</span> m_A; <span class="hljs-comment">//非静态成员变量属于类的对象上的</span><br>    <span class="hljs-type">static</span> <span class="hljs-type">int</span> m_B; <span class="hljs-comment">//静态成员变量不属于类的对象上</span><br>    <span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">func</span><span class="hljs-params">()</span></span>&#123;&#125;<span class="hljs-comment">//非静态成员函数不属于类的对象上的</span><br>    <span class="hljs-function"><span class="hljs-type">static</span> <span class="hljs-type">void</span> <span class="hljs-title">func2</span><span class="hljs-params">()</span></span>&#123;&#125;<span class="hljs-comment">//静态成员函数不属于类的对象上的</span><br>&#125;;<br><br><span class="hljs-type">int</span> Person::m_B=<span class="hljs-number">0</span>;<br><br><span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">test01</span><span class="hljs-params">()</span></span>&#123;<br>    Person p;<br>    <span class="hljs-comment">//空对象占用空间为：1</span><br>    <span class="hljs-comment">//C++编译器会给每个空对象也分配一个字节空间，是为了区分空对象占内存的位置</span><br>    <span class="hljs-comment">//每个空对象也应该有一个独一无二的内存地址</span><br>    cout&lt;&lt;<span class="hljs-string">&quot;size of p= &quot;</span>&lt;&lt;<span class="hljs-built_in">sizeof</span>(p)&lt;&lt;endl;<br>&#125;<br><br><span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">test02</span><span class="hljs-params">()</span></span>&#123;<br>    Person p;<br>    <span class="hljs-comment">//非空对象占用空间为：根据类对象非静态成员变量的字节数计算</span><br>    cout&lt;&lt;<span class="hljs-string">&quot;size of p= &quot;</span>&lt;&lt;<span class="hljs-built_in">sizeof</span>(p)&lt;&lt;endl;<br>&#125;<br></code></pre></td></tr></table></figure>







<h4 id="this指针"><a href="#this指针" class="headerlink" title="this指针"></a>this指针</h4><p>通过上一个章节我们知道在C++中成员变量和成员函数是分开存储的</p>
<p>每一个非静态成员函数只会诞生一份函数实例，也就是说多个同类型的对象会共用一块代码</p>
<p><strong>概念</strong>：</p>
<p>C++通过提供特殊的对象指针—-this指针，来进行区分哪个对象调用哪一块代码,<strong>this指针指向被调用的成员函数所属的对象</strong></p>
<p><em>this指针是隐含每一个非静态成员函数内的一种指针</em></p>
<p><em>this指针不需要定义，直接使用即可</em></p>
<p><strong>this指针的用途</strong>：</p>
<ul>
<li><strong>解决名称冲突</strong>：当形参和成员变量同名时，可用this指针来区分</li>
<li><strong>返回对象本身：</strong>在类的非静态成员函数中返回对象本身，可使用*return <em>this</em></li>
</ul>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><code class="hljs c++"><span class="hljs-keyword">class</span> <span class="hljs-title class_">Person</span>&#123;<br><span class="hljs-keyword">public</span>:<br>    <span class="hljs-built_in">Person</span>(<span class="hljs-type">int</span> age)&#123;<br>        <span class="hljs-comment">//this指针指向被调用的成员函数所属的对象</span><br>        <span class="hljs-keyword">this</span>-&gt;age=age;<br>    &#125;<br>    <span class="hljs-function">Person&amp; <span class="hljs-title">PersonAddAge</span><span class="hljs-params">(Person &amp;p)</span></span>&#123; <span class="hljs-comment">//如果返回是值的类型会发生拷贝函数，最后无法对对象属性进行修改，所以得用引用的方式返回</span><br>        <span class="hljs-keyword">this</span>-&gt;age+=p.age;<br>        <span class="hljs-keyword">return</span> *<span class="hljs-keyword">this</span>; <span class="hljs-comment">//返回执行完函数代码的对象本身</span><br>    &#125;<br>    <span class="hljs-type">int</span> age;<br>&#125;;<br><br><span class="hljs-comment">//解决名称冲突</span><br><span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">test01</span><span class="hljs-params">()</span></span>&#123;<br>    <span class="hljs-function">Person <span class="hljs-title">p1</span><span class="hljs-params">(<span class="hljs-number">18</span>)</span></span>;<br>    cout&lt;&lt;<span class="hljs-string">&quot;p1的年龄为：&quot;</span>&lt;&lt;p1.age&lt;&lt;endl;<br>&#125;<br><br><span class="hljs-comment">//返回对象本身</span><br><span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">test02</span><span class="hljs-params">()</span></span>&#123;<br>    <span class="hljs-function">Person <span class="hljs-title">p1</span><span class="hljs-params">(<span class="hljs-number">10</span>)</span></span>;<br>    <span class="hljs-function">Person <span class="hljs-title">p2</span><span class="hljs-params">(<span class="hljs-number">10</span>)</span></span>;<br>    p2.<span class="hljs-built_in">PersonAddAge</span>(p1).<span class="hljs-built_in">PersonAddAge</span>(p1).<span class="hljs-built_in">PersonAddAge</span>(p1);<span class="hljs-comment">//多次调用，可以函数返回对象本身然后就可以继续调用</span><br>    cout&lt;&lt;<span class="hljs-string">&quot;p2的年龄为：&quot;</span>&lt;&lt;p2.age&lt;&lt;endl;<br>&#125;<br></code></pre></td></tr></table></figure>







<h4 id="空指针访问成员函数"><a href="#空指针访问成员函数" class="headerlink" title="空指针访问成员函数"></a>空指针访问成员函数</h4><p>C++中空指针也是可以调用成员函数的，但是也要注意有没有用到this指针</p>
<p>如果用到this指针，需要加以判断保证代码的健壮性</p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><code class="hljs c++"><span class="hljs-keyword">class</span> <span class="hljs-title class_">Person</span>&#123;<br><span class="hljs-keyword">public</span>:<br>    <span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">showClassName</span><span class="hljs-params">()</span></span>&#123;<br>        cout&lt;&lt;<span class="hljs-string">&quot;this is Person class&quot;</span>&lt;&lt;endl;<br>    &#125;<br>    <span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">showPersonAge</span><span class="hljs-params">()</span></span>&#123;<br>        <span class="hljs-keyword">if</span>(<span class="hljs-keyword">this</span>==<span class="hljs-literal">NULL</span>)&#123;<br>            <span class="hljs-keyword">return</span>;<br>        &#125;<br>        cout&lt;&lt;<span class="hljs-string">&quot;age = &quot;</span>&lt;&lt;m_Age&lt;&lt;endl;<br>    &#125;<br>    <span class="hljs-type">int</span> m_Age;<br>&#125;;<br><br><span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">test01</span><span class="hljs-params">()</span></span>&#123;<br>    Person *p=<span class="hljs-literal">NULL</span>;<br>    p-&gt;<span class="hljs-built_in">showClassName</span>();<br>    p-&gt;<span class="hljs-built_in">showPersonAge</span>();<span class="hljs-comment">//报错，传入的指针是空指针，无法访问类的属性</span><br>&#125;<br></code></pre></td></tr></table></figure>







<h4 id="const修饰成员函数"><a href="#const修饰成员函数" class="headerlink" title="const修饰成员函数"></a>const修饰成员函数</h4><p><strong>常函数</strong>：</p>
<ul>
<li><strong>成员函数后</strong>加入const后我们称这个函数为<em>常函数</em></li>
<li>常函数内不可以修改成员属性</li>
<li><em>成员属性声明时加关键词<strong>mutable</strong>时，在常函数和常对象中依然可以修改</em></li>
</ul>
<p><strong>常对象</strong>：</p>
<ul>
<li>声明对象前加const后称该对象为<em>常对象</em></li>
<li>常对象只能调用常函数</li>
</ul>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><code class="hljs c++"><span class="hljs-keyword">class</span> <span class="hljs-title class_">Person</span>&#123;<br><span class="hljs-keyword">public</span>:<br>    <span class="hljs-comment">//this指针的本质是指针常量，指针的指向是不可以修改的</span><br>    <span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">showPerson</span><span class="hljs-params">()</span> <span class="hljs-type">const</span></span>&#123;  <span class="hljs-comment">//常函数</span><br>        <span class="hljs-keyword">this</span>-&gt;m_B=<span class="hljs-number">100</span>;<br>       <span class="hljs-comment">//this-&gt;m_A=100;</span><br>       <span class="hljs-comment">//this=NULL; this指针不可以修改指针的指向的</span><br>    &#125;<br>    <span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">func</span><span class="hljs-params">()</span></span>&#123;<br>        m_A=<span class="hljs-number">100</span>;<br>    &#125;<br>    <span class="hljs-type">int</span> m_A;<br>    <span class="hljs-keyword">mutable</span> <span class="hljs-type">int</span> m_B;<span class="hljs-comment">//特殊变量，即使在常函数中，也可以修改这个值</span><br>&#125;;<br><br><span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">test01</span><span class="hljs-params">()</span></span>&#123;<br>    Person p;<br>    p.<span class="hljs-built_in">showPerson</span>();<br>&#125;<br><span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">test02</span><span class="hljs-params">()</span></span>&#123;<br>    <span class="hljs-comment">//常对象</span><br>    <span class="hljs-type">const</span> Person p;<span class="hljs-comment">//在对象前加const，变为常对象</span><br>    p.m_A=<span class="hljs-number">100</span>;<span class="hljs-comment">//报错</span><br>    p.m_B=<span class="hljs-number">100</span>;<span class="hljs-comment">//mutable的变量在常对象下也可以调用</span><br>    <span class="hljs-comment">//常对象只能调用常函数</span><br>    p.<span class="hljs-built_in">showPerson</span>();<br>    p.<span class="hljs-built_in">func</span>();<span class="hljs-comment">//报错，常对象不可以调用普通成员函数</span><br>&#125;<br></code></pre></td></tr></table></figure>







<h3 id="友元"><a href="#友元" class="headerlink" title="友元"></a>友元</h3><p>在程序里，有些私有属性也想让类外特殊的一些函数或者类进行访问，就需要用到友元的技术</p>
<p>友元的目的就是让一个函数或者类访问另一个类中私有成员</p>
<p>友元的关键词为 <strong>friend</strong></p>
<p>友元的三种实现：</p>
<ul>
<li>全局函数做友元</li>
<li>类做友元</li>
<li>成员函数做友元</li>
</ul>
<h4 id="全局函数做友元"><a href="#全局函数做友元" class="headerlink" title="全局函数做友元"></a>全局函数做友元</h4><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><code class="hljs c++"><span class="hljs-keyword">class</span> <span class="hljs-title class_">Building</span>&#123;<br>    <span class="hljs-comment">//test01全局函数可以访问Building的私有成员</span><br>    <span class="hljs-function"><span class="hljs-keyword">friend</span> <span class="hljs-type">void</span> <span class="hljs-title">test01</span><span class="hljs-params">(Building *building)</span></span>;<br><span class="hljs-keyword">public</span>:<br>    <span class="hljs-built_in">Building</span>()&#123;<br>        m_SittingRoom=<span class="hljs-string">&quot;客厅&quot;</span>;<br>        m_BedRoom=<span class="hljs-string">&quot;卧室&quot;</span>;<br>    &#125;<br>    string m_SittingRoom;<br><span class="hljs-keyword">private</span>:<br>    string m_BedRoom;<br>&#125;;<br><br><span class="hljs-comment">//全局函数</span><br><span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">test01</span><span class="hljs-params">(Building *building)</span></span>&#123;<br>    cout&lt;&lt;<span class="hljs-string">&quot;全局函数正在访问：&quot;</span>&lt;&lt;building-&gt;m_SittingRoom&lt;&lt;endl;<br>    cout&lt;&lt;<span class="hljs-string">&quot;全局函数正在访问：&quot;</span>&lt;&lt;building-&gt;m_BedRoom&lt;&lt;endl; <span class="hljs-comment">//私有属性</span><br>&#125;<br><br><span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">test02</span><span class="hljs-params">()</span></span>&#123;<br>    Building building;<br>    <span class="hljs-built_in">test01</span>(&amp;building);<br>&#125;<br></code></pre></td></tr></table></figure>





<h4 id="类做友元"><a href="#类做友元" class="headerlink" title="类做友元"></a>类做友元</h4><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br></pre></td><td class="code"><pre><code class="hljs c++"><span class="hljs-keyword">class</span> <span class="hljs-title class_">Building</span>;<br><span class="hljs-keyword">class</span> <span class="hljs-title class_">gy</span>&#123;<br><span class="hljs-keyword">public</span>:<br>    <span class="hljs-built_in">gy</span>();<br>    <span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">visit</span><span class="hljs-params">()</span></span>;<span class="hljs-comment">//参观函数访问Building中的属性</span><br>    Building *building;<br>&#125;;<br><br><span class="hljs-keyword">class</span> <span class="hljs-title class_">Building</span>&#123;<br>    <span class="hljs-keyword">friend</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">gy</span>; <span class="hljs-comment">//可以访问Building的私有成员</span><br><span class="hljs-keyword">public</span>:<br>    <span class="hljs-built_in">Building</span>();<br>    string m_SittingRoom;<br><span class="hljs-keyword">private</span>:<br>    string m_BedRoom;<br>&#125;;<br><br><span class="hljs-comment">//类外写成员函数</span><br>Building::<span class="hljs-built_in">Building</span>()&#123;<br>    m_SttingRoom=<span class="hljs-string">&quot;客厅&quot;</span>;<br>    m_BedRoom=<span class="hljs-string">&quot;卧室&quot;</span>;<br>&#125;<br><br>gy::<span class="hljs-built_in">gy</span>()&#123;<br>    building=<span class="hljs-keyword">new</span> Building;<br>&#125;<br><br><span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">gy::visit</span><span class="hljs-params">()</span></span>&#123;<br>    cout&lt;&lt;<span class="hljs-string">&quot;gy类正在访问：&quot;</span>&lt;&lt;building-&gt;m_SttingRoom&lt;&lt;endl;<br>    cout&lt;&lt;<span class="hljs-string">&quot;gy类正在访问：&quot;</span>&lt;&lt;building-&gt;m_BedRoom&lt;&lt;endl;<br>&#125;<br><br><span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">test01</span><span class="hljs-params">()</span></span>&#123;<br>    gy gg;<br>    gg.<span class="hljs-built_in">visit</span>();<br>&#125;<br></code></pre></td></tr></table></figure>







<h4 id="成员函数做友元"><a href="#成员函数做友元" class="headerlink" title="成员函数做友元"></a>成员函数做友元</h4><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br></pre></td><td class="code"><pre><code class="hljs c++"><span class="hljs-keyword">class</span> <span class="hljs-title class_">Building</span>;<br><span class="hljs-keyword">class</span> <span class="hljs-title class_">gy</span>&#123;<br><span class="hljs-keyword">public</span>:<br>    <span class="hljs-built_in">gy</span>();<br>    <span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">visit</span><span class="hljs-params">()</span></span>;<span class="hljs-comment">//让visit函数可以访问building中私有成员</span><br>    <span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">visit1</span><span class="hljs-params">()</span></span>;<span class="hljs-comment">//让其不可以访问Building中的私有成员</span><br>    Building *building;<br>&#125;;<br><br><span class="hljs-keyword">class</span> <span class="hljs-title class_">Building</span>&#123;<br>    <span class="hljs-comment">//gy类下的visit函数可以访问building的私有属性</span><br>    <span class="hljs-function"><span class="hljs-keyword">friend</span> <span class="hljs-type">void</span> <span class="hljs-title">gy::visit</span><span class="hljs-params">()</span></span>;<br><span class="hljs-keyword">public</span>:<br>    <span class="hljs-built_in">Building</span>();<br>	string m_SttingRoom;<br><span class="hljs-keyword">private</span>:<br>    string m_BedRoom;<br>&#125;;<br><br>Building::<span class="hljs-built_in">Building</span>()&#123;<br>    m_SttingRoom=<span class="hljs-string">&quot;客厅&quot;</span>;<br>    m_BedRoom=<span class="hljs-string">&quot;卧室&quot;</span>;<br>&#125;<br><br>gy::<span class="hljs-built_in">gy</span>()&#123;<br>    building=<span class="hljs-keyword">new</span> Building;<br>&#125;<br><br><span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">gy::visit</span><span class="hljs-params">()</span></span>&#123;<br>    cout&lt;&lt;<span class="hljs-string">&quot;visit函数正在访问：&quot;</span>&lt;&lt;building-&gt;m_SttingRoom&lt;&lt;endl;<br>    cout&lt;&lt;<span class="hljs-string">&quot;visit函数正在访问：&quot;</span>&lt;&lt;building-&gt;m_BedRoom&lt;&lt;endl;<br>&#125;<br><br><span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">gy::visit1</span><span class="hljs-params">()</span></span>&#123;<br>    cout&lt;&lt;<span class="hljs-string">&quot;visit1函数正在访问：&quot;</span>&lt;&lt;building-&gt;m_SttingRoom&lt;&lt;endl;<br>    cout&lt;&lt;<span class="hljs-string">&quot;visit函数正在访问：&quot;</span>&lt;&lt;building-&gt;m_BedRoom&lt;&lt;endl;<span class="hljs-comment">//不可以访问</span><br>&#125;<br><br><span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">test01</span><span class="hljs-params">()</span></span>&#123;<br>    gy gg;<br>    gg.<span class="hljs-built_in">visit</span>();<br>    gg.<span class="hljs-built_in">visit1</span>();<br>&#125;<br></code></pre></td></tr></table></figure>









<h3 id="运算符重载"><a href="#运算符重载" class="headerlink" title="运算符重载"></a>运算符重载</h3><p><strong>运算符重载概念</strong>：<em>对已有的运算符重新定义，赋予其另一种功能，以适应不同的数据类型</em></p>
<p><strong>注意事项</strong>：运算符重载也可以发生函数重载</p>
<p>用<strong>operator运算符</strong>作为运算符的重载的运算符标记</p>
<h4 id="加号运算符重载"><a href="#加号运算符重载" class="headerlink" title="加号运算符重载"></a>加号运算符重载</h4><p><strong>作用</strong>：实现两个自定义数据类型相加的运算</p>
<p>重载实现方法：</p>
<ul>
<li>通过成员函数重载+号</li>
<li>通过全局函数重载+号</li>
</ul>
<p>用**operator+**作为加号运算符的重载的运算符标记</p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br></pre></td><td class="code"><pre><code class="hljs c++"><span class="hljs-keyword">class</span> <span class="hljs-title class_">Person</span>&#123;<br><span class="hljs-keyword">public</span>:<br>    <span class="hljs-comment">//成员函数重载+号</span><br>    Person <span class="hljs-keyword">operator</span>+(Person &amp;p)&#123;<br>        Person temp;<br>        temp.m_A=<span class="hljs-keyword">this</span>-&gt;m_A+p.m_A;<br>        temp.m_B=<span class="hljs-keyword">this</span>-&gt;m_B+p.m_B;<br>        <span class="hljs-keyword">return</span> temp;<br>    &#125;;<br>    <span class="hljs-type">int</span> m_A;<br>    <span class="hljs-type">int</span> m_B;<br>&#125;;<br><span class="hljs-comment">//全局函数重载+号</span><br>Person <span class="hljs-keyword">operator</span>+(Person &amp;p1,Person &amp;p2)&#123;<br>    Person temp;<br>    temp.m_A=p1.m_A+p2.m_A;<br>    temp.m_B=p1.m_B+p2.m_B;<br>    <span class="hljs-keyword">return</span> temp;<br>&#125;<br><br><span class="hljs-comment">//函数重载版本</span><br>Person <span class="hljs-keyword">operator</span>+(Person &amp;p1,<span class="hljs-type">int</span> num)&#123;<br>    Person temp;<br>    temp.m_A=p1.m_A+num;<br>    temp.m_B=p1.m_B+num;<br>    <span class="hljs-keyword">return</span> temp;<br>&#125;<br><br><span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">test01</span><span class="hljs-params">()</span></span>&#123;<br>    Person p1;<br>    p1.m_A=<span class="hljs-number">10</span>;<br>    p1.m_B=<span class="hljs-number">10</span>;<br>    Person p2;<br>    p2.m_A=<span class="hljs-number">10</span>;<br>    p2.m_B=<span class="hljs-number">10</span>;<br>    <span class="hljs-comment">//本质调用</span><br>    Person p3=p1.<span class="hljs-keyword">operator</span>+(p2);<br>    <span class="hljs-comment">//简化调用</span><br>    Person p3=p1+p2;<br>    <span class="hljs-comment">//运算符重载也可以发生函数重载</span><br>    Person p4=p1+<span class="hljs-number">10</span>;<br>    cout&lt;&lt;<span class="hljs-string">&quot;p3.m_A= &quot;</span>&lt;&lt;p3.m_A&lt;&lt;endl;<br>    cout&lt;&lt;<span class="hljs-string">&quot;p3.m_B= &quot;</span>&lt;&lt;p3.m_B&lt;&lt;endl;<br>&#125;<br></code></pre></td></tr></table></figure>

<blockquote>
<p><strong>总结</strong>：</p>
<ul>
<li>对于内置的数据类型的表达式的运算符是不可能改变的</li>
<li>不要滥用运算符重载</li>
</ul>
</blockquote>
<h4 id="左移运算符重载"><a href="#左移运算符重载" class="headerlink" title="左移运算符重载"></a>左移运算符重载</h4><p><strong>作用</strong>：可以输出自定义数据类型</p>
<p>重载实现方法：</p>
<ul>
<li>只能通过全局函数重载左移运算符</li>
</ul>
<p><strong>注意事项</strong>：重载的成员函数要想访问类的私有成员，就得利用友元技术</p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><code class="hljs c++"><span class="hljs-keyword">class</span> <span class="hljs-title class_">Person</span>&#123;<br>    <span class="hljs-keyword">friend</span> ostream &amp;<span class="hljs-keyword">operator</span>&lt;&lt;(ostream &amp;cout,Person &amp;p);<br><span class="hljs-keyword">public</span>:<br>    <span class="hljs-built_in">Person</span>(<span class="hljs-type">int</span> a,<span class="hljs-type">int</span> b)&#123;<br>        m_A=a;<br>        m_B=b;<br>    &#125;<br><span class="hljs-keyword">private</span>:<br>    <span class="hljs-type">int</span> m_A:<br>    <span class="hljs-type">int</span> m_B;<br>&#125;;<br><br><span class="hljs-comment">//只能利用全局函数重载左移运算符</span><br>ostream &amp;<span class="hljs-keyword">operator</span>&lt;&lt;(ostream &amp;cout,Person &amp;p)&#123;<br>    cout&lt;&lt;<span class="hljs-string">&quot;m_A= &quot;</span>&lt;&lt;p.m_A&lt;&lt;<span class="hljs-string">&quot; m_B= &quot;</span>&lt;&lt;p.m_B;<br>    <span class="hljs-keyword">return</span> cout;<br>&#125;<br><br><span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">test01</span><span class="hljs-params">()</span></span>&#123;<br>    <span class="hljs-function">Person <span class="hljs-title">p</span><span class="hljs-params">(<span class="hljs-number">10</span>,<span class="hljs-number">10</span>)</span></span>;<br>    cout&lt;&lt;p&lt;&lt;endl;<br>&#125;<br></code></pre></td></tr></table></figure>

<blockquote>
<p><strong>总结</strong>：重载左移运算符配合友元可以实现输出自定义数据类型</p>
</blockquote>
<h4 id="递增运算符重载"><a href="#递增运算符重载" class="headerlink" title="递增运算符重载"></a>递增运算符重载</h4><p><strong>作用</strong>：通过重载递增运算符，实现自己的整型数据类型</p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br></pre></td><td class="code"><pre><code class="hljs c++"><span class="hljs-keyword">class</span> <span class="hljs-title class_">MyInteger</span>&#123;<br>    <span class="hljs-keyword">friend</span> ostream <span class="hljs-keyword">operator</span>&lt;&lt;(ostream &amp;cout,MyInteger myint)<br><span class="hljs-keyword">public</span>:<br>    <span class="hljs-built_in">MyInteger</span>()&#123;<br>        m_Num=<span class="hljs-number">0</span>;<br>    &#125;<br>    <span class="hljs-comment">//重载前置++运算符，前置返回引用</span><br>    MyInteger&amp; <span class="hljs-keyword">operator</span>++()&#123;<br>        m_Num++;<br>        <span class="hljs-keyword">return</span> *<span class="hljs-keyword">this</span><br>    &#125;<br>    <span class="hljs-comment">//重载后置++运算符,后置返回值</span><br>    <span class="hljs-comment">//int代表的占位参数，用于区分前置和后置递增</span><br>    MyInteger <span class="hljs-keyword">operator</span>++(<span class="hljs-type">int</span>)&#123;<br>        <span class="hljs-comment">//先记录当时结果</span><br>        MyInteger temp=*<span class="hljs-keyword">this</span>;<br>        <span class="hljs-comment">//后递增</span><br>        m_Num++;<br>        <span class="hljs-comment">//最后将记录结果做返回操作</span><br>        <span class="hljs-keyword">return</span> temp;<br>    &#125;<br><span class="hljs-keyword">private</span>:<br>    <span class="hljs-type">int</span> m_Num;<br>&#125;;<br><br><span class="hljs-comment">//重载左移运算符</span><br>ostream <span class="hljs-keyword">operator</span>&lt;&lt;(ostream &amp;cout,MyInteger myint)&#123;<br>    cout&lt;&lt;myint.m_Num;<br>    <span class="hljs-keyword">return</span> cout;<br>&#125;<br><br><span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">test01</span><span class="hljs-params">()</span></span>&#123;<br>    MyInteger myint;<br>    cout&lt;&lt;myint&lt;&lt;endl;<br>&#125;<br><br><span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">test02</span><span class="hljs-params">()</span></span>&#123;<br>    MyInteger myint;<br>    cout&lt;&lt;myint++&lt;&lt;endl;<br>    cout&lt;&lt;myint&lt;&lt;endl;<br>&#125;<br></code></pre></td></tr></table></figure>

<blockquote>
<p><strong>总结</strong>：前置递增返回引用，后置递增返回值</p>
</blockquote>
<h4 id="赋值运算符重载"><a href="#赋值运算符重载" class="headerlink" title="赋值运算符重载"></a>赋值运算符重载</h4><p>C++编译器至少给一个类添加4个函数</p>
<ol>
<li>默认构造函数(无参，函数体为空)</li>
<li>默认析构函数(无参，函数体为空)</li>
<li>默认拷贝构造函数，对属性进行值拷贝</li>
<li>赋值运算符operator&#x3D;，对属性进行值拷贝</li>
</ol>
<p>如果类中有属性指向堆区，做赋值操作时也会出现深浅拷贝问题(堆区内存重复释放，导致程序崩溃)</p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br></pre></td><td class="code"><pre><code class="hljs c++"><span class="hljs-keyword">class</span> <span class="hljs-title class_">Person</span>&#123;<br><span class="hljs-keyword">public</span>:<br>    <span class="hljs-built_in">Person</span>(<span class="hljs-type">int</span> age)&#123;<br>        m_Age=<span class="hljs-keyword">new</span> <span class="hljs-built_in">int</span>(age);<br>    &#125;<br>    ~<span class="hljs-built_in">Person</span>()&#123;<br>        <span class="hljs-keyword">if</span>(m_Age!=<span class="hljs-literal">NULL</span>)&#123;<br>            <span class="hljs-keyword">delete</span> m_Age;<br>            m_Age=<span class="hljs-literal">NULL</span>;<br>        &#125;<br>    &#125;<br>    <span class="hljs-comment">//重载赋值运算符</span><br>    Person&amp; <span class="hljs-keyword">operator</span>=(Person &amp;p)&#123;<br>        <span class="hljs-comment">//编译器提供浅拷贝</span><br>        <span class="hljs-comment">//m_Age=p.m_Age;</span><br>        <span class="hljs-comment">//应先判断是否有属性在堆区，如果有先释放干净，然后再深拷贝</span><br>        <span class="hljs-keyword">if</span>(m_Age!=<span class="hljs-literal">NULL</span>)&#123;<br>            <span class="hljs-keyword">delete</span> m_Age;<br>            m_Age=<span class="hljs-literal">NULL</span>;<br>        &#125;<br>        <span class="hljs-comment">//深拷贝</span><br>        m_Age=<span class="hljs-keyword">new</span> <span class="hljs-built_in">int</span>(*p.m_Age);<br>        <span class="hljs-comment">//返回对象本身</span><br>        <span class="hljs-keyword">return</span> *<span class="hljs-keyword">this</span>;<br>    &#125;<br>    <span class="hljs-type">int</span> *m_Age;<br>&#125;;<br><br><span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">test01</span><span class="hljs-params">()</span></span>&#123;<br>    <span class="hljs-function">Person <span class="hljs-title">p1</span><span class="hljs-params">(<span class="hljs-number">18</span>)</span></span>;<br>    <span class="hljs-function">Person <span class="hljs-title">p2</span><span class="hljs-params">(<span class="hljs-number">20</span>)</span></span>;<br>    <span class="hljs-function">Person <span class="hljs-title">p3</span><span class="hljs-params">(<span class="hljs-number">30</span>)</span></span>;<br>    p3=p2=p1; <span class="hljs-comment">//赋值操作</span><br>    cout&lt;&lt;<span class="hljs-string">&quot;p1的年龄：&quot;</span>&lt;&lt;*p1.m_Age&lt;&lt;endl;<br>    cout&lt;&lt;<span class="hljs-string">&quot;p2的年龄：&quot;</span>&lt;&lt;*p2.m_Age&lt;&lt;endl;<br>    cout&lt;&lt;<span class="hljs-string">&quot;p3的年龄：&quot;</span>&lt;&lt;*p3.m_Age&lt;&lt;endl;<br>&#125;<br></code></pre></td></tr></table></figure>







<h4 id="关系运算符重载"><a href="#关系运算符重载" class="headerlink" title="关系运算符重载"></a>关系运算符重载</h4><p><strong>作用</strong>：重载关系运算符，可以让两个自定义类型对象进行对比操作</p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br></pre></td><td class="code"><pre><code class="hljs c++"><span class="hljs-keyword">class</span> <span class="hljs-title class_">Person</span>&#123;<br><span class="hljs-keyword">public</span>:<br>    <span class="hljs-built_in">Person</span>(string name,<span class="hljs-type">int</span> age)&#123;<br>        m_Name=name;<br>        m_Age=age;<br>    &#125;<br>    <span class="hljs-type">bool</span> <span class="hljs-keyword">operator</span>==(Person &amp;p)&#123;<br>        <span class="hljs-keyword">if</span>(<span class="hljs-keyword">this</span>-&gt;m_Name==p.m_Name&amp;&amp;<span class="hljs-keyword">this</span>-&gt;m_Age==p.m_Age)&#123;<br>            <span class="hljs-keyword">return</span> <span class="hljs-literal">true</span>;<br>        &#125;<br>        <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>;<br>    &#125;<br>    <span class="hljs-type">bool</span> <span class="hljs-keyword">operator</span>!=(Person &amp;p)&#123;<br>        <span class="hljs-keyword">if</span>(<span class="hljs-keyword">this</span>-&gt;m_Name!=p.m_Name&amp;&amp;<span class="hljs-keyword">this</span>-&gt;m_Age!=p.m_Age)&#123;<br>            <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>;<br>        &#125;<br>        <span class="hljs-keyword">return</span> <span class="hljs-literal">true</span>;<br>    &#125;<br>    string m_Name;<br>    <span class="hljs-type">int</span> m_Age;<br>&#125;;<br><br><span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">test01</span><span class="hljs-params">()</span></span>&#123;<br>    <span class="hljs-function">Person <span class="hljs-title">p1</span><span class="hljs-params">(<span class="hljs-string">&quot;Tom&quot;</span>,<span class="hljs-number">18</span>)</span></span>;<br>    <span class="hljs-function">Person <span class="hljs-title">p2</span><span class="hljs-params">(<span class="hljs-string">&quot;Jerry&quot;</span>,<span class="hljs-number">18</span>)</span></span>;<br>    <span class="hljs-keyword">if</span>(p1==p2)&#123;<br>        cout&lt;&lt;<span class="hljs-string">&quot;p1和p2是相等的&quot;</span>&lt;&lt;endl;<br>    &#125;<span class="hljs-keyword">else</span>&#123;<br>        cout&lt;&lt;<span class="hljs-string">&quot;p1和p2不相等&quot;</span>&lt;&lt;endl;<br>    &#125;<br>    <span class="hljs-keyword">if</span>(p1!=p2)&#123;<br>        cout&lt;&lt;<span class="hljs-string">&quot;p1和p2不相等&quot;</span>&lt;&lt;endl;<br>    &#125;<span class="hljs-keyword">else</span>&#123;<br>        cout&lt;&lt;<span class="hljs-string">&quot;p1和p2是相等的&quot;</span>&lt;&lt;endl;<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure>









<h4 id="函数调用运算符重载"><a href="#函数调用运算符重载" class="headerlink" title="函数调用运算符重载"></a>函数调用运算符重载</h4><ul>
<li>函数调用运算符()也可以重载</li>
<li>由于重载后使用的方式非常像函数的调用，因此称为<em>仿函数</em></li>
<li>仿函数没有固定写法，非常灵活</li>
</ul>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><code class="hljs c++"><span class="hljs-keyword">class</span> <span class="hljs-title class_">MyPrint</span>&#123;<br><span class="hljs-keyword">public</span>:<br>    <span class="hljs-comment">//重载函数调用运算符</span><br>    <span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">operator</span><span class="hljs-params">()</span><span class="hljs-params">(string test)</span></span>&#123;<br>        cout&lt;&lt;test&lt;&lt;endl;<br>    &#125;<br>&#125;;<br><br><span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">test01</span><span class="hljs-params">()</span></span>&#123;<br>    MyPrint myprint;<br>    <span class="hljs-comment">//由于使用非常像函数调用，因此称为仿函数</span><br>    <span class="hljs-built_in">myprint</span>(<span class="hljs-string">&quot;hello world&quot;</span>);<br>&#125;<br><br><span class="hljs-comment">//仿函数非常灵活，没有固定的写法</span><br><span class="hljs-keyword">class</span> <span class="hljs-title class_">MyAdd</span>&#123;<br><span class="hljs-keyword">public</span>:<br>    <span class="hljs-function"><span class="hljs-type">int</span> <span class="hljs-title">operator</span><span class="hljs-params">()</span><span class="hljs-params">(<span class="hljs-type">int</span> num1,<span class="hljs-type">int</span> num2)</span></span>&#123;<br>        <span class="hljs-keyword">return</span> num1+num2;<br>    &#125;<br>&#125;;<br><br><span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">test02</span><span class="hljs-params">()</span></span>&#123;<br>    MyAdd myadd;<br>    <span class="hljs-type">int</span> ret=<span class="hljs-built_in">myadd</span>(<span class="hljs-number">100</span>,<span class="hljs-number">100</span>);<br>    cout&lt;&lt;<span class="hljs-string">&quot;ret= &quot;</span>&lt;&lt;ret&lt;&lt;endl;<br>    <br>    <span class="hljs-comment">//匿名函数对象</span><br>    cout&lt;&lt;<span class="hljs-built_in">MyAdd</span>()(<span class="hljs-number">100</span>,<span class="hljs-number">100</span>)&lt;&lt;endl;<br>&#125;<br></code></pre></td></tr></table></figure>













<h3 id="继承"><a href="#继承" class="headerlink" title="继承"></a>继承</h3><p><strong>继承是面向对象的三大特性之一</strong></p>
<p>我们发现，定义一些类时，下级别的成员除了拥有上一级的共性，还有自己的特性</p>
<p>这个时候我们就考虑利用继承的技术，减少重复代码</p>
<h4 id="继承的基本语法"><a href="#继承的基本语法" class="headerlink" title="继承的基本语法"></a>继承的基本语法</h4><p><strong>语法</strong>：<em>class 子类:继承方式 父类类名</em></p>
<p>子类 也成为派生类</p>
<p>父类 也称为基类</p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br></pre></td><td class="code"><pre><code class="hljs c++"><span class="hljs-comment">//继承实现页面</span><br><span class="hljs-comment">//公共页面类</span><br><span class="hljs-keyword">class</span> <span class="hljs-title class_">BasePage</span>&#123;<br><span class="hljs-keyword">public</span>:<br>    <span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">header</span><span class="hljs-params">()</span></span>&#123;<br>        cout&lt;&lt;<span class="hljs-string">&quot;首页、公开课(公共头部)&quot;</span>&lt;&lt;endl;<br>    &#125;<br>    <span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">footer</span><span class="hljs-params">()</span></span>&#123;<br>        cout&lt;&lt;<span class="hljs-string">&quot;帮助中心...(公共脚部)&quot;</span>&lt;&lt;endl;<br>    &#125;<br>&#125;;<br><br><span class="hljs-comment">//继承语法</span><br><span class="hljs-keyword">class</span> <span class="hljs-title class_">Java</span>:<span class="hljs-keyword">public</span> BasePage&#123;<br><span class="hljs-keyword">public</span>:<br>    <span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">content</span><span class="hljs-params">()</span></span>&#123;<br>        cout&lt;&lt;<span class="hljs-string">&quot;Java学科视频&quot;</span>&lt;&lt;endl;<br>    &#125;<br>&#125;;<br><span class="hljs-comment">//Python页面</span><br><span class="hljs-keyword">class</span> <span class="hljs-title class_">Python</span>:<span class="hljs-keyword">public</span> BasePage&#123;<br><span class="hljs-keyword">public</span>:<br>    <span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">content</span><span class="hljs-params">()</span></span>&#123;<br>        cout&lt;&lt;<span class="hljs-string">&quot;python学科视频&quot;</span>&lt;&lt;endl;<br>    &#125;<br>&#125;;<br><br><span class="hljs-comment">//c++页面</span><br><span class="hljs-keyword">class</span> <span class="hljs-title class_">Cpp</span>:<span class="hljs-keyword">public</span> BasePage&#123;<br><span class="hljs-keyword">public</span>:<br>    <span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">content</span><span class="hljs-params">()</span></span>&#123;<br>        cout&lt;&lt;<span class="hljs-string">&quot;C++学科视频&quot;</span>&lt;&lt;endl;<br>    &#125;<br>&#125;;<br><br><span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">test01</span><span class="hljs-params">()</span></span>&#123;<br>    cout&lt;&lt;<span class="hljs-string">&quot;Java下载视频页面如下：&quot;</span>&lt;&lt;endl;<br>    Java ja;<br>    ja.<span class="hljs-built_in">header</span>();<br>    ja.<span class="hljs-built_in">footer</span>();<br>    ja.<span class="hljs-built_in">content</span>();<br>    cout&lt;&lt;<span class="hljs-string">&quot;python下载视频页面如下：&quot;</span>&lt;&lt;endl;<br>    Python py;<br>    py.<span class="hljs-built_in">header</span>();<br>    py.<span class="hljs-built_in">footer</span>();<br>    py.<span class="hljs-built_in">content</span>();<br>    cout&lt;&lt;<span class="hljs-string">&quot;C++下载视频页面如下：&quot;</span>&lt;&lt;endl;<br>    Cpp cpp;<br>    cpp.<span class="hljs-built_in">header</span>();<br>    cpp.<span class="hljs-built_in">footer</span>();<br>    cpp.<span class="hljs-built_in">content</span>();<br>&#125;<br></code></pre></td></tr></table></figure>

<blockquote>
<p><strong>总结</strong>：</p>
<p>继承的好处：可以减少重复的代码</p>
<p>派生类中的成员，包含两大部分：</p>
<ul>
<li>一类是从基类继承过来的，从基类继承过来的表现其共性</li>
<li>一类是自己增加的成员，新增的成员体现其个性</li>
</ul>
</blockquote>
<h4 id="继承方式"><a href="#继承方式" class="headerlink" title="继承方式"></a>继承方式</h4><p><strong>继承方式一共有三种</strong>：</p>
<ul>
<li><em>公共继承</em><ul>
<li>父类的公共权限到子类依然是公共权限</li>
<li>父类的保护权限到子类中依然是保护权限</li>
<li>父类中的私有权限成员子类访问不到</li>
</ul>
</li>
<li><em>保护继承</em><ul>
<li>父类中公共成员到子类中，变为保护权限</li>
<li>父类中保护成员到子类中，依然为保护权限</li>
<li>父类中的私有权限成员子类访问不到</li>
</ul>
</li>
<li><em>私有继承</em><ul>
<li>父类的公共成员到子类变为私有成员</li>
<li>父类的保护成员到子类变为私有成员</li>
<li>父类中的私有权限成员子类访问不到</li>
</ul>
</li>
</ul>
<p><img src="https://cdn.jsdelivr.net/gh/MoonforDream/photohouse/hexo/202405190009276.png" srcset="/img/loading.gif" lazyload alt="image"></p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br></pre></td><td class="code"><pre><code class="hljs c++"><span class="hljs-keyword">class</span> <span class="hljs-title class_">Base1</span>&#123;<br><span class="hljs-keyword">public</span>:<br>    <span class="hljs-type">int</span> m_A;<br><span class="hljs-keyword">protected</span>:<br>    <span class="hljs-type">int</span> m_B;<br><span class="hljs-keyword">private</span>:<br>    <span class="hljs-type">int</span> m_C;<br>&#125;;<br><br><span class="hljs-comment">//公共继承</span><br><span class="hljs-keyword">class</span> <span class="hljs-title class_">Son1</span>:<span class="hljs-keyword">public</span> Base1&#123;<br><span class="hljs-keyword">public</span>:<br>    <span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">func</span><span class="hljs-params">()</span></span>&#123;<br>        m_A=<span class="hljs-number">10</span>; <span class="hljs-comment">//父类的公共权限到子类依然是公共权限</span><br>        m_B=<span class="hljs-number">10</span>; <span class="hljs-comment">//父类的保护权限到子类中依然是保护权限</span><br>        <span class="hljs-comment">//m_C=10; //父类中的私有权限成员子类访问不到</span><br>    &#125;<br>&#125;;<br><br><span class="hljs-comment">//保护继承</span><br><span class="hljs-keyword">class</span> <span class="hljs-title class_">Son2</span>:<span class="hljs-keyword">protected</span> Base1&#123;<br><span class="hljs-keyword">public</span>:<br>    <span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">func</span><span class="hljs-params">()</span></span>&#123;<br>        m_A=<span class="hljs-number">100</span>;  <span class="hljs-comment">//父类中公共成员到子类中，变为保护权限</span><br>        m_B=<span class="hljs-number">100</span>;  <span class="hljs-comment">//父类中保护成员到子类中，变为保护权限</span><br>        <span class="hljs-comment">//m_C=10; //父类中的私有权限成员子类访问不到</span><br>    &#125;<br>&#125;;<br><br><span class="hljs-comment">//私有继承</span><br><span class="hljs-keyword">class</span> <span class="hljs-title class_">Son3</span>:<span class="hljs-keyword">private</span> Base1&#123;<br><span class="hljs-keyword">public</span>:<br>    m_A=<span class="hljs-number">100</span>;  <span class="hljs-comment">//父类的公共成员到子类变为私有成员</span><br>    m_B=<span class="hljs-number">100</span>;  <span class="hljs-comment">//父类的保护成员到子类变为私有成员</span><br>    <span class="hljs-comment">//m_C=10; //父类中的私有权限成员子类访问不到</span><br>&#125;;<br><br><span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">test01</span><span class="hljs-params">()</span></span>&#123;<br>    Son1 s1;<br>    Son2 s2;<br>    Son3 s3;<br>    s1.m_A=<span class="hljs-number">100</span>;<br>    <span class="hljs-comment">//s1.m_B=100;  保护权限类外不能访问</span><br>    <span class="hljs-comment">//s2.m_A=1000; 保护权限类外不能访问</span><br>    <span class="hljs-comment">//s3.m_A=1000; //私有权限类外不能访问</span><br>&#125;<br></code></pre></td></tr></table></figure>









<h4 id="继承中的对象模型"><a href="#继承中的对象模型" class="headerlink" title="继承中的对象模型"></a>继承中的对象模型</h4><p><em>父类的所有非静态成员属性，子类都继承下来</em></p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><code class="hljs c++"><span class="hljs-keyword">class</span> <span class="hljs-title class_">Base</span>&#123;<br><span class="hljs-keyword">public</span>:<br>    <span class="hljs-type">int</span> m_A;<br><span class="hljs-keyword">protected</span>:<br>    <span class="hljs-type">int</span> m_B;<br><span class="hljs-keyword">private</span>:<br>    <span class="hljs-type">int</span> m_C;<br>&#125;;<br><br><span class="hljs-keyword">class</span> <span class="hljs-title class_">Son</span>:<span class="hljs-keyword">public</span> Base&#123;<br><span class="hljs-keyword">public</span>:<br>    <span class="hljs-type">int</span> m_D;<br>&#125;;<br><br><span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">test01</span><span class="hljs-params">()</span></span>&#123;<br>    <span class="hljs-comment">//结果为16，父类的所有属性，子类都继承下来</span><br>    cout&lt;&lt;<span class="hljs-string">&quot;size of Son = &quot;</span>&lt;&lt;<span class="hljs-built_in">sizeof</span>(Son)&lt;&lt;endl;<br>&#125;<br></code></pre></td></tr></table></figure>

<blockquote>
<p><strong>总结</strong>：父类的私有属性也被子类继承下来了，只是访问不到，但是依然存在于子类中</p>
</blockquote>
<h4 id="继承中的构造和析构顺序"><a href="#继承中的构造和析构顺序" class="headerlink" title="继承中的构造和析构顺序"></a>继承中的构造和析构顺序</h4><p>子类继承父类后，当创建子类对象，也会调用父类的构造函数</p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><code class="hljs c++"><span class="hljs-keyword">class</span> <span class="hljs-title class_">Base</span>&#123;<br><span class="hljs-keyword">public</span>:<br>    <span class="hljs-built_in">Base</span>()&#123;<br>        cout&lt;&lt;<span class="hljs-string">&quot;Base构造函数&quot;</span>&lt;&lt;endl;<br>    &#125;<br>    ~<span class="hljs-built_in">Base</span>()&#123;<br>        cout&lt;&lt;<span class="hljs-string">&quot;Base析构函数&quot;</span>&lt;&lt;endl;<br>    &#125;<br>&#125;;<br><br><span class="hljs-keyword">class</span> <span class="hljs-title class_">Son</span>:<span class="hljs-keyword">public</span> Base&#123;<br><span class="hljs-keyword">public</span>:<br>    <span class="hljs-built_in">Son</span>()&#123;<br>        cout&lt;&lt;<span class="hljs-string">&quot;Base构造函数&quot;</span>&lt;&lt;endl;<br>    &#125;<br>    ~<span class="hljs-built_in">Son</span>()&#123;<br>        cout&lt;&lt;<span class="hljs-string">&quot;Base析构函数&quot;</span>&lt;&lt;endl;<br>    &#125;<br>&#125;;<br><br><br><span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">test01</span><span class="hljs-params">()</span></span>&#123;<br>    <span class="hljs-comment">//Base b;</span><br>    Son s;<br>&#125;<br></code></pre></td></tr></table></figure>

<blockquote>
<p><strong>总结</strong>：</p>
<p>先构造父类，再构造子类，析构顺序与构造顺序相反</p>
</blockquote>
<h4 id="继承同名成员处理方式"><a href="#继承同名成员处理方式" class="headerlink" title="继承同名成员处理方式"></a>继承同名成员处理方式</h4><ul>
<li><strong>访问子类同名成员，直接访问即可</strong></li>
<li><strong>访问父类同名成员，需要加作用域</strong></li>
</ul>
<p>访问父类同名成员语法：</p>
<p><em>子类实例对象.父类名称::要调用的父类同名成员</em></p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br></pre></td><td class="code"><pre><code class="hljs c++"><span class="hljs-keyword">class</span> <span class="hljs-title class_">Base</span>&#123;<br><span class="hljs-keyword">public</span>:<br>	<span class="hljs-built_in">Base</span>()&#123;<br>        m_A=<span class="hljs-number">100</span>;<br>    &#125;<br>    <span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">func</span><span class="hljs-params">()</span></span>&#123;<br>        cout&lt;&lt;<span class="hljs-string">&quot;Base-func函数调用&quot;</span>&lt;&lt;endl;<br>    &#125;<br>    <span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">func</span><span class="hljs-params">(<span class="hljs-type">int</span> a)</span></span>&#123;<br>        cout&lt;&lt;<span class="hljs-string">&quot;Base-func(int)函数调用&quot;</span>&lt;&lt;endl;<br>    &#125;<br>    <span class="hljs-type">int</span> m_A;<br>&#125;;<br><br><br><span class="hljs-keyword">class</span> <span class="hljs-title class_">Son</span>:<span class="hljs-keyword">public</span> Base&#123;<br><span class="hljs-keyword">public</span>:<br>    <span class="hljs-built_in">Son</span>()&#123;<br>        m_A=<span class="hljs-number">200</span>;<br>    &#125;<br>    <span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">func</span><span class="hljs-params">()</span></span>&#123;<br>        cout&lt;&lt;<span class="hljs-string">&quot;Son-func函数调用&quot;</span>&lt;&lt;endl;<br>    &#125;<br>    <span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">func</span><span class="hljs-params">(<span class="hljs-type">int</span> a)</span></span>&#123;<br>        cout&lt;&lt;<span class="hljs-string">&quot;Son-func(int)函数调用&quot;</span>&lt;&lt;endl;<br>    &#125;<br>    <span class="hljs-type">int</span> m_A;<br>&#125;;<br><span class="hljs-comment">//同名成员属性处理</span><br><span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">test01</span><span class="hljs-params">()</span></span>&#123;<br>    Son s;<br>    cout&lt;&lt;<span class="hljs-string">&quot;Son 下m_A&quot;</span>&lt;&lt;s.m_A&lt;&lt;endl;<br>    cout&lt;&lt;<span class="hljs-string">&quot;Son 下m_A&quot;</span>&lt;&lt;s.Base::m_A&lt;&lt;endl;<br>&#125;<br><br><span class="hljs-comment">//同名成员函数处理</span><br><span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">test02</span><span class="hljs-params">()</span></span>&#123;<br>    Son s;<br>    s.<span class="hljs-built_in">func</span>();<br>    s.Base::<span class="hljs-built_in">func</span>();<br>&#125;<br><br></code></pre></td></tr></table></figure>

<blockquote>
<p><strong>总结</strong>：</p>
<ul>
<li>子类对象可以直接访问到子类中同名成员</li>
<li>子类对象加作用域可以访问到父类同名成员</li>
<li>当子类与父类拥有同名的成员函数，子类会隐藏父类中同名成员函数，加作用域可以访问到父类中同名函数</li>
</ul>
</blockquote>
<h4 id="继承同名静态成员处理方式"><a href="#继承同名静态成员处理方式" class="headerlink" title="继承同名静态成员处理方式"></a>继承同名静态成员处理方式</h4><p>静态成员和非静态成员出现同名，处理方式一致</p>
<ul>
<li><strong>访问子类同名成员，直接访问即可</strong></li>
<li><strong>访问父类同名成员，需要加作用域</strong></li>
</ul>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br></pre></td><td class="code"><pre><code class="hljs c++"><span class="hljs-keyword">class</span> <span class="hljs-title class_">Base</span>&#123;<br><span class="hljs-keyword">public</span>:<br>    <span class="hljs-type">static</span> <span class="hljs-type">int</span> m_A;<br>    <span class="hljs-function"><span class="hljs-type">static</span> <span class="hljs-type">void</span> <span class="hljs-title">func</span><span class="hljs-params">()</span></span>&#123;<br>        cout&lt;&lt;<span class="hljs-string">&quot;Base-static func的调用&quot;</span>&lt;&lt;endl;<br>    &#125;<br>&#125;;<br><br><span class="hljs-type">int</span> Base::m_A=<span class="hljs-number">100</span>;<br><br><span class="hljs-keyword">class</span> <span class="hljs-title class_">Son</span>:<span class="hljs-keyword">public</span> Base&#123;<br><span class="hljs-keyword">public</span>:<br>    <span class="hljs-type">static</span> <span class="hljs-type">int</span> m_A;<br>    <span class="hljs-function"><span class="hljs-type">static</span> <span class="hljs-type">void</span> <span class="hljs-title">func</span><span class="hljs-params">()</span></span>&#123;<br>        cout&lt;&lt;<span class="hljs-string">&quot;Son-static func的调用&quot;</span>&lt;&lt;endl;<br>    &#125;<br>&#125;;<br><span class="hljs-type">int</span> Son::m_A=<span class="hljs-number">200</span>;<br><br><span class="hljs-comment">//同名静态成员属性</span><br><span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">test01</span><span class="hljs-params">()</span></span>&#123;<br>    Son s;<br>    <span class="hljs-comment">//1.通过对象访问静态成员</span><br>    cout&lt;&lt;<span class="hljs-string">&quot;Son m_A=&quot;</span>&lt;&lt;s.m_A&lt;&lt;endl;<br>    cout&lt;&lt;<span class="hljs-string">&quot;Base m_A=&quot;</span>&lt;&lt;s.Base::m_A&lt;&lt;endl;<br>    <span class="hljs-comment">//2.通过类名访问静态成员</span><br>    cout&lt;&lt;<span class="hljs-string">&quot;通过类名访问静态成员&quot;</span>&lt;&lt;endl;<br>    cout&lt;&lt;<span class="hljs-string">&quot;Son m_A=&quot;</span>&lt;&lt;Son::m_A&lt;&lt;endl;<br>    cout&lt;&lt;<span class="hljs-string">&quot;Base m_A=&quot;</span>&lt;&lt;Son::Base::m_A&lt;&lt;endl;<br>&#125;<br><br><span class="hljs-comment">//同名静态成员函数</span><br><span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">test02</span><span class="hljs-params">()</span></span>&#123;<br>    Son s;<br>    s.<span class="hljs-built_in">func</span>();<br>    s.Base::<span class="hljs-built_in">func</span>();<br>    Son::<span class="hljs-built_in">func</span>();<br>    Son::Base::<span class="hljs-built_in">func</span>();<br>&#125;<br></code></pre></td></tr></table></figure>

<blockquote>
<p><strong>总结</strong>：</p>
<p>同名静态成员处理方式和非静态处理方式一样，只不过有两种访问的方式(通过对象和通过类名)</p>
</blockquote>
<h4 id="多继承语法"><a href="#多继承语法" class="headerlink" title="多继承语法"></a>多继承语法</h4><p>C++中允许<em>一个类继承多个类</em></p>
<p><strong>语法</strong>：</p>
<p><em>class 子类:继承方式 父类1,继承方式 父类2…</em></p>
<p><strong>注意事项</strong>：</p>
<ul>
<li>多继承可能会引发父类中有同名成员出现，需要加作用域区分</li>
<li><strong>C++实际开发中不建议用多继承</strong></li>
</ul>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><code class="hljs c++"><span class="hljs-keyword">class</span> <span class="hljs-title class_">Base1</span>&#123;<br><span class="hljs-keyword">public</span>:<br>    <span class="hljs-built_in">Base</span>()&#123;<br>        m_A=<span class="hljs-number">100</span>;<br>    &#125;<br>    <span class="hljs-type">int</span> m_A;<br>&#125;;<br><br><span class="hljs-keyword">class</span> <span class="hljs-title class_">Base2</span>&#123;<br><span class="hljs-keyword">public</span>:<br>    <span class="hljs-built_in">Base2</span>()&#123;<br>        m_A=<span class="hljs-number">200</span>;<br>    &#125;<br>    <span class="hljs-type">int</span> m_A;<br>&#125;;<br><br><span class="hljs-keyword">class</span> <span class="hljs-title class_">Son</span>:<span class="hljs-keyword">public</span> Base1,<span class="hljs-keyword">public</span> Base2&#123;<br><span class="hljs-keyword">public</span>:<br>    <span class="hljs-built_in">Son</span>()&#123;<br>        m_C=<span class="hljs-number">300</span>;<br>        m_D=<span class="hljs-number">400</span>;<br>    &#125;<br>    <span class="hljs-type">int</span> m_C;<br>    <span class="hljs-type">int</span> m_D;<br>&#125;;<br><br><span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">test01</span><span class="hljs-params">()</span></span>&#123;<br>    Son s;<br>    cout&lt;&lt;<span class="hljs-string">&quot;sizeof Son=&quot;</span>&lt;&lt;<span class="hljs-built_in">sizeof</span>(s)&lt;&lt;endl;<br>    cout&lt;&lt;<span class="hljs-string">&quot;m_A=&quot;</span>&lt;&lt;s.Base1::m_A&lt;&lt;endl;<br>&#125;<br></code></pre></td></tr></table></figure>











<h4 id="菱形继承"><a href="#菱形继承" class="headerlink" title="菱形继承"></a>菱形继承</h4><p><strong>概念</strong>：</p>
<p>两个派生类继承同一个基类，又有某个类同时继承着两个派生类，这种继承被称为菱形继承，或者钻石继承</p>
<p><strong>问题</strong>：</p>
<p>同名成员产生二义性，并且继承两个派生类的类会继承两份来自同一个基类的数据(资源浪费)，但是实际只需要一份就行了</p>
<p><strong>解决方法</strong>：</p>
<p>利用虚继承解决菱形继承的问题，<strong>语法</strong>：<em>class 子类:virtual public 父类{};</em>,则父类被称为虚基类,进行了虚继承(底层利用虚基类指针，让两个类都指向同一份数据)，则继承的数据是共享的，更改两份继承下来的数据就是更改一份数据。</p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><code class="hljs c++"><span class="hljs-keyword">class</span> <span class="hljs-title class_">Animal</span>&#123;<br><span class="hljs-keyword">public</span>:<br>    <span class="hljs-type">int</span> m_Age;<br>&#125;;<br><br><span class="hljs-keyword">class</span> <span class="hljs-title class_">Sheep</span>:<span class="hljs-keyword">virtual</span> <span class="hljs-keyword">public</span> Animal&#123;<br>    <br>&#125;;<br><br><span class="hljs-keyword">class</span> <span class="hljs-title class_">Tuo</span>:<span class="hljs-keyword">virtual</span> <span class="hljs-keyword">public</span> Animal&#123;<br>    <br>&#125;;<br><br><span class="hljs-keyword">class</span> <span class="hljs-title class_">SheepTuo</span>:<span class="hljs-keyword">public</span> Sheep,<span class="hljs-keyword">public</span> Tuo&#123;<br>    <br>&#125;;<br><br><span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">test01</span><span class="hljs-params">()</span></span>&#123;<br>    SheepTuo st;<br>    st.Sheep::m_Age=<span class="hljs-number">18</span>;<br>    st.Tuo::m_Age=<span class="hljs-number">28</span>;<br>    <span class="hljs-comment">//输出为28</span><br>    cout&lt;&lt;<span class="hljs-string">&quot;st.Sheep::m_Age=&quot;</span>&lt;&lt;st.Sheep::m_Age&lt;&lt;endl;<br>    <span class="hljs-comment">//输出为28</span><br>    cout&lt;&lt;<span class="hljs-string">&quot;st.Tuo::m_Age= &quot;</span>&lt;&lt;st.Tuo::m_Age&lt;&lt;endl;<br>    <span class="hljs-comment">//数据只需要一份</span><br>    <br>&#125;<br></code></pre></td></tr></table></figure>











<h3 id="多态"><a href="#多态" class="headerlink" title="多态"></a>多态</h3><h4 id="多态的基本概念"><a href="#多态的基本概念" class="headerlink" title="多态的基本概念"></a>多态的基本概念</h4><p><strong>多态是C++面向对象的三大特性之一</strong></p>
<p><strong>多态分为两类</strong>：</p>
<ul>
<li><em>静态多态</em>：函数重载和运算符重载属于静态多态，复用函数名</li>
<li><em>动态多态</em>：派生类和虚函数(加virtual关键词)实现运行时多态</li>
</ul>
<p><strong>静态多态和动态多态的区别</strong>：</p>
<ul>
<li>静态多态的<em>函数地址早绑定</em> - 编译阶段确定函数地址</li>
<li>动态多态的<em>函数地址晚绑定</em> - 运行阶段确定函数地址</li>
</ul>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><code class="hljs c++"><span class="hljs-keyword">class</span> <span class="hljs-title class_">Animal</span>&#123;<br><span class="hljs-keyword">public</span>:<br>    <span class="hljs-comment">//虚函数，加入virtual关键词</span><br>    <span class="hljs-function"><span class="hljs-keyword">virtual</span> <span class="hljs-type">void</span> <span class="hljs-title">speak</span><span class="hljs-params">()</span></span>&#123;<br>        cout&lt;&lt;<span class="hljs-string">&quot;动物在说话&quot;</span>&lt;&lt;endl;<br>    &#125;<br>&#125;;<br><br><span class="hljs-keyword">class</span> <span class="hljs-title class_">Cat</span>:<span class="hljs-keyword">public</span> Animal&#123;<br><span class="hljs-keyword">public</span>:<br>    <span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">speak</span><span class="hljs-params">()</span></span>&#123;<br>        cout&lt;&lt;<span class="hljs-string">&quot;小猫在说话&quot;</span>&lt;&lt;endl;<br>    &#125;<br>&#125;;<br><br><span class="hljs-comment">//没加virtual关键词,地址早绑定，在编译阶段就确定函数地址</span><br><span class="hljs-comment">//如果想执行让猫说话，则函数地址不能提前绑定，需要晚绑定</span><br><span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">doSpeak</span><span class="hljs-params">(Animal &amp;animal)</span></span>&#123;<br>    animal.<span class="hljs-built_in">speak</span>();<br>&#125;<br><br><span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">test01</span><span class="hljs-params">()</span></span>&#123;<br>    Cat cat;<br>    <span class="hljs-built_in">doSpeak</span>(cat);<span class="hljs-comment">//执行动物在说话</span><br>&#125;<br></code></pre></td></tr></table></figure>

<blockquote>
<p><strong>总结</strong>：</p>
<p>动态多态满足条件：</p>
<ol>
<li>有继承关系</li>
<li>子类有重写父类的虚函数</li>
</ol>
<p>动态多态的使用：父类的指针或引用指向子类对象</p>
</blockquote>
<p><strong>原理剖析</strong>：</p>
<p><img src="/../../../../../study/images/Snipaste_2023-05-17_11-32-07.jpg" srcset="/img/loading.gif" lazyload alt="image"></p>
<p><strong>多态的优点</strong>：</p>
<ul>
<li>代码组织结构清晰</li>
<li>可读性强</li>
<li>利于前期和后期扩展以及维护</li>
</ul>
<blockquote>
<p><strong>总结</strong>：C++开发提倡利用多态设计程序架构，因为多态的优点很多</p>
</blockquote>
<h4 id="纯虚函数和抽象类"><a href="#纯虚函数和抽象类" class="headerlink" title="纯虚函数和抽象类"></a>纯虚函数和抽象类</h4><p>在多态中，通常父类中虚函数的实现是毫无意义的，主要都是调用子类重写的内容</p>
<p>因此可以将虚函数改为<strong>纯虚函数</strong></p>
<p><strong>语法</strong>：<em>virtual 返回值类型 函数名 (参数列表) &#x3D; 0;</em></p>
<p>当类中有了纯虚函数，这个类也成为<strong>抽象类</strong></p>
<p><strong>抽象类特点</strong>：</p>
<ul>
<li>无法实例化对象</li>
<li>子类必须重写抽象类中的纯虚函数，否则也属于抽象类</li>
</ul>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><code class="hljs c++"><span class="hljs-comment">//抽象类</span><br><span class="hljs-keyword">class</span> <span class="hljs-title class_">Base</span>&#123;<br><span class="hljs-keyword">public</span>:<br>    <span class="hljs-comment">//纯虚函数</span><br>    <span class="hljs-function"><span class="hljs-keyword">virtual</span> <span class="hljs-type">void</span> <span class="hljs-title">func</span><span class="hljs-params">()</span></span>=<span class="hljs-number">0</span>;<br>&#125;;<br><br><span class="hljs-keyword">class</span> <span class="hljs-title class_">Son</span>:<span class="hljs-keyword">public</span> Base&#123;<br><span class="hljs-keyword">public</span>:<br>    <span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">func</span><span class="hljs-params">()</span></span>&#123;<br>        cout&lt;&lt;<span class="hljs-string">&quot;Son func函数调用&quot;</span>&lt;&lt;endl;<br>    &#125;<br>&#125;;<br><br><span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">test01</span><span class="hljs-params">()</span></span>&#123;<br>    <span class="hljs-comment">//Base b; 抽象类无法实例化对象</span><br>    Son s;<span class="hljs-comment">//如果没重写父类(抽象类)的纯虚函数，则该子类也为抽象类</span><br>&#125;<br></code></pre></td></tr></table></figure>











<h4 id="虚析构和纯虚析构"><a href="#虚析构和纯虚析构" class="headerlink" title="虚析构和纯虚析构"></a>虚析构和纯虚析构</h4><p>多态使用时，如果子类中有属性开辟到堆区，那么父类指针在释放时无法调用到子类的析构代码</p>
<p><strong>解决方式</strong>：将父类中的析构函数改为<em>虚析构</em>或者<em>纯虚析构</em></p>
<p><strong>虚析构和纯虚析构共性</strong>:</p>
<ul>
<li>可以解决父类指针释放子类对象的问题</li>
<li>都需要有具体的函数实现</li>
</ul>
<p><strong>虚析构和纯虚析构区别</strong>：</p>
<ul>
<li>如果是纯虚析构，该类属于抽象类，无法实例化对象</li>
</ul>
<p><strong>虚析构语法</strong>： <em>virtual ~类名(){}</em></p>
<p><strong>纯虚析构语法</strong>： </p>
<p><em>virtual ~类名()&#x3D;0;</em> 类外：<em>类名::~类名(){}</em></p>
<p><strong>注意事项</strong>：需要声明，也需要具体的实现代码(在类外实现)，有了纯虚析构函数之后，这个类也属于抽象类，无法实例化对象</p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br></pre></td><td class="code"><pre><code class="hljs c++"><span class="hljs-keyword">class</span> <span class="hljs-title class_">Animal</span>&#123;<br><span class="hljs-keyword">public</span>:<br>    <span class="hljs-built_in">Animal</span>()&#123;<br>        cout&lt;&lt;<span class="hljs-string">&quot;Animal构造函数调用&quot;</span>&lt;&lt;endl;<br>    &#125;<br>    <span class="hljs-comment">//利用虚析构可以解决父类指针释放子类对象时不干净的问题</span><br>    <span class="hljs-keyword">virtual</span> ~<span class="hljs-built_in">Animal</span>()&#123;<br>		cout&lt;&lt;<span class="hljs-string">&quot;Animal析构函数调用&quot;</span>&lt;&lt;endl;<br>    &#125;<br>    <span class="hljs-comment">//纯虚析构函数</span><br>    <span class="hljs-keyword">virtual</span> ~<span class="hljs-built_in">Animal</span>()=<span class="hljs-number">0</span>;<br>    <span class="hljs-function"><span class="hljs-keyword">virtual</span> <span class="hljs-type">void</span> <span class="hljs-title">speak</span><span class="hljs-params">()</span></span>=<span class="hljs-number">0</span>;<br>&#125;;<br><span class="hljs-comment">//纯虚析构也需要代码实现</span><br>Animal::~<span class="hljs-built_in">Animal</span>()&#123;<br>    cout&lt;&lt;<span class="hljs-string">&quot;Animal纯虚析构函数调用&quot;</span>&lt;&lt;endl;<br>&#125;<br><br><span class="hljs-keyword">class</span> <span class="hljs-title class_">Cat</span>:<span class="hljs-keyword">public</span> Animal&#123;<br><span class="hljs-keyword">public</span>:<br>    <span class="hljs-function"><span class="hljs-keyword">virtual</span> <span class="hljs-type">void</span> <span class="hljs-title">speak</span><span class="hljs-params">()</span></span>&#123;<br>        cout&lt;&lt;*m_Name&lt;&lt;<span class="hljs-string">&quot;小猫在说话&quot;</span>&lt;&lt;endl;<br>    &#125;<br>    <span class="hljs-built_in">Cat</span>(string name)&#123;<br>        cout&lt;&lt;<span class="hljs-string">&quot;cat构造函数调用&quot;</span>&lt;&lt;endl;	<br>        m_Name=<span class="hljs-keyword">new</span> <span class="hljs-built_in">string</span>(name);<br>    &#125;<br>    ~<span class="hljs-built_in">Cat</span>()&#123;<br>        <span class="hljs-keyword">if</span>(m_Name!=<span class="hljs-literal">NULL</span>)&#123;<br>            cout&lt;&lt;<span class="hljs-string">&quot;cat析构函数调用&quot;</span>&lt;&lt;endl;<br>            <span class="hljs-keyword">delete</span> m_Name;<br>            m_Name=<span class="hljs-literal">NULL</span>;<br>        &#125;<br>    &#125;<br>    string *m_Name;<br>&#125;;<br><br><span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">test01</span><span class="hljs-params">()</span></span>&#123;<br>    <span class="hljs-function">Animal *animal <span class="hljs-keyword">new</span> <span class="hljs-title">Cat</span><span class="hljs-params">(<span class="hljs-string">&quot;Tom&quot;</span>)</span></span>;<br>    animal-&gt;<span class="hljs-built_in">speak</span>();<br>    <span class="hljs-comment">//父类指针在析构时候不会调用子类中析构函数，导致子类如果有堆区属性，会出现内存泄漏</span><br>    <span class="hljs-keyword">delete</span> animal;<br>&#125;<br></code></pre></td></tr></table></figure>

<blockquote>
<p><strong>总结</strong>：</p>
<ol>
<li>虚析构或纯虚析构就是用来解决通过父类指针释放的子类对象</li>
<li>如果子类中没有堆区数据，可以不写虚析构或纯虚析构函数</li>
<li>拥有纯虚析构函数的类也属于抽象类</li>
</ol>
</blockquote>
<h2 id="文件操作"><a href="#文件操作" class="headerlink" title="文件操作"></a>文件操作</h2><p>程序运行时产生的数据都属于临时数据，程序一旦运行结束都会被释放</p>
<p>通过<em>文件可以将数据持久化</em></p>
<p>C++中对文件操作需要包含头文件**<fstream>**</p>
<p>文件类型分为两种：</p>
<ul>
<li><strong>文本文件</strong>   - 文件以文本的<em>ASCII码</em>形式存储在计算机中</li>
<li><strong>二进制文件</strong>   - 文件以文本的<em>二进制形式</em>存储在计算机中，用户一般不能直接读懂它们</li>
</ul>
<p>操作文件的三大类：</p>
<ul>
<li><strong>ofstream</strong>：写操作</li>
<li><strong>ifstream</strong>：读操作</li>
<li><strong>fstream</strong>：读写操作</li>
</ul>
<h3 id="文本文件"><a href="#文本文件" class="headerlink" title="文本文件"></a>文本文件</h3><h4 id="写文件"><a href="#写文件" class="headerlink" title="写文件"></a>写文件</h4><p>写文件步骤如下：</p>
<ol>
<li><p><strong>包含头文件</strong></p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs c++"><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;fstream&gt;</span></span><br></code></pre></td></tr></table></figure>
</li>
<li><p><strong>创建流对象</strong></p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs c++">ofstream ofs;<br></code></pre></td></tr></table></figure>
</li>
<li><p><strong>打开文件</strong></p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs c++">ofs.<span class="hljs-built_in">open</span>(<span class="hljs-string">&quot;文件路径&quot;</span>,打开方式);<br></code></pre></td></tr></table></figure>
</li>
<li><p><strong>写数据</strong></p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs c++">ofs&lt;&lt;<span class="hljs-string">&quot;写入的数据&quot;</span>;<br></code></pre></td></tr></table></figure>
</li>
<li><p><strong>关闭文件</strong></p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs c++">ofs.<span class="hljs-built_in">close</span>();<br></code></pre></td></tr></table></figure></li>
</ol>
<p><strong>文件打开方式</strong>：</p>
<table>
<thead>
<tr>
<th><strong>打开方式</strong></th>
<th><strong>解释</strong></th>
</tr>
</thead>
<tbody><tr>
<td>ios::in</td>
<td>为读文件而打开文件</td>
</tr>
<tr>
<td>ios::out</td>
<td>为写文件而打开文件</td>
</tr>
<tr>
<td>ios::ate</td>
<td>初始位置：文件尾</td>
</tr>
<tr>
<td>ios::app</td>
<td>追加方式写文件</td>
</tr>
<tr>
<td>ios::trunc</td>
<td>如果文件存在先删除，再创建</td>
</tr>
<tr>
<td>ios::binary</td>
<td>二进制方式</td>
</tr>
</tbody></table>
<p><strong>注意</strong>：文件打开方式可以配合使用，利用*|*操作符</p>
<p>例如：用二进制方式写文件<code>ios::binary|ios::out</code></p>
<h4 id="读文件"><a href="#读文件" class="headerlink" title="读文件"></a>读文件</h4><p>读文件与写文件步骤相似，但是读取方式相对于比较多</p>
<p><strong>读文件步骤如下</strong>：</p>
<ol>
<li><p><strong>包含头文件</strong></p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs c++"><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;fstream&gt;</span></span><br></code></pre></td></tr></table></figure>
</li>
<li><p><strong>创建流对象</strong>：</p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs c++">ifstream ifs;<br></code></pre></td></tr></table></figure>
</li>
<li><p><strong>打开文件并判断文件是否打开成功</strong></p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs c++">ifs.<span class="hljs-built_in">open</span>(<span class="hljs-string">&quot;文件路径&quot;</span>,打开方式);<br></code></pre></td></tr></table></figure>
</li>
<li><p><strong>读数据</strong></p>
<p>四种方式读取</p>
</li>
<li><p><strong>关闭文件</strong></p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs c++">ifs.<span class="hljs-built_in">close</span>();<br></code></pre></td></tr></table></figure></li>
</ol>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br></pre></td><td class="code"><pre><code class="hljs c++"><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;iostream&gt;</span></span><br><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;fstream&gt;</span></span><br><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;string&gt;</span></span><br><span class="hljs-keyword">using</span> <span class="hljs-keyword">namespace</span> std;<br><br><span class="hljs-function"><span class="hljs-type">int</span> <span class="hljs-title">main</span><span class="hljs-params">()</span> </span>&#123;<br>    ifstream ifs;<br>    ifs.<span class="hljs-built_in">open</span>(<span class="hljs-string">&quot;test.txt&quot;</span>,ios::in);<br>    <span class="hljs-keyword">if</span>(!ifs.<span class="hljs-built_in">is_open</span>())&#123;<br>        cout&lt;&lt;<span class="hljs-string">&quot;文件打开失败&quot;</span>&lt;&lt;endl;<br>        <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;<br>    &#125;<br>    <span class="hljs-comment">//读数据</span><br>    <span class="hljs-comment">//第一种</span><br><span class="hljs-comment">//    char buf[1024]=&#123;0&#125;;</span><br><span class="hljs-comment">//    while(ifs&gt;&gt;buf)&#123;</span><br><span class="hljs-comment">//        cout&lt;&lt;buf&lt;&lt;endl;</span><br><span class="hljs-comment">//    &#125;</span><br><br>    <span class="hljs-comment">//第二种</span><br><span class="hljs-comment">//    char buf[1024]=&#123;0&#125;;</span><br><span class="hljs-comment">//    while(ifs.getline(buf,sizeof(buf)))&#123;</span><br><span class="hljs-comment">//        cout&lt;&lt;buf&lt;&lt;endl;</span><br><span class="hljs-comment">//    &#125;</span><br><br>    <span class="hljs-comment">//第三种</span><br><span class="hljs-comment">//    string buf;</span><br><span class="hljs-comment">//    while (getline(ifs,buf))&#123;</span><br><span class="hljs-comment">//        cout&lt;&lt;buf&lt;&lt;endl;</span><br><span class="hljs-comment">//    &#125;</span><br><br>    <span class="hljs-comment">//第四种,不推荐</span><br>    <span class="hljs-type">char</span> c;<br>    <span class="hljs-keyword">while</span>((c=ifs.<span class="hljs-built_in">get</span>())!=EOF)&#123;  <span class="hljs-comment">//EOF end of file</span><br>        cout&lt;&lt;c;<br>    &#125;<br>    ifs.<span class="hljs-built_in">close</span>();<br>    <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;<br>&#125;<br></code></pre></td></tr></table></figure>

<blockquote>
<p><strong>总结</strong>：</p>
<ul>
<li>读文件可以利用ifstream，或者fstream类</li>
<li>利用is_open函数可以判断文件是否打开成功</li>
<li>close关闭文件</li>
</ul>
</blockquote>
<h3 id="二进制文件"><a href="#二进制文件" class="headerlink" title="二进制文件"></a>二进制文件</h3><p>以二进制的方式对文件进行读写操作</p>
<p>打开方式要指定为<code>iso::binary</code></p>
<h4 id="写文件-1"><a href="#写文件-1" class="headerlink" title="写文件"></a>写文件</h4><p>二进制方式写文件主要利用流对象调用成员函数write</p>
<p>函数原型：<code>ostream&amp; write(const char * buffer,int len);</code></p>
<p>参数解释：字符指针buffer指向内存中一段存储空间。len是读写的字节数</p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><code class="hljs c++"><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;iostream&gt;</span></span><br><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;fstream&gt;</span></span><br><span class="hljs-keyword">using</span> <span class="hljs-keyword">namespace</span> std;<br><br><span class="hljs-keyword">class</span> <span class="hljs-title class_">Person</span>&#123;<br><span class="hljs-keyword">public</span>:<br>    <span class="hljs-type">char</span> m_Name[<span class="hljs-number">64</span>];<br>    <span class="hljs-type">int</span> m_Age;<br>&#125;;<br><br><span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">test01</span><span class="hljs-params">()</span> </span>&#123;<br>    <span class="hljs-function">ofstream <span class="hljs-title">ofs</span><span class="hljs-params">(<span class="hljs-string">&quot;test1.txt&quot;</span>,ios::out|ios::binary)</span></span>;<br><span class="hljs-comment">//    ofs.open(&quot;test1.txt&quot;,ios::out|ios::binary);</span><br>    Person p=&#123;<span class="hljs-string">&quot;张三&quot;</span>,<span class="hljs-number">18</span>&#125;;<br>    <span class="hljs-comment">//要把数据地址转化成const char*</span><br>    ofs.<span class="hljs-built_in">write</span>((<span class="hljs-type">const</span> <span class="hljs-type">char</span>*)&amp;p,<span class="hljs-built_in">sizeof</span>(Person));<br>    ofs.<span class="hljs-built_in">close</span>();<br>&#125;<br><br><span class="hljs-function"><span class="hljs-type">int</span> <span class="hljs-title">main</span><span class="hljs-params">()</span> </span>&#123;<br>    <span class="hljs-built_in">test01</span>();<br>    <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;<br>&#125;<br><br></code></pre></td></tr></table></figure>









<h4 id="读文件-1"><a href="#读文件-1" class="headerlink" title="读文件"></a>读文件</h4><p>二进制方式读文件主要利用流对象调用成员函数read</p>
<p>函数原型：<code>istream&amp; read(char *buffer,int len);</code></p>
<p>参数解释：字符指针buffer指向内存中一段存储空间。len是读写的字节数</p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><code class="hljs c++"><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;iostream&gt;</span></span><br><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;fstream&gt;</span></span><br><span class="hljs-keyword">using</span> <span class="hljs-keyword">namespace</span> std;<br><br><span class="hljs-keyword">class</span> <span class="hljs-title class_">Person</span>&#123;<br><span class="hljs-keyword">public</span>:<br>    <span class="hljs-type">char</span> m_Name[<span class="hljs-number">64</span>];<br>    <span class="hljs-type">int</span> m_Age;<br>&#125;;<br><br><span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">test01</span><span class="hljs-params">()</span></span>&#123;<br>    <span class="hljs-function">ifstream <span class="hljs-title">ifs</span><span class="hljs-params">(<span class="hljs-string">&quot;test1.txt&quot;</span>,ios::in|ios::binary)</span></span>;<br>    <span class="hljs-keyword">if</span>(!ifs.<span class="hljs-built_in">is_open</span>())&#123;<br>        cout&lt;&lt;<span class="hljs-string">&quot;文件打开失败&quot;</span>&lt;&lt;endl;<br>        <span class="hljs-keyword">return</span>;<br>    &#125;<br>    Person p;<br>    ifs.<span class="hljs-built_in">read</span>((<span class="hljs-type">char</span>*)&amp;p, <span class="hljs-built_in">sizeof</span>(Person));<br>    cout&lt;&lt;p.m_Name&lt;&lt;<span class="hljs-string">&quot;  &quot;</span>&lt;&lt;p.m_Age&lt;&lt;endl;<br>    ifs.<span class="hljs-built_in">close</span>();<br>&#125;<br><br><span class="hljs-function"><span class="hljs-type">int</span> <span class="hljs-title">main</span><span class="hljs-params">()</span> </span>&#123;<br>    <span class="hljs-built_in">test01</span>();<br>    <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;<br>&#125;<br></code></pre></td></tr></table></figure>















<h2 id="模板"><a href="#模板" class="headerlink" title="模板"></a>模板</h2><p><strong>概念</strong>：</p>
<p>模板就是建立通用的模具，大大提高复用性</p>
<p><strong>特点</strong>：</p>
<ul>
<li>模板不可以直接使用，它只是一个框架</li>
<li>模板的通用并不是万能的</li>
</ul>
<h3 id="函数模板"><a href="#函数模板" class="headerlink" title="函数模板"></a>函数模板</h3><ul>
<li>C++另一种编程思想称为<em>泛型编程</em>，主要利用的技术就是模板</li>
<li>C++提供两种模板机制：<strong>函数模板</strong>和<strong>类模板</strong></li>
</ul>
<h4 id="函数模板语法"><a href="#函数模板语法" class="headerlink" title="函数模板语法"></a>函数模板语法</h4><p><strong>作用</strong>：</p>
<p>建立一个通用函数，其返回值类型和形参类型可以不具体制定，用一个虚拟的类型来代表</p>
<p><strong>语法</strong>：</p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs c++"><span class="hljs-keyword">template</span>&lt;<span class="hljs-keyword">typename</span> T&gt;<br>函数声明或定义<br></code></pre></td></tr></table></figure>



<p><strong>解释</strong>：</p>
<p>template  —  声明创建模板</p>
<p>typename  —  表现其后面的符号是一种数据类型，可以用class代替</p>
<p>T  —  通用的数据类型，名称可以替换，通常为大写字母</p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br></pre></td><td class="code"><pre><code class="hljs c++"><span class="hljs-comment">//函数模板</span><br><span class="hljs-keyword">template</span>&lt;<span class="hljs-keyword">typename</span> T&gt;  <span class="hljs-comment">//声明一个函数模板</span><br><span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">myswap</span><span class="hljs-params">(T &amp;a,T &amp;b)</span></span>&#123;<br>    T temp=a;<br>    a=b;<br>    b=a;<br>&#125;<br><br><span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">swapInt</span><span class="hljs-params">(<span class="hljs-type">int</span> &amp;a,<span class="hljs-type">int</span> &amp;b)</span></span>&#123;<br>    <span class="hljs-type">int</span> temp=a;<br>    a=b;<br>    b=temp;<br>&#125;<br><br><span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">swapDouble</span><span class="hljs-params">(<span class="hljs-type">double</span> &amp;a,<span class="hljs-type">double</span> &amp;b)</span></span>&#123;<br>    <span class="hljs-type">double</span> temp=a;<br>    a=b;<br>    b=temp;<br>&#125;<br><br><span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">test01</span><span class="hljs-params">()</span></span>&#123;<br>    <span class="hljs-type">int</span> a=<span class="hljs-number">10</span>;<br>    <span class="hljs-type">int</span> b=<span class="hljs-number">20</span>;<br>    <span class="hljs-comment">//swapInt(a,b);</span><br>    <span class="hljs-comment">//利用函数模板交换</span><br>    <span class="hljs-comment">//两种方式使用函数模板</span><br>    <span class="hljs-comment">//1. 自动类型推导</span><br>    <span class="hljs-built_in">myswap</span>(a,b);<br>    <span class="hljs-comment">//2. 显示指定类型</span><br>    <span class="hljs-built_in">myswap</span>&lt;<span class="hljs-type">int</span>&gt;(a,b);<br>    cout&lt;&lt;<span class="hljs-string">&quot;a= &quot;</span>&lt;&lt;a&lt;&lt;endl;<br>    cout&lt;&lt;<span class="hljs-string">&quot;b= &quot;</span>&lt;&lt;b&lt;&lt;endl;<br>    <span class="hljs-type">double</span> c=<span class="hljs-number">1.1</span>;<br>    <span class="hljs-type">double</span> d=<span class="hljs-number">2.2</span>;<br>    cout&lt;&lt;<span class="hljs-string">&quot;c= &quot;</span>&lt;&lt;c&lt;&lt;endl;<br>    cout&lt;&lt;<span class="hljs-string">&quot;d= &quot;</span>&lt;&lt;d&lt;&lt;endl;<br>&#125;<br></code></pre></td></tr></table></figure>

<blockquote>
<p><strong>总结</strong>：</p>
<ul>
<li>函数模板利用关键词template</li>
<li>使用函数模板有两种方式：自动类型推导、显示指定类型</li>
<li>模板的目的是为了提高复用性，将类型参数化</li>
</ul>
</blockquote>
<h4 id="函数模板注意事项"><a href="#函数模板注意事项" class="headerlink" title="函数模板注意事项"></a>函数模板注意事项</h4><p><strong>注意事项</strong>：</p>
<ul>
<li>自动类型推导，必须推到出一致的数据类型T，才可以使用</li>
<li>模板必须要确定出T的数据类型，才可以使用</li>
</ul>
<p>示例：</p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><code class="hljs c++"><span class="hljs-function"><span class="hljs-keyword">template</span>&lt;<span class="hljs-keyword">class</span> T&gt;</span><br><span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">myswap</span><span class="hljs-params">(T&amp;a,T&amp;b)</span></span>&#123;<br>    T temp=a;<br>    a=b;<br>    b=temp;<br>&#125;<br><br><span class="hljs-comment">//模板必须要确定出T的数据类型，才可以使用</span><br><span class="hljs-function"><span class="hljs-keyword">template</span>&lt;<span class="hljs-keyword">class</span> T&gt;</span><br><span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">func</span><span class="hljs-params">()</span></span>&#123;<br>    cout&lt;&lt;<span class="hljs-string">&quot;func调用&quot;</span>&lt;&lt;endl;<br>&#125;<br><br><br><span class="hljs-comment">//自动类型推导，必须推到出一致的数据类型T，才可以使用</span><br><span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">test01</span><span class="hljs-params">()</span></span>&#123;<br>    <span class="hljs-type">int</span> a=<span class="hljs-number">10</span>;<br>    <span class="hljs-type">int</span> b=<span class="hljs-number">20</span>;<br>    <span class="hljs-type">char</span> c=<span class="hljs-string">&#x27;c&#x27;</span>;<br>    <span class="hljs-built_in">myswap</span>(a,b);<br>    <span class="hljs-built_in">myswap</span>(a,c);<span class="hljs-comment">//错误，数据类型不同</span><br>    <span class="hljs-built_in">func</span>&lt;<span class="hljs-type">int</span>&gt;();<span class="hljs-comment">//如果函数没有用到T，调用时，也必须需要给出T才能调用</span><br>&#125;<br></code></pre></td></tr></table></figure>











<h4 id="普通函数与函数模板的区别"><a href="#普通函数与函数模板的区别" class="headerlink" title="普通函数与函数模板的区别"></a>普通函数与函数模板的区别</h4><p><strong>普通函数和函数模板的区别</strong>：</p>
<ul>
<li>普通函数调用时可以发生自动类型转换(隐式类型转换)</li>
<li>函数模板调用时，如果利用自动类型推导，不会发生隐式类型转换</li>
<li>如果利用显示指定类型的方式，可以发生隐式类型转换</li>
</ul>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><code class="hljs c++"><span class="hljs-comment">//普通函数</span><br><span class="hljs-function"><span class="hljs-type">int</span> <span class="hljs-title">myAdd01</span><span class="hljs-params">(<span class="hljs-type">int</span> a,<span class="hljs-type">int</span> b)</span></span>&#123;<br>    <span class="hljs-keyword">return</span> a+b;<br>&#125;<br><span class="hljs-comment">//函数模板</span><br><span class="hljs-function"><span class="hljs-keyword">template</span>&lt;<span class="hljs-keyword">class</span> T&gt;</span><br><span class="hljs-function">T <span class="hljs-title">myAdd02</span><span class="hljs-params">(T a,T b)</span></span>&#123;<br>    <span class="hljs-keyword">return</span> a+b;<br>&#125;   <br><br><span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">test01</span><span class="hljs-params">()</span></span>&#123;<br>    <span class="hljs-type">int</span> a=<span class="hljs-number">10</span>;<br>    <span class="hljs-type">int</span> b=<span class="hljs-number">20</span>;<br>    <span class="hljs-type">char</span> c=<span class="hljs-string">&#x27;c&#x27;</span>;<span class="hljs-comment">//普通函数调用会把传入类型进行一个强制转换</span><br>    <span class="hljs-comment">//自动类型推导</span><br>    <span class="hljs-built_in">myAdd02</span>(a,c);<span class="hljs-comment">//模板函数使用自动类型推导调用不会发生强制转换</span><br>    <span class="hljs-comment">//显示指定类型</span><br>    <span class="hljs-built_in">myAdd02</span>&lt;<span class="hljs-type">int</span>&gt;(a,c);<span class="hljs-comment">//模板函数使用显示指定类型调用，能够发生类型转换的</span><br>    cout&lt;&lt;<span class="hljs-built_in">myAdd01</span>(a,c)&lt;&lt;endl;<br>&#125;<br></code></pre></td></tr></table></figure>

<blockquote>
<p><strong>总结</strong>：</p>
<p>建议使用指定类型的方，调用函数模板，因为可以自己确定通用类型T</p>
</blockquote>
<h4 id="普通函数和函数模板的调用规则"><a href="#普通函数和函数模板的调用规则" class="headerlink" title="普通函数和函数模板的调用规则"></a>普通函数和函数模板的调用规则</h4><p><strong>调用规则如下</strong>：</p>
<ul>
<li>如果函数模板和普通函数都可以实现，优先调用普通函数</li>
<li>可以通过空模板参数列表来强制调用函数模板</li>
<li>函数模板也可以发生重载</li>
<li>如果函数模板可以产生更好的匹配，优先调用函数模板</li>
</ul>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><code class="hljs c++"><span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">myprint</span><span class="hljs-params">(<span class="hljs-type">int</span> a,<span class="hljs-type">int</span> b)</span></span><br><span class="hljs-function"></span>&#123;<br>    cout&lt;&lt;<span class="hljs-string">&quot;调用的普通函数&quot;</span>&lt;&lt;endl;<br>&#125;<br><br><span class="hljs-function"><span class="hljs-keyword">template</span>&lt;<span class="hljs-keyword">class</span> T&gt;</span><br><span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">myprint</span><span class="hljs-params">(T a,T b)</span></span>&#123;<br>    cout&lt;&lt;<span class="hljs-string">&quot;调用的模板&quot;</span>&lt;&lt;endl;<br>&#125;<br><br><span class="hljs-function"><span class="hljs-keyword">template</span>&lt;<span class="hljs-keyword">class</span> T&gt;</span><br><span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">myprint</span><span class="hljs-params">(T a,T b,T c)</span></span>&#123;<br>    cout&lt;&lt;<span class="hljs-string">&quot;调用的重载模板&quot;</span>&lt;&lt;endl;<br>&#125;<br><br><span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">test01</span><span class="hljs-params">()</span></span>&#123;<br>    <span class="hljs-type">int</span> a=<span class="hljs-number">10</span>;<br>    b=<span class="hljs-number">20</span>;<br>    <span class="hljs-built_in">myprint</span>(a,b); <span class="hljs-comment">//优先调用普通函数</span><br>   	<span class="hljs-comment">//通过空模板参数列表，强制调用函数调用</span><br>    myprint&lt;&gt;(a,b);<br>    <span class="hljs-built_in">myprint</span>(a,b,<span class="hljs-number">100</span>);<br>    <span class="hljs-comment">//如果函数模板可以产生更好的匹配，优先调用函数模板</span><br>    <span class="hljs-type">char</span> c1=<span class="hljs-string">&#x27;a&#x27;</span>;<br>    <span class="hljs-type">char</span> c2=<span class="hljs-string">&#x27;b&#x27;</span>;<br>    <span class="hljs-built_in">myprint</span>(c1,c2); <span class="hljs-comment">//普通函数需要转类型，而模板不需要，所以优先调用模板函数</span><br>&#125;<br></code></pre></td></tr></table></figure>

<blockquote>
<p><strong>总结</strong>：</p>
<p>既然有了函数模板，最好就不要提供同名普通函数，否则容易出现二义性</p>
</blockquote>
<h4 id="模板的局限性以及具体化"><a href="#模板的局限性以及具体化" class="headerlink" title="模板的局限性以及具体化"></a>模板的局限性以及具体化</h4><p><strong>局限性</strong>：</p>
<ul>
<li>模板的通用性并不是万能的</li>
</ul>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs c++"><span class="hljs-function"><span class="hljs-keyword">template</span>&lt;<span class="hljs-keyword">class</span> T&gt;</span><br><span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">f</span><span class="hljs-params">(T a,T b)</span></span>&#123;<br>    a=b;<br>&#125;<br></code></pre></td></tr></table></figure>

<p>在上述代码中提供的赋值操作，如果传入的a和b是一个数组，就无法实现了</p>
<p>再例如：</p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs c++"><span class="hljs-function"><span class="hljs-keyword">template</span>&lt;<span class="hljs-keyword">class</span> T&gt;</span><br><span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">f</span><span class="hljs-params">(T a,T b)</span></span>&#123;<br>    <span class="hljs-keyword">if</span>(a&gt;b)&#123;<br>        ....<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure>

<p>在上述代码中，如果T的数据类型传入是像Person这样自定义的数据类型，也无法正常运行</p>
<p>因此C++为了解决这种问题，提供了模板的重载，可以为这些<strong>特定的类型</strong>提供<strong>具体化的模板</strong></p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br></pre></td><td class="code"><pre><code class="hljs c++"><span class="hljs-keyword">class</span> <span class="hljs-title class_">Person</span>&#123;<br><span class="hljs-keyword">public</span>:<br>    <span class="hljs-built_in">Person</span>(string name,<span class="hljs-type">int</span> age)&#123;<br>        <span class="hljs-keyword">this</span>-&gt;m_name=name;<br>        <span class="hljs-keyword">this</span>-&gt;m_age=age;<br>    &#125;<br>    string m_name;<br>    <span class="hljs-type">int</span> m_age;<br>&#125;;<br><br><br><span class="hljs-function"><span class="hljs-keyword">template</span>&lt;<span class="hljs-keyword">class</span> T&gt;</span><br><span class="hljs-function"><span class="hljs-type">bool</span> <span class="hljs-title">mycompare</span><span class="hljs-params">(T &amp;a,T &amp;b)</span></span>&#123;<br>    <span class="hljs-keyword">if</span>(a==b)&#123;<br>        <span class="hljs-keyword">return</span> <span class="hljs-literal">true</span>;<br>    &#125;<span class="hljs-keyword">else</span>&#123;<br>        <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>;<br>    &#125;<br>&#125;<br><span class="hljs-comment">//利用具体化自定义类型的版本实现代码，具体化优先调用</span><br><span class="hljs-keyword">template</span>&lt;&gt;<br><span class="hljs-function"><span class="hljs-type">bool</span> <span class="hljs-title">mycompare</span><span class="hljs-params">(Person &amp;p1,Person &amp;p2)</span></span>&#123;<br>    <span class="hljs-keyword">if</span>(p1.m_name==p2.m_name&amp;&amp;p1.m_age==p2.m_age)&#123;<br>        <span class="hljs-keyword">return</span> <span class="hljs-literal">true</span>;<br>    &#125;<span class="hljs-keyword">else</span>&#123;<br>        <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>;<br>    &#125;<br>&#125;<br><br><span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">test01</span><span class="hljs-params">()</span></span>&#123;<br>    <span class="hljs-type">int</span> a=<span class="hljs-number">10</span>;<br>    <span class="hljs-type">int</span> b=<span class="hljs-number">20</span>;<br>    <span class="hljs-type">bool</span> ret=<span class="hljs-built_in">mycompare</span>(a,b);<br>    <span class="hljs-keyword">if</span>(ret)&#123;<br>        cout&lt;&lt;<span class="hljs-string">&quot;a==b&quot;</span>&lt;&lt;endl;<br>    &#125;<span class="hljs-keyword">else</span>&#123;<br>        cout&lt;&lt;<span class="hljs-string">&quot;a!=b&quot;</span>&lt;&lt;endl;<br>    &#125;<br>&#125;<br><br><span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">test02</span><span class="hljs-params">()</span></span>&#123;<br>    <span class="hljs-function">Person <span class="hljs-title">p1</span><span class="hljs-params">(<span class="hljs-string">&quot;Tom&quot;</span>,<span class="hljs-number">10</span>)</span></span>;<br>    <span class="hljs-function">Person <span class="hljs-title">p2</span><span class="hljs-params">(<span class="hljs-string">&quot;Tom&quot;</span>,<span class="hljs-number">10</span>)</span></span>;<br>    <span class="hljs-type">bool</span> ret=<span class="hljs-built_in">mycompare</span>(p1,p2);<br>    <span class="hljs-keyword">if</span>(ret)&#123;<br>        cout&lt;&lt;<span class="hljs-string">&quot;p1==p2&quot;</span>&lt;&lt;endl;<br>    &#125;<span class="hljs-keyword">else</span>&#123;<br>        cout&lt;&lt;<span class="hljs-string">&quot;p1!=p2&quot;</span>&lt;&lt;endl;<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure>

<blockquote>
<p><strong>总结</strong>：</p>
<ul>
<li>利用具体化的模板，可以解决自定义类型的通用化</li>
<li>学习模板并不是为了写模板，而是在STL能够运用系统提供的模板</li>
</ul>
</blockquote>
<h3 id="类模板"><a href="#类模板" class="headerlink" title="类模板"></a>类模板</h3><h4 id="类模板语法"><a href="#类模板语法" class="headerlink" title="类模板语法"></a>类模板语法</h4><p><strong>作用</strong>：</p>
<ul>
<li>建立一个通用类，类中的成员数据类型可以不具体制定，用一个虚拟的类型来代表</li>
</ul>
<p><strong>语法</strong>:<code>template&lt;class T&gt;</code> </p>
<p>​			类</p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><code class="hljs c++"><span class="hljs-keyword">template</span>&lt;<span class="hljs-keyword">class</span> <span class="hljs-title class_">nametype</span>,<span class="hljs-keyword">class</span> <span class="hljs-title class_">agetype</span>&gt;<br><span class="hljs-keyword">class</span> <span class="hljs-title class_">Person</span>&#123;<br><span class="hljs-keyword">public</span>:<br>    <span class="hljs-built_in">Person</span>(nametype name,agetype age)&#123;<br>        <span class="hljs-keyword">this</span>-&gt;m_name=name;<br>        <span class="hljs-keyword">this</span>-&gt;m_age=age;<br>    &#125;<br>    <span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">show</span><span class="hljs-params">()</span></span>&#123;<br>        cout&lt;&lt;<span class="hljs-string">&quot;name: &quot;</span>&lt;&lt;<span class="hljs-keyword">this</span>-&gt;m_name&lt;&lt;<span class="hljs-string">&quot;age= &quot;</span>&lt;&lt;<span class="hljs-keyword">this</span>-&gt;m_age&lt;&lt;endl;<br>    &#125;<br>    nametype m_name;<br>    agetype m_age;<br>&#125;;<br><br><br><span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">test01</span><span class="hljs-params">()</span></span>&#123;<br>    <span class="hljs-function">Person&lt;string,<span class="hljs-type">int</span>&gt; <span class="hljs-title">p1</span><span class="hljs-params">(<span class="hljs-string">&quot;孙悟空&quot;</span>,<span class="hljs-number">999</span>)</span></span>;<br>&#125;<br></code></pre></td></tr></table></figure>











<h4 id="类模板与函数模板区别"><a href="#类模板与函数模板区别" class="headerlink" title="类模板与函数模板区别"></a>类模板与函数模板区别</h4><p><strong>区别</strong>：</p>
<ul>
<li>类模板没有自动类型推导的使用方式</li>
<li>类模板在模板参数列表中可以有默认参数</li>
</ul>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><code class="hljs c++"><span class="hljs-comment">//agetype默认参数为int</span><br><span class="hljs-keyword">template</span>&lt;<span class="hljs-keyword">class</span> <span class="hljs-title class_">nametype</span>,<span class="hljs-keyword">class</span> <span class="hljs-title class_">agetype</span>=<span class="hljs-type">int</span>&gt;<br><span class="hljs-keyword">class</span> Person&#123;<br><span class="hljs-keyword">public</span>:<br>    <span class="hljs-built_in">Person</span>(nametype name,agetype age)&#123;<br>        <span class="hljs-keyword">this</span>-&gt;m_name=name;<br>        <span class="hljs-keyword">this</span>-&gt;m_age=age;<br>    &#125;<br>    <span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">show</span><span class="hljs-params">()</span></span>&#123;<br>        cout&lt;&lt;<span class="hljs-string">&quot;name: &quot;</span>&lt;&lt;<span class="hljs-keyword">this</span>-&gt;m_name&lt;&lt;<span class="hljs-string">&quot;age= &quot;</span>&lt;&lt;<span class="hljs-keyword">this</span>-&gt;m_age&lt;&lt;endl;<br>    &#125;<br>    nametype m_name;<br>    agetype m_age;<br>&#125;;<br><br><br><span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">test01</span><span class="hljs-params">()</span></span>&#123;<br>    <span class="hljs-function">Person <span class="hljs-title">p</span><span class="hljs-params">(<span class="hljs-string">&quot;孙悟空&quot;</span>,<span class="hljs-number">999</span>)</span></span>; <span class="hljs-comment">//报错，类模板是没有自动类型推导</span><br>    Person p1&lt;string,<span class="hljs-type">int</span>&gt;<span class="hljs-built_in">p1</span>(<span class="hljs-string">&quot;孙悟空&quot;</span>,<span class="hljs-number">999</span>);<br>	Person p1&lt;string&gt;<span class="hljs-built_in">p1</span>(<span class="hljs-string">&quot;孙悟空&quot;</span>,<span class="hljs-number">999</span>);<span class="hljs-comment">//模板类型默认为int，所以不写就用int</span><br>    p1.<span class="hljs-built_in">show</span>();<br>&#125;<br></code></pre></td></tr></table></figure>

<blockquote>
<p><strong>总结</strong>：</p>
<ul>
<li>类模板使用只能用显示指定类型方式</li>
<li>类模板中的模板参数列表可以有默认参数</li>
</ul>
</blockquote>
<h4 id="类模板中成员函数创建时机"><a href="#类模板中成员函数创建时机" class="headerlink" title="类模板中成员函数创建时机"></a>类模板中成员函数创建时机</h4><p>类模板中成员函数和普通类中成员函数创建时机是有区别的：</p>
<ul>
<li>普通类中的成员函数一开始就可以创建</li>
<li>类模板中的成员函数在调用时才创建</li>
</ul>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><code class="hljs c++"><span class="hljs-keyword">class</span> <span class="hljs-title class_">Person1</span>&#123;<br><span class="hljs-keyword">public</span>:<br>    <span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">show1</span><span class="hljs-params">()</span></span>&#123;<br>        cout&lt;&lt;<span class="hljs-string">&quot;person1show&quot;</span>&lt;&lt;endl;<br>    &#125;<br>&#125;;<br><br><span class="hljs-keyword">class</span> <span class="hljs-title class_">Person2</span>&#123;<br><span class="hljs-keyword">public</span>:<br>    <span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">show2</span><span class="hljs-params">()</span></span>&#123;<br>        cout&lt;&lt;<span class="hljs-string">&quot;person2show&quot;</span>&lt;&lt;endl;<br>    &#125;<br>&#125;;<br><br><span class="hljs-keyword">template</span>&lt;<span class="hljs-keyword">class</span> <span class="hljs-title class_">T</span>&gt;<br><span class="hljs-keyword">class</span> <span class="hljs-title class_">myclass</span>&#123;<br><span class="hljs-keyword">public</span>:<br>    T obj;<br>    <span class="hljs-comment">//类模板中成员函数</span><br>    <span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">func1</span><span class="hljs-params">()</span></span>&#123;<br>        obj.<span class="hljs-built_in">show1</span>();<br>    &#125;<br>    <span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">func2</span><span class="hljs-params">()</span></span>&#123;<br>        obj.<span class="hljs-built_in">show2</span>();<br>    &#125;<br>&#125;;<br><br><span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">test01</span><span class="hljs-params">()</span></span>&#123;<br>    myclass&lt;Person1&gt;m;<br>    m.<span class="hljs-built_in">func1</span>();<br>    <span class="hljs-comment">//m.func2();</span><br>&#125;<br></code></pre></td></tr></table></figure>

<blockquote>
<p><strong>总结</strong>：类模板中的成员函数并不是一开始就创建的，在调用时才去创建</p>
</blockquote>
<h4 id="类模板对象做函数参数"><a href="#类模板对象做函数参数" class="headerlink" title="类模板对象做函数参数"></a>类模板对象做函数参数</h4><p>类模板实例化出的对象，向函数传参的方式</p>
<p>三种传参方式：</p>
<ul>
<li>指定传入的类型  —  直接显示对象的数据类型</li>
<li>参数模板化  —  将对象中的参数变为模板进行传递</li>
<li>整个类模板化  —  将这个对象类型模板化进行传递</li>
</ul>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br></pre></td><td class="code"><pre><code class="hljs c++"><span class="hljs-keyword">template</span>&lt;<span class="hljs-keyword">class</span> <span class="hljs-title class_">T1</span>,<span class="hljs-keyword">class</span> <span class="hljs-title class_">T2</span>=<span class="hljs-type">int</span>&gt;<br><span class="hljs-keyword">class</span> Person&#123;<br><span class="hljs-keyword">public</span>:<br>    <span class="hljs-built_in">Person</span>(T1 name,T2 age)&#123;<br>        <span class="hljs-keyword">this</span>-&gt;m_name=name;<br>        <span class="hljs-keyword">this</span>-&gt;m_age=age;<br>    &#125;<br>    <span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">show</span><span class="hljs-params">()</span></span>&#123;<br>        cout&lt;&lt;<span class="hljs-string">&quot;name: &quot;</span>&lt;&lt;<span class="hljs-keyword">this</span>-&gt;m_name&lt;&lt;<span class="hljs-string">&quot;age= &quot;</span>&lt;&lt;<span class="hljs-keyword">this</span>-&gt;m_age&lt;&lt;endl;<br>    &#125;<br>    T1 m_name;<br>    T2 m_age;<br>&#125;;<br><br><span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">test01</span><span class="hljs-params">()</span></span>&#123;<br>    Person&lt;string,<span class="hljs-type">int</span>&gt;<span class="hljs-built_in">p</span>(<span class="hljs-string">&quot;孙悟空&quot;</span>,<span class="hljs-number">100</span>);<br>    Person&lt;string,<span class="hljs-type">int</span>&gt;<span class="hljs-built_in">p1</span>(<span class="hljs-string">&quot;孙悟空&quot;</span>,<span class="hljs-number">100</span>);<br>    Person&lt;string,<span class="hljs-type">int</span>&gt;<span class="hljs-built_in">p2</span>(<span class="hljs-string">&quot;孙悟空&quot;</span>,<span class="hljs-number">100</span>);<br>    <span class="hljs-built_in">printp1</span>(p);<br>    <span class="hljs-built_in">printp2</span>(p1);<br>    <span class="hljs-built_in">printp3</span>(p2);<br>&#125;<br><br><span class="hljs-comment">//指定传入类型(最常用)</span><br><span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">printp1</span><span class="hljs-params">(Person&lt;string,<span class="hljs-type">int</span>&gt;&amp;p)</span></span>&#123;<br>    p.<span class="hljs-built_in">show</span>();<br>&#125;<br><br><span class="hljs-comment">//参数模板化</span><br><span class="hljs-function"><span class="hljs-keyword">template</span>&lt;<span class="hljs-keyword">class</span> T1,<span class="hljs-keyword">class</span> T2&gt;</span><br><span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">printp2</span><span class="hljs-params">(Person&lt;T1,T2&gt;&amp;p)</span></span>&#123;<br>    p.<span class="hljs-built_in">show</span>();<br>    cout&lt;&lt;<span class="hljs-string">&quot;T1的类型为：&quot;</span>&lt;&lt;<span class="hljs-built_in">typeid</span>(T1).<span class="hljs-built_in">name</span>()&lt;&lt;endl; <span class="hljs-comment">//看推导出来的T1是什么类型</span><br>&#125;<br><br><span class="hljs-comment">//整个类模板化</span><br><span class="hljs-function"><span class="hljs-keyword">template</span>&lt;<span class="hljs-keyword">class</span> T&gt;</span><br><span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">printp3</span><span class="hljs-params">(T &amp;p)</span></span>&#123;<br>    p.<span class="hljs-built_in">show</span>();<br>&#125;<br></code></pre></td></tr></table></figure>

<blockquote>
<p><strong>总结</strong>：</p>
<ul>
<li>通过类模板创建的对象，可以有三种方式向函数中进行传参</li>
<li>使用比较广泛的是第一种：指定传入的类型</li>
</ul>
</blockquote>
<h4 id="类模板与继承"><a href="#类模板与继承" class="headerlink" title="类模板与继承"></a>类模板与继承</h4><p>当类模板碰到继承时，需要注意一下几点：</p>
<ul>
<li>当子类继承的父类是一个类模板时，子类在声明的时候，要指定出父类中T的类型</li>
<li>如果不指定，编译器无法给子类分配内存</li>
<li>如果想灵活指定出父类中T的类型，子类也需要变为类模板</li>
</ul>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><code class="hljs c++"><span class="hljs-keyword">template</span>&lt;<span class="hljs-keyword">class</span> <span class="hljs-title class_">T</span>&gt;<br><span class="hljs-keyword">class</span> <span class="hljs-title class_">Base</span>&#123;<br><span class="hljs-keyword">public</span>:<br>    T m;<br>&#125;;<br><br><span class="hljs-comment">//class Son:public Base //错误，c++编译器需要给子类分配内存，必须知道父类中T的类型才可以向下继承</span><br><span class="hljs-keyword">class</span> <span class="hljs-title class_">Son</span>:<span class="hljs-keyword">public</span> Base&lt;<span class="hljs-type">int</span>&gt;&#123;&#125;;<br><br><span class="hljs-comment">//如果想灵活指定出父类中T的类型，子类也需要变为类模板</span><br><span class="hljs-keyword">template</span>&lt;<span class="hljs-keyword">class</span> <span class="hljs-title class_">T1</span>,<span class="hljs-keyword">class</span> <span class="hljs-title class_">T2</span>&gt;<br><span class="hljs-keyword">class</span> <span class="hljs-title class_">Son2</span>:<span class="hljs-keyword">public</span> Base&lt;T2&gt;&#123;<br><span class="hljs-keyword">public</span>:<br>    <span class="hljs-built_in">Son2</span>()&#123;<br>        cout&lt;&lt;<span class="hljs-string">&quot;T1的类型为：&quot;</span>&lt;&lt;<span class="hljs-built_in">typeid</span>(T1).<span class="hljs-built_in">name</span>()&lt;&lt;endl;<br>    	cout&lt;&lt;<span class="hljs-string">&quot;T2的类型为：&quot;</span>&lt;&lt;<span class="hljs-built_in">typeid</span>(T2).<span class="hljs-built_in">name</span>()&lt;&lt;endl;<br>    &#125;<br>    T1 obj;<br>&#125;;<br><br><span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">test01</span><span class="hljs-params">()</span></span>&#123;<br>    Son s1;<br>    Son2&lt;<span class="hljs-type">int</span>,<span class="hljs-type">char</span>&gt;s2;<br>    <br>&#125;<br></code></pre></td></tr></table></figure>











<h4 id="类模板成员函数类外实现"><a href="#类模板成员函数类外实现" class="headerlink" title="类模板成员函数类外实现"></a>类模板成员函数类外实现</h4><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><code class="hljs c++"><span class="hljs-keyword">template</span>&lt;<span class="hljs-keyword">class</span> <span class="hljs-title class_">T1</span>,<span class="hljs-keyword">class</span> <span class="hljs-title class_">T2</span>&gt;<br><span class="hljs-keyword">class</span> <span class="hljs-title class_">Person</span>&#123;<br><span class="hljs-keyword">public</span>:<br>    <span class="hljs-built_in">Person</span>(T1 name,T2 age);<br>    <span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">show</span><span class="hljs-params">()</span></span>;<br>    T1 m_name;<br>    T2 m_age;<br>&#125;;<br><br><span class="hljs-comment">//构造函数的类外实现</span><br><span class="hljs-keyword">template</span>&lt;<span class="hljs-keyword">class</span> <span class="hljs-title class_">T1</span>,<span class="hljs-keyword">class</span> <span class="hljs-title class_">T2</span>&gt;<br>Person&lt;T1,T2&gt;::<span class="hljs-built_in">Person</span>(T1 name,T2 age)&#123;<br>    <span class="hljs-keyword">this</span>-&gt;m_name=name;<br>    <span class="hljs-keyword">this</span>-&gt;m_age=age;<br>&#125;<br><br><span class="hljs-comment">//成员函数的类外实现</span><br><span class="hljs-keyword">template</span>&lt;<span class="hljs-keyword">class</span> <span class="hljs-title class_">T1</span>,<span class="hljs-keyword">class</span> <span class="hljs-title class_">T2</span>&gt;<br><span class="hljs-type">void</span> Person&lt;T1,T2&gt;::<span class="hljs-built_in">show</span>()&#123;<br>    cout&lt;&lt;<span class="hljs-string">&quot;name: &quot;</span>&lt;&lt;<span class="hljs-keyword">this</span>-&gt;m_name&lt;&lt;<span class="hljs-string">&quot;age= &quot;</span>&lt;&lt;<span class="hljs-keyword">this</span>-&gt;m_age&lt;&lt;endl;<br>&#125;<br><br><span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">test01</span><span class="hljs-params">()</span></span>&#123;<br>    Person&lt;string,<span class="hljs-type">int</span>&gt;<span class="hljs-built_in">P</span>(<span class="hljs-string">&quot;tom&quot;</span>,<span class="hljs-number">20</span>);<br>    p.<span class="hljs-built_in">show</span>();<br>&#125;<br></code></pre></td></tr></table></figure>

<blockquote>
<p><strong>总结</strong>：类模板中成员函数类外实现时，需要加入模板的参数列表</p>
</blockquote>
<h4 id="类模板分文件编写"><a href="#类模板分文件编写" class="headerlink" title="类模板分文件编写"></a>类模板分文件编写</h4><p>类模板中成员函数创建时机是在调用阶段，导致分文件编写时链接不到</p>
<p><strong>解决方法</strong>：</p>
<ol>
<li>直接包含.cpp源文件</li>
<li>将声明和实现写到同一个文件中，并更改后缀名为.hpp,hpp是约定的名称，并不是强制</li>
</ol>
<p><strong>分文件编写的.h写法</strong>：</p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs c++"><span class="hljs-meta">#<span class="hljs-keyword">pragma</span> once  <span class="hljs-comment">//防止重复</span></span><br><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;iostream&gt;</span></span><br><span class="hljs-keyword">using</span> <span class="hljs-keyword">namespace</span> std;<br></code></pre></td></tr></table></figure>





<p>示例：</p>
<p>&#x2F;&#x2F;第一种解决方法</p>
<p>Person.h代码：</p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><code class="hljs c++"><span class="hljs-meta">#<span class="hljs-keyword">pragma</span> once </span><br><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;iostream&gt;</span></span><br><span class="hljs-keyword">using</span> <span class="hljs-keyword">namespace</span> std;<br><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;string&gt;</span></span><br><br><span class="hljs-keyword">template</span>&lt;<span class="hljs-keyword">class</span> <span class="hljs-title class_">T1</span>,<span class="hljs-keyword">class</span> <span class="hljs-title class_">T2</span>&gt;<br><span class="hljs-keyword">class</span> <span class="hljs-title class_">Person</span>&#123;<br><span class="hljs-keyword">public</span>:<br>    <span class="hljs-built_in">Person</span>(T1 name,T2 age);<br>    <span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">show</span><span class="hljs-params">()</span></span>;<br>    T1 m_name;<br>    T2 m_age;<br>&#125;;<br></code></pre></td></tr></table></figure>



<p>Person.cpp代码:</p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><code class="hljs c++"><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&quot;Person.h&quot;</span></span><br><br><span class="hljs-keyword">template</span>&lt;<span class="hljs-keyword">class</span> <span class="hljs-title class_">T1</span>,<span class="hljs-keyword">class</span> <span class="hljs-title class_">T2</span>&gt;<br>Person&lt;T1,T2&gt;::<span class="hljs-built_in">Person</span>(T1 name,T2 age)&#123;<br>    <span class="hljs-keyword">this</span>-&gt;m_name=name;<br>    <span class="hljs-keyword">this</span>-&gt;m_age=age;<br>&#125;<br><br><span class="hljs-keyword">template</span>&lt;<span class="hljs-keyword">class</span> <span class="hljs-title class_">T1</span>,<span class="hljs-keyword">class</span> <span class="hljs-title class_">T2</span>&gt;<br><span class="hljs-type">void</span> Person&lt;T1,T2&gt;::<span class="hljs-built_in">show</span>()&#123;<br>    cout&lt;&lt;<span class="hljs-string">&quot;name: &quot;</span>&lt;&lt;<span class="hljs-keyword">this</span>-&gt;m_name&lt;&lt;<span class="hljs-string">&quot;age= &quot;</span>&lt;&lt;<span class="hljs-keyword">this</span>-&gt;m_age&lt;&lt;endl;<br>&#125;<br></code></pre></td></tr></table></figure>



<p>main.cpp代码:</p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><code class="hljs c++"><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&quot;Person.cpp&quot;</span></span><br><br><span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">test01</span><span class="hljs-params">()</span></span>&#123;<br>    Person&lt;string,<span class="hljs-type">int</span>&gt;<span class="hljs-built_in">P</span>(<span class="hljs-string">&quot;tom&quot;</span>,<span class="hljs-number">20</span>);<br>    P.<span class="hljs-built_in">show</span>();<br>&#125;<br><br><span class="hljs-function"><span class="hljs-type">int</span> <span class="hljs-title">main</span><span class="hljs-params">()</span></span>&#123;<br>    <span class="hljs-built_in">test01</span>();<br>    <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;<br>&#125;<br></code></pre></td></tr></table></figure>



<p>&#x2F;&#x2F;第二种解决方法</p>
<p>将.h和.cpp中的内容写到一起，将后缀名改为.hpp文件</p>
<p>.hpp被称为类模板</p>
<p>Person.hpp</p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><code class="hljs c++"><span class="hljs-meta">#<span class="hljs-keyword">pragma</span> once </span><br><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;iostream&gt;</span></span><br><span class="hljs-keyword">using</span> <span class="hljs-keyword">namespace</span> std;<br><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;string&gt;</span></span><br><br><span class="hljs-keyword">template</span>&lt;<span class="hljs-keyword">class</span> <span class="hljs-title class_">T1</span>,<span class="hljs-keyword">class</span> <span class="hljs-title class_">T2</span>&gt;<br><span class="hljs-keyword">class</span> <span class="hljs-title class_">Person</span>&#123;<br><span class="hljs-keyword">public</span>:<br>    <span class="hljs-built_in">Person</span>(T1 name,T2 age);<br>    <span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">show</span><span class="hljs-params">()</span></span>;<br>    T1 m_name;<br>    T2 m_age;<br>&#125;;<br><br><span class="hljs-keyword">template</span>&lt;<span class="hljs-keyword">class</span> <span class="hljs-title class_">T1</span>,<span class="hljs-keyword">class</span> <span class="hljs-title class_">T2</span>&gt;<br>Person&lt;T1,T2&gt;::<span class="hljs-built_in">Person</span>(T1 name,T2 age)&#123;<br>    <span class="hljs-keyword">this</span>-&gt;m_name=name;<br>    <span class="hljs-keyword">this</span>-&gt;m_age=age;<br>&#125;<br><br><span class="hljs-keyword">template</span>&lt;<span class="hljs-keyword">class</span> <span class="hljs-title class_">T1</span>,<span class="hljs-keyword">class</span> <span class="hljs-title class_">T2</span>&gt;<br><span class="hljs-type">void</span> Person&lt;T1,T2&gt;::<span class="hljs-built_in">show</span>()&#123;<br>    cout&lt;&lt;<span class="hljs-string">&quot;name: &quot;</span>&lt;&lt;<span class="hljs-keyword">this</span>-&gt;m_name&lt;&lt;<span class="hljs-string">&quot;age= &quot;</span>&lt;&lt;<span class="hljs-keyword">this</span>-&gt;m_age&lt;&lt;endl;<br>&#125;<br></code></pre></td></tr></table></figure>











<h4 id="类模板与友元"><a href="#类模板与友元" class="headerlink" title="类模板与友元"></a>类模板与友元</h4><p>类模板模板配合友元函数的类内和类外实现</p>
<p><strong>全局函数类外实现</strong> - 直接在类内声明友元即可</p>
<p><strong>全局函数类外实现</strong> - 需要提前让编译器知道全局函数的存在</p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br></pre></td><td class="code"><pre><code class="hljs c++"><span class="hljs-comment">//类外实现，需要让编译器提前知道Person类的存在</span><br><span class="hljs-keyword">template</span>&lt;<span class="hljs-keyword">class</span> <span class="hljs-title class_">T1</span>,<span class="hljs-keyword">class</span> <span class="hljs-title class_">T2</span>&gt;<br><span class="hljs-keyword">class</span> <span class="hljs-title class_">Person</span>;<br><br><br><span class="hljs-comment">//通过全局函数打印Person信息</span><br><span class="hljs-keyword">template</span>&lt;<span class="hljs-keyword">class</span> <span class="hljs-title class_">T1</span>,<span class="hljs-keyword">class</span> <span class="hljs-title class_">T2</span>&gt;<br><span class="hljs-keyword">class</span> <span class="hljs-title class_">Person</span>&#123;<br>    <span class="hljs-comment">//全局函数类内实现</span><br>    <span class="hljs-function"><span class="hljs-keyword">friend</span> <span class="hljs-type">void</span> <span class="hljs-title">print</span><span class="hljs-params">(Person&lt;T1,T2&gt;p)</span></span>&#123;<br>        cout&lt;&lt;<span class="hljs-string">&quot;name: &quot;</span>&lt;&lt;p.m_name&lt;&lt;<span class="hljs-string">&quot;age= &quot;</span>&lt;&lt;p.m_age&lt;&lt;endl;<br>    &#125;<br>    <span class="hljs-comment">//全局函数类外实现</span><br>    <span class="hljs-comment">//需要加空模板参数列表</span><br>    <span class="hljs-comment">//如果全局函数是类外实现的话，需要提前让编译器知道全局函数的存在</span><br>    <span class="hljs-keyword">friend</span> <span class="hljs-type">void</span> print1&lt;&gt;(Person&lt;T1,T2&gt;p);<br><span class="hljs-keyword">public</span>:<br>    <span class="hljs-built_in">Person</span>(T1 name,T2 age)&#123;<br>        <span class="hljs-keyword">this</span>-&gt;m_name=name;<br>        <span class="hljs-keyword">this</span>-&gt;m_age=age;<br>    &#125;<br><span class="hljs-keyword">private</span>:<br>    T1 m_name;<br>    T2 m_age;<br>&#125;;<br><br><span class="hljs-function"><span class="hljs-keyword">template</span>&lt;<span class="hljs-keyword">class</span> T1,<span class="hljs-keyword">class</span> T2&gt;</span><br><span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">print</span><span class="hljs-params">(Person&lt;T1,T2&gt; p)</span></span>&#123;<br>    cout&lt;&lt;<span class="hljs-string">&quot;类外实现name: &quot;</span>&lt;&lt;p.m_name&lt;&lt;<span class="hljs-string">&quot;age= &quot;</span>&lt;&lt;p.m_age&lt;&lt;endl;<br>&#125;<br><br><span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">test01</span><span class="hljs-params">()</span></span>&#123;<br>    Person&lt;string,<span class="hljs-type">int</span>&gt;<span class="hljs-built_in">p</span>(<span class="hljs-string">&quot;tom&quot;</span>,<span class="hljs-number">20</span>);<br>    <span class="hljs-built_in">print</span>(p);<br>    <span class="hljs-built_in">print1</span>(p);<br>&#125;<br></code></pre></td></tr></table></figure>

<blockquote>
<p><strong>总结</strong>：建议全局函数做类内实现，用法简单，而且编译器可以直接识别</p>
</blockquote>
<h4 id="类模板案例"><a href="#类模板案例" class="headerlink" title="类模板案例"></a>类模板案例</h4><p>案例描述：实现一个通用的数组类，要求如下：</p>
<ul>
<li>可以对内置数据类型以及自定义数据类型的数据进行存储</li>
<li>将数组中的数据存储在堆区</li>
<li>构造函数中可以传入数组的容量</li>
<li>提供对应的拷贝构造函数以及operator&#x3D;防止浅拷贝问题</li>
<li>提供尾插法和尾删法对数组中的数据进行增加和删除</li>
<li>可以通过下标的方式访问数组中的元素</li>
<li>可以获取数组中当前元素个数和数组的容量</li>
</ul>
<p>myArray.hpp代码：</p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br></pre></td><td class="code"><pre><code class="hljs c++"><span class="hljs-meta">#<span class="hljs-keyword">pragma</span> once</span><br><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;iostream&gt;</span></span><br><span class="hljs-keyword">using</span> <span class="hljs-keyword">namespace</span> std;<br><br><span class="hljs-keyword">template</span>&lt;<span class="hljs-keyword">class</span> <span class="hljs-title class_">T</span>&gt;<br><span class="hljs-keyword">class</span> <span class="hljs-title class_">myArray</span>&#123;<br><span class="hljs-keyword">public</span>:<br>    <span class="hljs-comment">//有参构造</span><br>    <span class="hljs-built_in">myArray</span>(<span class="hljs-type">int</span> capacity)&#123;<br>        <span class="hljs-keyword">this</span>-&gt;m_capacity=capacity;<br>        <span class="hljs-keyword">this</span>-&gt;m_size=<span class="hljs-number">0</span>;<br>        <span class="hljs-keyword">this</span>-&gt;paddress=<span class="hljs-keyword">new</span> T[<span class="hljs-keyword">this</span>-&gt;m_capacity];<br>    &#125;<br>    <span class="hljs-comment">//拷贝构造,深拷贝</span><br>    <span class="hljs-built_in">myArray</span>(<span class="hljs-type">const</span> myArray&amp;arr)&#123;<br>        <span class="hljs-keyword">this</span>-&gt;m_capacity=arr.m_capacity;<br>        <span class="hljs-keyword">this</span>-&gt;m_size=arr.m_size;<br>        <span class="hljs-keyword">this</span>-&gt;paddress=<span class="hljs-keyword">new</span> T[arr.m_capacity];<br>        <span class="hljs-comment">//将arr中的数组都拷贝过来</span><br>        <span class="hljs-keyword">for</span>(<span class="hljs-type">int</span> i=<span class="hljs-number">0</span>;i&lt; <span class="hljs-keyword">this</span>-&gt;m_size;i++)&#123;<br>            <span class="hljs-keyword">this</span>-&gt;paddress[i]=arr.paddress[i];<br>        &#125;<br>    &#125;<br><br>    <span class="hljs-comment">//operator=防止浅拷贝问题</span><br>    myArray&amp; <span class="hljs-keyword">operator</span>=(<span class="hljs-type">const</span> myArray&amp; arr)&#123;<br>        <span class="hljs-comment">//先判断原来堆区是否有数据，如果有先释放</span><br>        <span class="hljs-keyword">if</span>(<span class="hljs-keyword">this</span>-&gt;paddress!=<span class="hljs-literal">NULL</span>)&#123;<br>            <span class="hljs-keyword">delete</span>[] <span class="hljs-keyword">this</span>-&gt;paddress;<br>            <span class="hljs-keyword">this</span>-&gt;paddress=<span class="hljs-literal">NULL</span>;<br>            <span class="hljs-keyword">this</span>-&gt;m_capacity=<span class="hljs-number">0</span>;<br>            <span class="hljs-keyword">this</span>-&gt;m_size=<span class="hljs-number">0</span>;<br>        &#125;<br>        <span class="hljs-keyword">this</span>-&gt;m_capacity=arr.m_capacity;<br>        <span class="hljs-keyword">this</span>-&gt;m_size=arr.m_size;<br>        <span class="hljs-keyword">this</span>-&gt;paddress=<span class="hljs-keyword">new</span> T[arr.m_capacity];<br>        <span class="hljs-keyword">for</span>(<span class="hljs-type">int</span> i=<span class="hljs-number">0</span>;i&lt; <span class="hljs-keyword">this</span>-&gt;m_size;i++)&#123;<br>            <span class="hljs-keyword">this</span>-&gt;paddress[i]=arr.paddress[i];<br>        &#125;<br>        <span class="hljs-keyword">return</span> *<span class="hljs-keyword">this</span>;<br>    &#125;<br><br>    <span class="hljs-comment">//尾插法</span><br>    <span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">push_back</span><span class="hljs-params">(<span class="hljs-type">const</span> T&amp; val)</span></span>&#123;<br>        <span class="hljs-comment">//先判断容量是否等于大小</span><br>        <span class="hljs-keyword">if</span>(<span class="hljs-keyword">this</span>-&gt;m_capacity== <span class="hljs-keyword">this</span>-&gt;m_size)&#123;<br>            <span class="hljs-keyword">return</span>;<br>        &#125;<br>        <span class="hljs-keyword">this</span>-&gt;paddress[<span class="hljs-keyword">this</span>-&gt;m_size]=val; <span class="hljs-comment">//在数组末尾插入数据</span><br>        <span class="hljs-keyword">this</span>-&gt;m_size++;  <span class="hljs-comment">//更新数组大小</span><br>    &#125;<br><br>    <span class="hljs-comment">//尾删法,让用户访问不到最后一个元素,逻辑删除</span><br>    <span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">pop_back</span><span class="hljs-params">()</span></span>&#123;<br>        <span class="hljs-keyword">if</span>(<span class="hljs-keyword">this</span>-&gt;m_size==<span class="hljs-number">0</span>)&#123;<br>            <span class="hljs-keyword">return</span>;<br>        &#125;<br>        <span class="hljs-keyword">this</span>-&gt;m_size--;<br>    &#125;<br><br>    <span class="hljs-comment">//通过下标来访问数组中的元素,重载中括号,引用可做左值存在</span><br>    T&amp; <span class="hljs-keyword">operator</span>[](<span class="hljs-type">int</span> index)&#123;<br>        <span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>-&gt;paddress[index];<br>    &#125;<br><br>    <span class="hljs-comment">//返回数组容量</span><br>    <span class="hljs-function"><span class="hljs-type">int</span> <span class="hljs-title">get_capacity</span><span class="hljs-params">()</span></span>&#123;<br>        <span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>-&gt;m_capacity;<br>    &#125;<br><br>    <span class="hljs-comment">//返回数组大小</span><br>    <span class="hljs-function"><span class="hljs-type">int</span> <span class="hljs-title">get_size</span><span class="hljs-params">()</span></span>&#123;<br>        <span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>-&gt;m_size;<br>    &#125;<br><br>    <span class="hljs-comment">//析构函数</span><br>    ~<span class="hljs-built_in">myArray</span>()&#123;<br>        <span class="hljs-keyword">if</span>(<span class="hljs-keyword">this</span>-&gt;paddress!=<span class="hljs-literal">NULL</span>)&#123;<br>            <span class="hljs-keyword">delete</span> [] <span class="hljs-keyword">this</span>-&gt;paddress;<br>            <span class="hljs-keyword">this</span>-&gt;paddress=<span class="hljs-literal">NULL</span>;<br>        &#125;<br>    &#125;<br><br><span class="hljs-keyword">private</span>:<br>    T * paddress;  <span class="hljs-comment">//指针指向堆区开辟的真实的数组</span><br>    <span class="hljs-type">int</span> m_capacity;  <span class="hljs-comment">//数组容量</span><br>    <span class="hljs-type">int</span> m_size;  <span class="hljs-comment">//数组大小</span><br>&#125;;<br></code></pre></td></tr></table></figure>





<p>myArray.cpp代码：</p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br></pre></td><td class="code"><pre><code class="hljs c++"><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&quot;myArray.hpp&quot;</span></span><br><span class="hljs-keyword">using</span> <span class="hljs-keyword">namespace</span> std;<br><br><br><span class="hljs-keyword">class</span> <span class="hljs-title class_">Person</span> &#123;<br>	<span class="hljs-keyword">public</span>:<br>		<span class="hljs-built_in">Person</span>() &#123;&#125;;<br>		<span class="hljs-built_in">Person</span>(string name, <span class="hljs-type">int</span> age) &#123;<br>			<span class="hljs-keyword">this</span>-&gt;m_name = name;<br>			<span class="hljs-keyword">this</span>-&gt;m_age = age;<br>		&#125;<br><br>		string m_name;<br>		<span class="hljs-type">int</span> m_age;<br>&#125;;<br><br><span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">printarr</span><span class="hljs-params">(myArray&lt;Person&gt; &amp;arr)</span> </span>&#123;<br>	<span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> i = <span class="hljs-number">0</span>; i &lt; arr.<span class="hljs-built_in">get_size</span>(); i++) &#123;<br>		cout &lt;&lt; <span class="hljs-string">&quot;姓名：&quot;</span> &lt;&lt; arr[i].m_name &lt;&lt; <span class="hljs-string">&quot;年龄：&quot;</span> &lt;&lt; arr[i].m_age &lt;&lt; endl;<br>	&#125;<br>&#125;<br><br><span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">print</span><span class="hljs-params">(myArray&lt;<span class="hljs-type">int</span>&gt; &amp;arr)</span> </span>&#123;<br>	<span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> i = <span class="hljs-number">0</span>; i &lt; arr.<span class="hljs-built_in">get_size</span>(); i++) &#123;<br>		cout &lt;&lt; arr[i] &lt;&lt; endl;<br>	&#125;<br>&#125;<br><br><span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">test01</span><span class="hljs-params">()</span> </span>&#123;<br>	myArray&lt;<span class="hljs-type">int</span>&gt;<span class="hljs-built_in">arr</span>(<span class="hljs-number">5</span>);<br>	<span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> i = <span class="hljs-number">0</span>; i &lt; <span class="hljs-number">5</span>; i++) &#123;<br>		<span class="hljs-comment">//利用尾插法，向数组插入数据</span><br>		arr.<span class="hljs-built_in">push_back</span>(i);<br>	&#125;<br>	cout &lt;&lt; <span class="hljs-string">&quot;arr的打印输出：&quot;</span> &lt;&lt; endl;<br>	<span class="hljs-built_in">print</span>(arr);<br>	cout &lt;&lt; <span class="hljs-string">&quot;arr的容量：&quot;</span> &lt;&lt; arr.<span class="hljs-built_in">get_capacity</span>() &lt;&lt; endl;<br>	cout &lt;&lt; <span class="hljs-string">&quot;arr的大小：&quot;</span> &lt;&lt; arr.<span class="hljs-built_in">get_size</span>() &lt;&lt; endl;<br>	myArray&lt;<span class="hljs-type">int</span>&gt;<span class="hljs-built_in">arr1</span>(arr);<br>	cout &lt;&lt; <span class="hljs-string">&quot;arr1的打印输出：&quot;</span> &lt;&lt; endl;<br>	<span class="hljs-built_in">print</span>(arr1);<br>	<span class="hljs-comment">//尾删法</span><br>	arr1.<span class="hljs-built_in">pop_back</span>();<br>	cout &lt;&lt; <span class="hljs-string">&quot;arr1的容量：&quot;</span> &lt;&lt; arr1.<span class="hljs-built_in">get_capacity</span>() &lt;&lt; endl;<br>	cout &lt;&lt; <span class="hljs-string">&quot;arr1的大小：&quot;</span> &lt;&lt; arr1.<span class="hljs-built_in">get_size</span>() &lt;&lt; endl;<br>&#125;<br><br><span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">test02</span><span class="hljs-params">()</span> </span>&#123;<br>	myArray&lt;Person&gt;<span class="hljs-built_in">arr</span>(<span class="hljs-number">10</span>);<br>	<span class="hljs-function">Person <span class="hljs-title">p1</span><span class="hljs-params">(<span class="hljs-string">&quot;孙悟空&quot;</span>, <span class="hljs-number">999</span>)</span></span>;<br>	<span class="hljs-function">Person <span class="hljs-title">p2</span><span class="hljs-params">(<span class="hljs-string">&quot;韩信&quot;</span>, <span class="hljs-number">20</span>)</span></span>;<br>	<span class="hljs-function">Person <span class="hljs-title">p3</span><span class="hljs-params">(<span class="hljs-string">&quot;妲己&quot;</span>, <span class="hljs-number">10</span>)</span></span>;<br>	<span class="hljs-function">Person <span class="hljs-title">p4</span><span class="hljs-params">(<span class="hljs-string">&quot;安其拉&quot;</span>, <span class="hljs-number">27</span>)</span></span>;<br>	<span class="hljs-function">Person <span class="hljs-title">p5</span><span class="hljs-params">(<span class="hljs-string">&quot;赵云&quot;</span>, <span class="hljs-number">28</span>)</span></span>;<br>	arr.<span class="hljs-built_in">push_back</span>(p1);<br>	arr.<span class="hljs-built_in">push_back</span>(p2);<br>	arr.<span class="hljs-built_in">push_back</span>(p3);<br>	arr.<span class="hljs-built_in">push_back</span>(p4);<br>	arr.<span class="hljs-built_in">push_back</span>(p5);<br>	<span class="hljs-built_in">printarr</span>(arr);<br>	cout &lt;&lt; <span class="hljs-string">&quot;arr的容量：&quot;</span> &lt;&lt; arr.<span class="hljs-built_in">get_capacity</span>() &lt;&lt; endl;<br>	cout &lt;&lt; <span class="hljs-string">&quot;arr的大小：&quot;</span> &lt;&lt; arr.<span class="hljs-built_in">get_size</span>() &lt;&lt; endl;<br>&#125;<br><br><br><span class="hljs-function"><span class="hljs-type">int</span> <span class="hljs-title">main</span><span class="hljs-params">()</span> </span>&#123;<br><span class="hljs-comment">//	test01();</span><br>	<span class="hljs-built_in">test02</span>();<br>	<span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;<br>&#125;<br></code></pre></td></tr></table></figure>

















<h2 id="STL初识"><a href="#STL初识" class="headerlink" title="STL初识"></a>STL初识</h2><h3 id="STL的诞生"><a href="#STL的诞生" class="headerlink" title="STL的诞生"></a>STL的诞生</h3><ul>
<li>长久以来，软件界一直希望建立一种可重复利用的东西</li>
<li>C++的<strong>面向对象</strong>和<strong>泛型编程</strong>思想，目的就是<strong>复用性的提升</strong></li>
<li>大多情况下，数据结构和算法都未能有一套标准，导致被迫从事大量重复工作</li>
<li>为了建立数据结构和算法的一套标准，诞生了STL</li>
</ul>
<h3 id="STL基本概念"><a href="#STL基本概念" class="headerlink" title="STL基本概念"></a>STL基本概念</h3><ul>
<li>STL(Standard Template Library,<strong>标准模板库</strong>)</li>
<li>STL从广义上分为：<strong>容器(container) 算法(algorithm) 迭代器(iterator)</strong></li>
<li><strong>容器</strong>和<strong>算法</strong>之间通过<strong>迭代器</strong>进行无缝连接</li>
<li>STL几乎所有代码都采用了模板类或者模板函数</li>
</ul>
<h3 id="STL六大组件"><a href="#STL六大组件" class="headerlink" title="STL六大组件"></a>STL六大组件</h3><p>STL大体分为六大组件，分别为：<strong>容器、算法、迭代器、仿函数、适配器(配接器)、空间配置器</strong></p>
<ol>
<li><strong>容器</strong>：各种数据结构，如：vector、list、deque、set、map等，用来存放数据</li>
<li><strong>算法</strong>：各种常用的算法，如：sort、find、copy、for_each等</li>
<li><strong>迭代器</strong>：扮演了容器与算法之间的胶合剂</li>
<li><strong>仿函数</strong>：行为类似函数，可作为算法的某种策略</li>
<li><strong>适配器</strong>：一种用来修饰容器或者仿函数或者迭代器接口的东西</li>
<li><strong>空间配置器</strong>：负责空间的配置与管理。</li>
</ol>
<h3 id="STL中容器、算法、迭代器"><a href="#STL中容器、算法、迭代器" class="headerlink" title="STL中容器、算法、迭代器"></a>STL中容器、算法、迭代器</h3><p><strong>容器</strong>：置物之所也</p>
<p>STL容器就是将运用最广泛的一些数据结构闪现出来</p>
<p>常用的数据结构：数组，链表，树，栈，队列，集合，映射表等</p>
<p>这些容器分为<strong>序列式容器</strong>和<strong>关联式容器</strong>两种：</p>
<ul>
<li><strong>序列式容器</strong>：强调值的排序，序列式容器中的每个元素均有固定的位置</li>
<li><strong>关联式容器</strong>：二叉树结构，各元素之间没有严格的物理上的顺序关系</li>
</ul>
<p><strong>算法</strong>：问题之解法也</p>
<p>有限的步骤，解决逻辑或数学上的问题，这一门学科我们称为算法(Algorithms)</p>
<p>算法分为<strong>质变算法</strong>和<strong>非质变算法</strong>：</p>
<ul>
<li><strong>质变算法</strong>：是指运算过程中会更改区间内的元素的内容，例如：拷贝，替换，删除等等</li>
<li><strong>非质变算法</strong>：是指运算过程中不会更改区间内的元素内容，例如：查找，计数，遍历，寻找极值等等</li>
</ul>
<p><strong>迭代器</strong>：容器和算法之间粘合剂</p>
<p>提供一种方法，使之能够依序寻访某个容器所含的各个元素，而又无需暴露该容器的内部表示方式</p>
<p>每个容器都有自己专属的迭代器</p>
<p>迭代器使用非常类似于指针，初学阶段我们可以先理解迭代器为指针</p>
<p><strong>迭代器种类</strong>：</p>
<table>
<thead>
<tr>
<th><strong>种类</strong></th>
<th><strong>功能</strong></th>
<th><strong>支持运算</strong></th>
</tr>
</thead>
<tbody><tr>
<td>输入迭代器</td>
<td>对数据的只读访问</td>
<td>只读，支持++、&#x3D;&#x3D;、！&#x3D;</td>
</tr>
<tr>
<td>输出迭代器</td>
<td>对数据的只写访问</td>
<td>只写，支持++</td>
</tr>
<tr>
<td>前向迭代器</td>
<td>读写操作，并能向前推进迭代器</td>
<td>读写，支持++、&#x3D;&#x3D;、！&#x3D;</td>
</tr>
<tr>
<td>双向迭代器</td>
<td>读写操作，并能向前和向后操作</td>
<td>读写，支持++、–</td>
</tr>
<tr>
<td>随机访问迭代器</td>
<td>读写操作，可以以跳跃的方式访问任意数据，功能最强的迭代器</td>
<td>读写操作，支持++、–、[n]、-n、&lt;、&lt;&#x3D;、&gt;、&gt;&#x3D;</td>
</tr>
</tbody></table>
<p>常用的容器中迭代器种类为双向迭代器，和随机访问迭代器</p>
<h3 id="容器算法迭代器初识"><a href="#容器算法迭代器初识" class="headerlink" title="容器算法迭代器初识"></a>容器算法迭代器初识</h3><p>STL中最常用的容器为Vector，可以理解为数组，下面我们将学习如何向这个容器插入数据，并遍历这个容器</p>
<h4 id="vector存放内置数据类型"><a href="#vector存放内置数据类型" class="headerlink" title="vector存放内置数据类型"></a>vector存放内置数据类型</h4><p><strong>容器</strong>：<code>vector</code></p>
<p><strong>算法</strong>：<code>for_each</code></p>
<p>迭代器：<code>vector&lt;int&gt;::iterator</code></p>
<p>示例：</p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br></pre></td><td class="code"><pre><code class="hljs c++"><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;iostream&gt;</span></span><br><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;vector&gt;</span></span><br><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;alogrithm&gt;</span></span><br><span class="hljs-keyword">using</span> <span class="hljs-keyword">namespace</span> std;<br><br><span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">myprint</span><span class="hljs-params">(<span class="hljs-type">int</span> val)</span></span>&#123;<br>    cout&lt;&lt;val&lt;&lt;endl;<br>&#125;<br><br><br><span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">test01</span><span class="hljs-params">()</span> </span>&#123;<br>	<span class="hljs-comment">//创建一个vector容器，数组</span><br>	vector&lt;<span class="hljs-type">int</span>&gt; v;<br>	v.<span class="hljs-built_in">push_back</span>(<span class="hljs-number">10</span>);  <span class="hljs-comment">//尾插法，插入数据</span><br>	v.<span class="hljs-built_in">push_back</span>(<span class="hljs-number">20</span>);<br>	v.<span class="hljs-built_in">push_back</span>(<span class="hljs-number">30</span>);<br>	<span class="hljs-comment">//通过迭代器访问容器中的数据</span><br>    <span class="hljs-comment">//第一种遍历方式</span><br>	vector&lt;<span class="hljs-type">int</span>&gt;::iterator itBegin = v.<span class="hljs-built_in">begin</span>(); <span class="hljs-comment">//起始迭代器指向容器中第一个元素</span><br>	vector&lt;<span class="hljs-type">int</span>&gt;::iterator itEnd = v.<span class="hljs-built_in">end</span>(); <span class="hljs-comment">//结束迭代器，指向容器中最后一个元素的下一个位置</span><br>	<span class="hljs-keyword">while</span> (itBegin != itEnd) &#123;<br>		cout &lt;&lt; *itBegin &lt;&lt; endl;<br>		itBegin++;<br>	&#125;<br>    <span class="hljs-comment">//第二种方法</span><br>    <span class="hljs-keyword">for</span>(vector&lt;<span class="hljs-type">int</span>&gt;::iterator it=v.<span class="hljs-built_in">begin</span>();it!=v.<span class="hljs-built_in">end</span>();it++)&#123;<br>        cout&lt;&lt;*it&lt;&lt;endl;<br>    &#125;<br>    <br>    <span class="hljs-comment">//第三种方式,利用STL中的遍历算法</span><br>    for_each(v.<span class="hljs-built_in">begin</span>(),v.<span class="hljs-built_in">end</span>(),myprint);<br>&#125;<br><br><br><span class="hljs-function"><span class="hljs-type">int</span> <span class="hljs-title">main</span><span class="hljs-params">()</span> </span>&#123;<br>	<span class="hljs-built_in">test01</span>();<br><br>	<span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;<br>&#125;<br></code></pre></td></tr></table></figure>







<h4 id="vector容器中存放自定义数据类型"><a href="#vector容器中存放自定义数据类型" class="headerlink" title="vector容器中存放自定义数据类型"></a>vector容器中存放自定义数据类型</h4><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br></pre></td><td class="code"><pre><code class="hljs c++"><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;iostream&gt;</span></span><br><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;vector&gt;</span></span><br><span class="hljs-keyword">using</span> <span class="hljs-keyword">namespace</span> std;<br><br><br><span class="hljs-keyword">class</span> <span class="hljs-title class_">Person</span>&#123;<br><span class="hljs-keyword">public</span>:<br>	<span class="hljs-built_in">Person</span>(string name,<span class="hljs-type">int</span> age)&#123;<br>        <span class="hljs-keyword">this</span>-&gt;m_name=name;<br>        <span class="hljs-keyword">this</span>-&gt;m_age=age;<br>    &#125;<br>    string m_name;<br>    <span class="hljs-type">int</span> m_age;<br>&#125;;<br><br><span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">test01</span><span class="hljs-params">()</span></span>&#123;<br>    vector&lt;Person&gt; v;<br>    <span class="hljs-function">Person <span class="hljs-title">p1</span><span class="hljs-params">(<span class="hljs-string">&quot;aaa&quot;</span>,<span class="hljs-number">10</span>)</span></span>;<br>    <span class="hljs-function">Person <span class="hljs-title">p2</span><span class="hljs-params">(<span class="hljs-string">&quot;bbb&quot;</span>,<span class="hljs-number">20</span>)</span></span>;<br>    <span class="hljs-function">Person <span class="hljs-title">p3</span><span class="hljs-params">(<span class="hljs-string">&quot;ccc&quot;</span>,<span class="hljs-number">30</span>)</span></span>;<br>    <span class="hljs-function">Person <span class="hljs-title">p4</span><span class="hljs-params">(<span class="hljs-string">&quot;ddd&quot;</span>,<span class="hljs-number">40</span>)</span></span>;<br>    <span class="hljs-function">Person <span class="hljs-title">p5</span><span class="hljs-params">(<span class="hljs-string">&quot;eee&quot;</span>,<span class="hljs-number">50</span>)</span></span>;<br>    v.<span class="hljs-built_in">push_back</span>(p1);<br>    v.<span class="hljs-built_in">push_back</span>(p2);<br>    v.<span class="hljs-built_in">push_back</span>(p3);<br>    v.<span class="hljs-built_in">push_back</span>(p4);<br>    v.<span class="hljs-built_in">push_back</span>(p5);<br>    <span class="hljs-keyword">for</span>(vector&lt;Person&gt;::iterator it=v.<span class="hljs-built_in">begin</span>();it!=v.<span class="hljs-built_in">end</span>();it++)&#123;<br>        <span class="hljs-comment">//cout&lt;&lt;&quot;name：&quot;&lt;&lt;(*it).m_name&lt;&lt;&quot;  age：&quot;&lt;&lt;(*it).m_age&lt;&lt;endl;</span><br>        cout&lt;&lt;<span class="hljs-string">&quot;name：&quot;</span>&lt;&lt;it-&gt;m_name&lt;&lt;<span class="hljs-string">&quot;  age：&quot;</span>&lt;&lt;it-&gt;m_age&lt;&lt;endl;<br>    &#125;<br>&#125;<br><br><span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">test02</span><span class="hljs-params">()</span></span>&#123;<br>    vector&lt;*Person&gt; v;<br>    <span class="hljs-function">Person <span class="hljs-title">p1</span><span class="hljs-params">(<span class="hljs-string">&quot;aaa&quot;</span>,<span class="hljs-number">10</span>)</span></span>;<br>    <span class="hljs-function">Person <span class="hljs-title">p2</span><span class="hljs-params">(<span class="hljs-string">&quot;bbb&quot;</span>,<span class="hljs-number">20</span>)</span></span>;<br>    <span class="hljs-function">Person <span class="hljs-title">p3</span><span class="hljs-params">(<span class="hljs-string">&quot;ccc&quot;</span>,<span class="hljs-number">30</span>)</span></span>;<br>    <span class="hljs-function">Person <span class="hljs-title">p4</span><span class="hljs-params">(<span class="hljs-string">&quot;ddd&quot;</span>,<span class="hljs-number">40</span>)</span></span>;<br>    <span class="hljs-function">Person <span class="hljs-title">p5</span><span class="hljs-params">(<span class="hljs-string">&quot;eee&quot;</span>,<span class="hljs-number">50</span>)</span></span>;<br>    v.<span class="hljs-built_in">push_back</span>(&amp;p1);<br>    v.<span class="hljs-built_in">push_back</span>(&amp;p2);<br>    v.<span class="hljs-built_in">push_back</span>(&amp;p3);<br>    v.<span class="hljs-built_in">push_back</span>(&amp;p4);<br>    v.<span class="hljs-built_in">push_back</span>(&amp;p5);<br>    <span class="hljs-keyword">for</span>(vector&lt;Person*&gt;::iterator it=v.<span class="hljs-built_in">begin</span>();it!=v.<span class="hljs-built_in">end</span>();it++)&#123;<br>        cout&lt;&lt;<span class="hljs-string">&quot;name：&quot;</span>&lt;&lt;(*it)-&gt;m_name&lt;&lt;<span class="hljs-string">&quot;  age：&quot;</span>&lt;&lt;(*it)-&gt;m_age&lt;&lt;endl;<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure>











<h4 id="vector容器嵌套容器"><a href="#vector容器嵌套容器" class="headerlink" title="vector容器嵌套容器"></a>vector容器嵌套容器</h4><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><code class="hljs c++"><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;iostream&gt;</span></span><br><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;vector&gt;</span></span><br><span class="hljs-keyword">using</span> <span class="hljs-keyword">namespace</span> std;<br><br><span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">test01</span><span class="hljs-params">()</span></span>&#123;<br>    vector&lt;vector&lt;<span class="hljs-type">int</span>&gt;&gt;v;<br>    vector&lt;<span class="hljs-type">int</span>&gt;v1;<br>    vector&lt;<span class="hljs-type">int</span>&gt;v2;<br>    vector&lt;<span class="hljs-type">int</span>&gt;v3;<br>    vector&lt;<span class="hljs-type">int</span>&gt;v4;<br>    <span class="hljs-comment">//向小容器中添加数据</span><br>    <span class="hljs-keyword">for</span>(<span class="hljs-type">int</span> i=<span class="hljs-number">0</span>;i&lt;<span class="hljs-number">4</span>;i++)&#123;<br>        v1.<span class="hljs-built_in">push_back</span>(i+<span class="hljs-number">1</span>);<br>        v2.<span class="hljs-built_in">push_back</span>(i+<span class="hljs-number">2</span>);<br>        v3.<span class="hljs-built_in">push_back</span>(i+<span class="hljs-number">3</span>);<br>        v4.<span class="hljs-built_in">push_back</span>(i+<span class="hljs-number">4</span>);<br>    &#125;<br>    <span class="hljs-comment">//将小容器插入到大容器中</span><br>    v.<span class="hljs-built_in">push_back</span>(v1);<br>    v.<span class="hljs-built_in">push_back</span>(v2);<br>    v.<span class="hljs-built_in">push_back</span>(v3);<br>    v.<span class="hljs-built_in">push_back</span>(v4);<br>    <span class="hljs-comment">//通过大容器，把所有数据遍历一遍</span><br>    <span class="hljs-keyword">for</span>(vector&lt;vector&lt;<span class="hljs-type">int</span>&gt;&gt;::iterator it=v.<span class="hljs-built_in">begin</span>();it!=v.<span class="hljs-built_in">end</span>();it++)&#123;<br>        <span class="hljs-comment">//(*it) --- 容器vector&lt;int&gt;</span><br>        <span class="hljs-keyword">for</span>(vector&lt;<span class="hljs-type">int</span>&gt;::iterator vit=(*it).<span class="hljs-built_in">begin</span>();vit!=(*it).<span class="hljs-built_in">end</span>();vit++)&#123;<br>            cout&lt;&lt;*vit&lt;&lt;<span class="hljs-string">&quot; &quot;</span>;<br>        &#125;<br>        cout&lt;&lt;endl;<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure>

















<h2 id="STL-–常用容器"><a href="#STL-–常用容器" class="headerlink" title="STL –常用容器"></a>STL –常用容器</h2><h3 id="string容器"><a href="#string容器" class="headerlink" title="string容器"></a>string容器</h3><h4 id="string基本概念"><a href="#string基本概念" class="headerlink" title="string基本概念"></a>string基本概念</h4><p><strong>本质</strong>：</p>
<ul>
<li>string是C++风格的字符串，而string本质上是一个类</li>
</ul>
<p><strong>string和char*的区别</strong>：</p>
<ul>
<li>char*是一个指针</li>
<li>string是一个类，类内部封装了char*，管理这个字符串，是一个char指针型容器</li>
</ul>
<p><strong>特点</strong>：</p>
<p>string类内部封装了很多成员的方法</p>
<p>例如：查找find，拷贝copy，删除delete，替换replace，插入insert</p>
<p>string管理char*所分配的内存，不用担心复制越界和取值越界等，由类内部进行负责</p>
<h4 id="string构造函数"><a href="#string构造函数" class="headerlink" title="string构造函数"></a>string构造函数</h4><p>构造函数原型：</p>
<ul>
<li><p><code>string();</code>      &#x2F;&#x2F;创建一个空的字符串，例如：string str;</p>
<p><code>string(const char* s);</code>      &#x2F;&#x2F;使用字符串s初始化</p>
</li>
<li><p><code>string(const string&amp; str);</code>   &#x2F;&#x2F;使用一个string对象初始化另一个string对象</p>
</li>
<li><p><code>string(int n,char c);</code>     &#x2F;&#x2F;使用n个字符c初始化</p>
</li>
</ul>
<p>示例：</p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><code class="hljs c++"><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;iostream&gt;</span></span><br><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;string&gt;</span></span><br><span class="hljs-keyword">using</span> <span class="hljs-keyword">namespace</span> std;<br><br><span class="hljs-comment">//string的构造函数</span><br><span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">test01</span><span class="hljs-params">()</span></span>&#123;<br>    string s1;  <span class="hljs-comment">//默认构造</span><br>    <span class="hljs-type">const</span> <span class="hljs-type">char</span> *str=<span class="hljs-string">&quot;hello world&quot;</span>;<br>    <span class="hljs-function">string <span class="hljs-title">s2</span><span class="hljs-params">(str)</span></span>;<br>    cout&lt;&lt;<span class="hljs-string">&quot;s2= &quot;</span>&lt;&lt;s2&lt;&lt;endl;<br>    <span class="hljs-function">string <span class="hljs-title">s3</span><span class="hljs-params">(s2)</span></span>;<br>    cout&lt;&lt;<span class="hljs-string">&quot;s3= &quot;</span>&lt;&lt;s3&lt;&lt;endl;<br>    <span class="hljs-function">string <span class="hljs-title">s4</span><span class="hljs-params">(<span class="hljs-number">10</span>,<span class="hljs-string">&#x27;a&#x27;</span>)</span></span>;<br>    cout&lt;&lt;<span class="hljs-string">&quot;s4= &quot;</span>&lt;&lt;s4&lt;&lt;endl;<br>&#125;<br></code></pre></td></tr></table></figure>







<h4 id="string赋值操作"><a href="#string赋值操作" class="headerlink" title="string赋值操作"></a>string赋值操作</h4><p>功能描述：</p>
<ul>
<li>给string字符串进行赋值</li>
</ul>
<p>赋值的函数原型：</p>
<ul>
<li><code>string&amp; operator=(const char* s);</code>       &#x2F;&#x2F;char*类型字符串赋值给当前的字符串</li>
<li><code>string&amp; operator=(const string &amp;s);</code>    &#x2F;&#x2F;把字符串s赋给当前的字符串</li>
<li><code>string&amp; operator=(char c);</code>                   &#x2F;&#x2F;字符赋值给当前的字符串</li>
<li><code>string&amp; assign(const char *s);</code>            &#x2F;&#x2F;把字符串s赋给当前的字符串</li>
<li><code>string&amp; assign(const char *s,int n);</code>  &#x2F;&#x2F;把字符串s的前n个字符赋给当前的字符串</li>
<li><code>string&amp; assign(const string &amp;s);</code>         &#x2F;&#x2F;把字符串s赋给当前字符串</li>
<li><code>string&amp; assign(int n,char c);</code>              &#x2F;&#x2F;把n个字符c赋给当前字符串</li>
</ul>
<p>示例：</p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><code class="hljs c++"><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;iostream&gt;</span></span><br><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;string&gt;</span></span><br><span class="hljs-keyword">using</span> <span class="hljs-keyword">namespace</span> std;<br><br><span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">test01</span><span class="hljs-params">()</span></span>&#123;<br>    <span class="hljs-comment">//第一种</span><br>    string str1;<br>    str1=<span class="hljs-string">&quot;hello world&quot;</span>;<br>    cout&lt;&lt;<span class="hljs-string">&quot;str1= &quot;</span>&lt;&lt;str1&lt;&lt;endl;<br>   	<span class="hljs-comment">//第二种</span><br>    string str2;<br>    str2=str1;<br>    cout&lt;&lt;<span class="hljs-string">&quot;str2= &quot;</span>&lt;&lt;str2&lt;&lt;endl;<br>    <span class="hljs-comment">//第三种</span><br>    string str3;<br>    str3=<span class="hljs-string">&#x27;a&#x27;</span>;<br>    cout&lt;&lt;<span class="hljs-string">&quot;str3= &quot;</span>&lt;&lt;str3&lt;&lt;endl;<br>    <span class="hljs-comment">//第四种</span><br>    string str4;<br>    str4.<span class="hljs-built_in">assgin</span>(<span class="hljs-string">&quot;hello c++&quot;</span>);<br>    cout&lt;&lt;<span class="hljs-string">&quot;str4= &quot;</span>&lt;&lt;str4&lt;&lt;endl;<br>    <span class="hljs-comment">//第五种</span><br>    string str5;<br>    str5.<span class="hljs-built_in">assign</span>(<span class="hljs-string">&quot;hello c++&quot;</span>,<span class="hljs-number">5</span>);<br>    cout&lt;&lt;<span class="hljs-string">&quot;str5= &quot;</span>&lt;&lt;str5&lt;&lt;endl;<br>    <span class="hljs-comment">//第六种</span><br>    string str6;<br>    str6.<span class="hljs-built_in">assign</span>(str5);<br>    cout&lt;&lt;<span class="hljs-string">&quot;str6= &quot;</span>&lt;&lt;str6&lt;&lt;endl;<br>    <span class="hljs-comment">//第七种</span><br>    string str7;<br>    str7.<span class="hljs-built_in">assign</span>(<span class="hljs-number">10</span>,<span class="hljs-string">&#x27;w&#x27;</span>);<br>    cout&lt;&lt;<span class="hljs-string">&quot;str7= &quot;</span>&lt;&lt;str7&lt;&lt;endl;<br>&#125;<br></code></pre></td></tr></table></figure>

<blockquote>
<p><strong>总结</strong>：string的赋值方式狠多，<code>operator=</code>这种方式是比较实用的</p>
</blockquote>
<h4 id="string字符串拼接"><a href="#string字符串拼接" class="headerlink" title="string字符串拼接"></a>string字符串拼接</h4><p>功能描述：</p>
<ul>
<li>实现在字符串末尾拼接字符串</li>
</ul>
<p><strong>函数原型</strong>：</p>
<ul>
<li><code>string&amp; operator+=(const char* str);</code>           &#x2F;&#x2F;重载+&#x3D;操作符</li>
<li><code>string&amp; operator+=(const char c);</code>                &#x2F;&#x2F;重载+&#x3D;操作符</li>
<li><code>string&amp; operator+=(const string&amp; str);</code>        &#x2F;&#x2F;重载+&#x3D;操作符</li>
<li><code>string&amp; append(const char *s);</code>                      &#x2F;&#x2F;把字符s连接到当前字符串末尾</li>
<li><code>string&amp; append(const char *s,int n);</code>            &#x2F;&#x2F;把字符串s的前n个字符连接到当前字符串结尾</li>
<li><code>string&amp; append(const string &amp;s);</code>                   &#x2F;&#x2F;同operator+&#x3D;(const string&amp; str);</li>
<li><code>string&amp; append(const string &amp;s,int pos,int n);</code> &#x2F;&#x2F;字符串s中从pos开始的n个字符连接到字符串末尾</li>
</ul>
<p>示例：</p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><code class="hljs c++"><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;iostream&gt;</span></span><br><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;string&gt;</span></span><br><span class="hljs-keyword">using</span> <span class="hljs-keyword">namespace</span> std;<br><br><span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">test01</span><span class="hljs-params">()</span></span>&#123;<br>    <span class="hljs-comment">//第一种</span><br>    string str1=<span class="hljs-string">&quot;我&quot;</span>;<br>    str1+=<span class="hljs-string">&quot;爱玩游戏&quot;</span>;<br>    cout&lt;&lt;<span class="hljs-string">&quot;str1= &quot;</span>&lt;&lt;str1&lt;&lt;endl;<br>    <span class="hljs-comment">//第二种</span><br>    str1+=<span class="hljs-string">&#x27;:&#x27;</span>;<br>    cout&lt;&lt;<span class="hljs-string">&quot;str1= &quot;</span>&lt;&lt;str1&lt;&lt;endl;<br>    <span class="hljs-comment">//第三种</span><br>    string str2=<span class="hljs-string">&quot;LOL DNF&quot;</span>;<br>    str1+=str2;<br>    cout&lt;&lt;<span class="hljs-string">&quot;str1= &quot;</span>&lt;&lt;str1&lt;&lt;endl;<br>    <span class="hljs-comment">//第四种</span><br>    string str3=<span class="hljs-string">&quot;I&quot;</span>;<br>    str3.<span class="hljs-built_in">append</span>(<span class="hljs-string">&quot;love&quot;</span>);<br>    cout&lt;&lt;<span class="hljs-string">&quot;str3= &quot;</span>&lt;&lt;str3&lt;&lt;endl;<br>    <span class="hljs-comment">//第五种</span><br>    str3.<span class="hljs-built_in">append</span>(<span class="hljs-string">&quot;game abcde&quot;</span>,<span class="hljs-number">4</span>);<br>    cout&lt;&lt;<span class="hljs-string">&quot;str3= &quot;</span>&lt;&lt;str3&lt;&lt;endl;<br>    <span class="hljs-comment">//第六种</span><br>    str3.<span class="hljs-built_in">append</span>(str2);<br>    cout&lt;&lt;<span class="hljs-string">&quot;str3= &quot;</span>&lt;&lt;str3&lt;&lt;endl;<br>    <span class="hljs-comment">//第七种</span><br>    str3.<span class="hljs-built_in">append</span>(str2,<span class="hljs-number">0</span>,<span class="hljs-number">3</span>);<br>    cout&lt;&lt;<span class="hljs-string">&quot;str3= &quot;</span>&lt;&lt;str3&lt;&lt;endl;<br>&#125;<br></code></pre></td></tr></table></figure>













<h4 id="string查找和替换"><a href="#string查找和替换" class="headerlink" title="string查找和替换"></a>string查找和替换</h4><p><strong>功能描述</strong>：</p>
<ul>
<li>查找：查找指定字符串是否存放</li>
<li>替换：在指定的位置替换字符串</li>
</ul>
<p><strong>函数原型</strong>：</p>
<ul>
<li><code>int find(const string&amp; str,int pos=0) const;</code> &#x2F;&#x2F;查找str第一次出现位置，从pos开始查找</li>
<li><code>int find(const char* s,int pos=0) const;</code>    &#x2F;&#x2F;查找s第一次出现的位置，从pos开始查找</li>
<li><code>int find(const char* s,int pos,itn n) const;</code>  &#x2F;&#x2F;从pos位置查找s的前n个字符第一次位置</li>
<li><code>int find(const char c,int pos=0) const;</code>   &#x2F;&#x2F;查找字符c第一次出现位置</li>
<li><code>int rfind(const string&amp; str,int pos=npos) const;</code>  &#x2F;&#x2F;查找str最后一次出现位置，从pos开始查找</li>
<li><code>int rfind(const char* s,int pos=npos) const;</code>   &#x2F;&#x2F;查找s最后一次出现位置，从pos开始查找</li>
<li><code>int rfind(const char* s,int pos,int n) const;</code>  &#x2F;&#x2F;从pos查找s的前n个字符最后一次位置</li>
<li><code>int rfind(const char c,int pos=0) const;</code>  &#x2F;&#x2F;查找字符c最后一次出现位置</li>
<li><code>string&amp; replace(int pos,int n,const string string&amp; str);</code>    &#x2F;&#x2F;替换从pos开始n个字符为字符串str</li>
<li><code>string&amp; replace(int pos,int n,const char* s);</code>   &#x2F;&#x2F;替换从pos开始的n个字符为字符串</li>
</ul>
<p><strong>find和rfind的区别</strong>：</p>
<ul>
<li>find是从左往右查找</li>
<li>rfind是从右往左查找，但下标返回值是从左往右数的</li>
</ul>
<p><strong>注意事项</strong>：</p>
<ul>
<li>如果查找不到字符或者字符串，会返回值-1</li>
</ul>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><code class="hljs c++"><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;iostream&gt;</span></span><br><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;string&gt;</span></span><br><span class="hljs-keyword">using</span> <span class="hljs-keyword">namespace</span> std;<br><br><span class="hljs-comment">//查找</span><br><span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">test01</span><span class="hljs-params">()</span></span>&#123;<br>    <span class="hljs-comment">//find</span><br>    string str1=<span class="hljs-string">&quot;abcdefgede&quot;</span>;<br>    <span class="hljs-type">int</span> pos=str1.<span class="hljs-built_in">find</span>(<span class="hljs-string">&quot;de&quot;</span>);  <span class="hljs-comment">//查找不到会返回-1</span><br>    cout&lt;&lt;<span class="hljs-string">&quot;pos= &quot;</span>&lt;&lt;pos&lt;&lt;endl; <span class="hljs-comment">//3</span><br>    <span class="hljs-comment">//rfind</span><br>    pos=str1.<span class="hljs-built_in">rfind</span>(<span class="hljs-string">&quot;de&quot;</span>);<br>    cout&lt;&lt;<span class="hljs-string">&quot;pos= &quot;</span>&lt;&lt;pos&lt;&lt;endl;  <span class="hljs-comment">//7</span><br>&#125;<br><br><span class="hljs-comment">//替换</span><br><span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">test02</span><span class="hljs-params">()</span></span>&#123;<br>    string str1=<span class="hljs-string">&quot;abcdefg&quot;</span>;<br>    str1.<span class="hljs-built_in">replace</span>(<span class="hljs-number">1</span>,<span class="hljs-number">3</span>,<span class="hljs-string">&quot;1111&quot;</span>);<br>    cout&lt;&lt;<span class="hljs-string">&quot;str1= &quot;</span>&lt;&lt;str1&lt;&lt;endl;   <span class="hljs-comment">//a1111efg</span><br>&#125;<br></code></pre></td></tr></table></figure>











<h4 id="string字符串比较"><a href="#string字符串比较" class="headerlink" title="string字符串比较"></a>string字符串比较</h4><p><strong>功能描述</strong>：</p>
<ul>
<li>字符串之间的比较</li>
</ul>
<p><strong>比较方式</strong>：</p>
<p>字符串比较是按字符的ASCII码进行对比</p>
<ul>
<li>*&#x3D;*返回 0</li>
<li>*&gt;*返回 1</li>
<li>*&lt;*返回 -1</li>
</ul>
<p><strong>函数原型</strong>：</p>
<ul>
<li><code>int compare(const string &amp;s) const;</code>&#x2F;&#x2F;与字符串s比较</li>
<li><code>int compare(const char *s) const;</code>  &#x2F;&#x2F;与字符串s比较</li>
</ul>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><code class="hljs c++"><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;iostream&gt;</span></span><br><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;string&gt;</span></span><br><span class="hljs-keyword">using</span> <span class="hljs-keyword">namespace</span> std;<br><br><span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">test01</span><span class="hljs-params">()</span></span>&#123;<br>    string str1=<span class="hljs-string">&quot;hello&quot;</span>;<br>    string str2=<span class="hljs-string">&quot;hello&quot;</span>;<br>    <span class="hljs-keyword">if</span>(str1.<span class="hljs-built_in">compare</span>(str2)==<span class="hljs-number">0</span>)&#123;<br>        cout&lt;&lt;<span class="hljs-string">&quot;str1=str2&quot;</span>&lt;&lt;endl;<br>    &#125;<span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span>(str1.<span class="hljs-built_in">compare</span>(str2)&gt;<span class="hljs-number">0</span>)&#123;<br>        cout&lt;&lt;<span class="hljs-string">&quot;str1&gt;str2&quot;</span>&lt;&lt;endl;<br>    &#125;<span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span>(str1.<span class="hljs-built_in">compare</span>(str2)&lt;<span class="hljs-number">0</span>)&#123;<br>        cout&lt;&lt;<span class="hljs-string">&quot;str1&lt;str2&quot;</span>&lt;&lt;endl;<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure>











<h4 id="string字符存取"><a href="#string字符存取" class="headerlink" title="string字符存取"></a>string字符存取</h4><p>string中单个字符存取方式有两种：</p>
<ul>
<li><code>char&amp; operator[](int n);</code>    &#x2F;&#x2F;通过[]方式取字符</li>
<li><code>char&amp; at(int n);</code>     &#x2F;&#x2F;通过at方法获取字符</li>
</ul>
<p>示例：</p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><code class="hljs c++"><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;iostream&gt;</span></span><br><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;string&gt;</span></span><br><span class="hljs-keyword">using</span> <span class="hljs-keyword">namespace</span> std;<br><br><br><span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">test01</span><span class="hljs-params">()</span></span>&#123;<br>    string sr1=<span class="hljs-string">&quot;hello&quot;</span>;<br>    <span class="hljs-comment">//通过[]访问单个字符</span><br>    <span class="hljs-keyword">for</span>(<span class="hljs-type">int</span> i=<span class="hljs-number">0</span>;i&lt;str1.<span class="hljs-built_in">size</span>();i++)&#123;<br>        cout&lt;&lt;str1[i]&lt;&lt;<span class="hljs-string">&quot; &quot;</span>;<br>    &#125;<br>    cout&lt;&lt;endl;<br>    <span class="hljs-comment">//通过at方式访问单个字符</span><br>    <span class="hljs-keyword">for</span>(<span class="hljs-type">int</span> i=<span class="hljs-number">0</span>;i&lt;str1.<span class="hljs-built_in">size</span>();i++)&#123;<br>        cout&lt;&lt;str1.<span class="hljs-built_in">at</span>(i)&lt;&lt;<span class="hljs-string">&quot; &quot;</span>;<br>    &#125;<br>    cout&lt;&lt;endl;<br>    <span class="hljs-comment">//修改单个字符</span><br>    str1[<span class="hljs-number">0</span>]=<span class="hljs-string">&#x27;x&#x27;</span>;<br>    cout&lt;&lt;<span class="hljs-string">&quot;str1= &quot;</span>&lt;&lt;str1&lt;&lt;endl;<br>    str1.<span class="hljs-built_in">at</span>(<span class="hljs-number">1</span>)=<span class="hljs-string">&#x27;x&#x27;</span>;<br>    cout&lt;&lt;<span class="hljs-string">&quot;str1= &quot;</span>&lt;&lt;str1&lt;&lt;endl;<br>&#125;<br></code></pre></td></tr></table></figure>











<h4 id="string插入和删除"><a href="#string插入和删除" class="headerlink" title="string插入和删除"></a>string插入和删除</h4><p><strong>功能描述</strong>：</p>
<ul>
<li>对string字符串进行插入和删除字符操作</li>
</ul>
<p><strong>函数原型</strong>：</p>
<ul>
<li><code>string&amp; insert(int pos,const char* s);</code>   &#x2F;&#x2F;插入字符串</li>
<li><code>string&amp; insert(int pos,const string&amp; str);</code>   &#x2F;&#x2F;插入字符串</li>
<li><code>string&amp; insert(int pos,int n,char c);</code>   &#x2F;&#x2F;在指定位置插入n个字符c</li>
<li><code>string&amp; erase(int pos,int n=npos);</code>    &#x2F;&#x2F;删除从pos开始的n个字符</li>
</ul>
<p>示例：</p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><code class="hljs c++"><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;iostream&gt;</span></span><br><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;string&gt;</span></span><br><span class="hljs-keyword">using</span> <span class="hljs-keyword">namespace</span> std;<br><br><br><span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">test01</span><span class="hljs-params">()</span></span>&#123;<br>    string str=<span class="hljs-string">&quot;hello&quot;</span>;<br>    <span class="hljs-comment">//插入</span><br>    str.<span class="hljs-built_in">insert</span>(<span class="hljs-number">1</span>,<span class="hljs-string">&quot;111&quot;</span>);<br>    cout&lt;&lt;<span class="hljs-string">&quot;str= &quot;</span>&lt;&lt;str&lt;&lt;endl;<br>    <span class="hljs-comment">//删除</span><br>    str.<span class="hljs-built_in">erase</span>(<span class="hljs-number">1</span>,<span class="hljs-number">3</span>);<br>    cout&lt;&lt;<span class="hljs-string">&quot;str= &quot;</span>&lt;&lt;str&lt;&lt;endl;<br>&#125;<br></code></pre></td></tr></table></figure>









<h4 id="string子串"><a href="#string子串" class="headerlink" title="string子串"></a>string子串</h4><p><strong>功能描述</strong>：</p>
<ul>
<li>从字符串中获取想要的子串</li>
</ul>
<p><strong>函数原型</strong>：</p>
<ul>
<li><code>string substr(int pos=0,int n=npos) const;</code>  &#x2F;&#x2F;返回由pos开始的n个字符组成的字符串</li>
</ul>
<p>示例：</p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><code class="hljs c++"><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;iostream&gt;</span></span><br><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;string&gt;</span></span><br><span class="hljs-keyword">using</span> <span class="hljs-keyword">namespace</span> std;<br><br><span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">test01</span><span class="hljs-params">()</span></span>&#123;<br>    string str=<span class="hljs-string">&quot;abcedf&quot;</span>;<br>    string subStr=str.<span class="hljs-built_in">substr</span>(<span class="hljs-number">1</span>,<span class="hljs-number">3</span>);<br>    cout&lt;&lt;<span class="hljs-string">&quot;subStr= &quot;</span>&lt;&lt;subStr&lt;&lt;endl;<br>&#125;<br><br><span class="hljs-comment">//实用操作</span><br><span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">test02</span><span class="hljs-params">()</span></span>&#123;<br>    string email=<span class="hljs-string">&quot;zhangsan@sina.com&quot;</span>;<br>    <span class="hljs-comment">//从邮件地址中获取用户名信息</span><br>    <span class="hljs-type">int</span> pos=email.<span class="hljs-built_in">find</span>(<span class="hljs-string">&quot;@&quot;</span>);<br>    string username=email.<span class="hljs-built_in">substr</span>(<span class="hljs-number">0</span>,pos);<br>    cout&lt;&lt;<span class="hljs-string">&quot;username= &quot;</span>&lt;&lt;username&lt;&lt;endl;<br>&#125;<br></code></pre></td></tr></table></figure>













<h3 id="vector容器"><a href="#vector容器" class="headerlink" title="vector容器"></a>vector容器</h3><h4 id="vector基本概念"><a href="#vector基本概念" class="headerlink" title="vector基本概念"></a>vector基本概念</h4><p><strong>功能</strong>：</p>
<ul>
<li>vector数据结构和数组非常相似，也成为<strong>单端数组</strong></li>
</ul>
<p><strong>vector与普通数组区别</strong>：</p>
<ul>
<li>不同之处在于数组是静态空间，而vector可以动态扩展</li>
</ul>
<p><strong>动态扩展</strong>：</p>
<ul>
<li>并不是在原空间之后续接新空间，而是找更大的内存空间，然后将原数据拷贝新空间，释放原空间</li>
<li>vector容器的迭代器是支持随机访问的迭代器</li>
</ul>
<h4 id="vector构造函数"><a href="#vector构造函数" class="headerlink" title="vector构造函数"></a>vector构造函数</h4><p><strong>功能描述</strong>：</p>
<ul>
<li>创建vector容器</li>
</ul>
<p><strong>函数原型</strong>：</p>
<ul>
<li><code>vector&lt;T&gt; v;</code>  &#x2F;&#x2F;采用模块实现类实现，默认构造函数</li>
<li><code>vector(v.begin(),v.end());</code>   &#x2F;&#x2F;将v[begin(),end())区间中的元素拷贝给本身</li>
<li><code>vector(n,elem);</code>   &#x2F;&#x2F;构造函数将n个elem拷贝给本身</li>
<li><code>vector(const vector &amp;vec);</code>   &#x2F;&#x2F;拷贝构造函数</li>
</ul>
<p>示例：</p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><code class="hljs c++"><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;iostream&gt;</span></span><br><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;vector&gt;</span></span><br><span class="hljs-keyword">using</span> <span class="hljs-keyword">namespace</span> std;<br><br><span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">print</span><span class="hljs-params">(vector&lt;<span class="hljs-type">int</span>&gt;&amp;v)</span></span>&#123;<br>    <span class="hljs-keyword">for</span>(vector&lt;<span class="hljs-type">int</span>&gt;::iterator it=v.<span class="hljs-built_in">begin</span>();it!=v.<span class="hljs-built_in">end</span>();it++)&#123;<br>        cout&lt;&lt;*it&lt;&lt;<span class="hljs-string">&quot; &quot;</span>;<br>    &#125;<br>    cout&lt;&lt;endl;<br>&#125;<br><br><span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">test01</span><span class="hljs-params">()</span></span>&#123;<br>    vector&lt;<span class="hljs-type">int</span>&gt;v;  <span class="hljs-comment">//默认无参构造</span><br>    <span class="hljs-keyword">for</span>(<span class="hljs-type">int</span> i=<span class="hljs-number">0</span>;i&lt;<span class="hljs-number">10</span>;i++)&#123;<br>        v.<span class="hljs-built_in">push_back</span>(i);<br>    &#125;<br>    <span class="hljs-built_in">print</span>(v);<br>    <span class="hljs-comment">//通过区间方式进行构造</span><br>    vector&lt;<span class="hljs-type">int</span>&gt;<span class="hljs-built_in">v1</span>(v.<span class="hljs-built_in">begin</span>(),v.<span class="hljs-built_in">end</span>());<br>    <span class="hljs-built_in">print</span>(v1);<br>    <span class="hljs-comment">//n个elem方式构造</span><br>    vector&lt;<span class="hljs-type">int</span>&gt;<span class="hljs-built_in">v2</span>(<span class="hljs-number">10</span>,<span class="hljs-number">100</span>);<br>    <span class="hljs-built_in">print</span>(v2);<br>    <span class="hljs-comment">//拷贝构造</span><br>    vector&lt;<span class="hljs-type">int</span>&gt;<span class="hljs-built_in">v3</span>(v2);<br>    <span class="hljs-built_in">print</span>(v3);<br>&#125;<br></code></pre></td></tr></table></figure>











<h4 id="vector赋值操作"><a href="#vector赋值操作" class="headerlink" title="vector赋值操作"></a>vector赋值操作</h4><p><strong>功能描述</strong>：</p>
<ul>
<li>给vector容器进行赋值</li>
</ul>
<p><strong>函数原型</strong>：</p>
<ul>
<li><code>vector&amp; operator=(const vector &amp;vec);</code>   &#x2F;&#x2F;重载等号操作符</li>
<li><code>assign(beg,end);</code>   &#x2F;&#x2F;将[beg,end)区间中的数据拷贝赋值给本身</li>
<li><code>assign(n,elem);</code>   &#x2F;&#x2F;将n个elem拷贝赋值给本身</li>
</ul>
<p>示例：</p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><code class="hljs c++"><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;iostream&gt;</span></span><br><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;vector&gt;</span></span><br><span class="hljs-keyword">using</span> <span class="hljs-keyword">namespace</span> std;<br><br><span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">print</span><span class="hljs-params">(vector&lt;<span class="hljs-type">int</span>&gt;&amp;v)</span></span>&#123;<br>    <span class="hljs-keyword">for</span>(vector&lt;<span class="hljs-type">int</span>&gt;::iterator it=v.<span class="hljs-built_in">begin</span>();it!=v.<span class="hljs-built_in">end</span>();it++)&#123;<br>        cout&lt;&lt;*it&lt;&lt;<span class="hljs-string">&quot; &quot;</span>;<br>    &#125;<br>    cout&lt;&lt;endl;<br>&#125;<br><br><span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">test01</span><span class="hljs-params">()</span></span>&#123;<br>    vector&lt;<span class="hljs-type">int</span>&gt;v;<br>    <span class="hljs-keyword">for</span>(<span class="hljs-type">int</span> i=<span class="hljs-number">0</span>;i&lt;<span class="hljs-number">10</span>;i++)&#123;<br>        v.<span class="hljs-built_in">push_back</span>(i);<br>    &#125;<br>    <span class="hljs-built_in">print</span>(v);<br>    <br>    <span class="hljs-comment">//赋值 operator=</span><br>    vector&lt;<span class="hljs-type">int</span>&gt;v1;<br>    v1=v;<br>    <span class="hljs-built_in">print</span>(v1);<br>    <br>    <span class="hljs-comment">//assign</span><br>    vector&lt;<span class="hljs-type">int</span>&gt;v2;<br>    v2.<span class="hljs-built_in">assign</span>(v1.<span class="hljs-built_in">begin</span>(),v1.<span class="hljs-built_in">end</span>());<br>    <span class="hljs-built_in">print</span>(v2);<br>    <br>    <span class="hljs-comment">//n个elem方式赋值</span><br>    vector&lt;<span class="hljs-type">int</span>&gt;v3;<br>    v3.<span class="hljs-built_in">assign</span>(<span class="hljs-number">10</span>,<span class="hljs-number">100</span>);<br>    <span class="hljs-built_in">print</span>(v3);<br>&#125;<br></code></pre></td></tr></table></figure>









<h4 id="vector容量和大小"><a href="#vector容量和大小" class="headerlink" title="vector容量和大小"></a>vector容量和大小</h4><p><strong>功能描述</strong>：</p>
<ul>
<li>对vector容器的容量和大小操作</li>
</ul>
<p><strong>函数原型</strong>：</p>
<ul>
<li><code>empty();</code>    &#x2F;&#x2F;判断容器是否为空</li>
<li><code>capacity();</code>  &#x2F;&#x2F;容器的容量</li>
<li><code>size();</code>   &#x2F;&#x2F;返回容器中元素的个数</li>
<li><code>resize(int num);</code>   &#x2F;&#x2F;重新指定容器的长度为num，若容器变长，则以默认值(0)填充新位置，如果容器变短，则末尾超出容器长度的元素被删除</li>
<li><code>resize(int num,elem);</code>   &#x2F;&#x2F;重新指定容器的长度为num，若容器变长，则以elem值填充新位置。如果容器变短，则末尾超出容器长度的元素被删除</li>
</ul>
<p>示例：</p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><code class="hljs c++"><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;iostream&gt;</span></span><br><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;vector&gt;</span></span><br><span class="hljs-keyword">using</span> <span class="hljs-keyword">namespace</span> std;<br><br><span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">print</span><span class="hljs-params">(vector&lt;<span class="hljs-type">int</span>&gt;&amp;v)</span></span>&#123;<br>    <span class="hljs-keyword">for</span>(vector&lt;<span class="hljs-type">int</span>&gt;::iterator it=v.<span class="hljs-built_in">begin</span>();it!=v.<span class="hljs-built_in">end</span>();it++)&#123;<br>        cout&lt;&lt;*it&lt;&lt;<span class="hljs-string">&quot; &quot;</span>;<br>    &#125;<br>    cout&lt;&lt;endl;<br>&#125;<br><br><span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">test01</span><span class="hljs-params">()</span></span>&#123;<br>    vector&lt;<span class="hljs-type">int</span>&gt;v;<br>    <span class="hljs-keyword">for</span>(<span class="hljs-type">int</span> i=<span class="hljs-number">0</span>;i&lt;<span class="hljs-number">10</span>;i++)&#123;<br>        v.<span class="hljs-built_in">push_back</span>(i);<br>    &#125;<br>    <span class="hljs-built_in">print</span>(v);<br>    <span class="hljs-keyword">if</span>(v.<span class="hljs-built_in">empty</span>())&#123;<br>        cout&lt;&lt;<span class="hljs-string">&quot;v为空&quot;</span>&lt;&lt;endl;<br>    &#125;<span class="hljs-keyword">else</span>&#123;<br>        cout&lt;&lt;<span class="hljs-string">&quot;v不为空&quot;</span>&lt;&lt;endl;<br>        cout&lt;&lt;<span class="hljs-string">&quot;v的容量为：&quot;</span>&lt;&lt;v.<span class="hljs-built_in">capacity</span>()&lt;&lt;endl;<br>        cout&lt;&lt;<span class="hljs-string">&quot;v的大小为：&quot;</span>&lt;&lt;v.<span class="hljs-built_in">size</span>()&lt;&lt;endl;<br>    &#125;<br>    <span class="hljs-comment">//重新指定大小</span><br>    v.<span class="hljs-built_in">resize</span>(<span class="hljs-number">15</span>,<span class="hljs-number">100</span>);  <span class="hljs-comment">//可以指定默认填充值</span><br>    <span class="hljs-built_in">print</span>(v);   <span class="hljs-comment">//补的默认值为0</span><br>    v.<span class="hljs-built_in">resize</span>(<span class="hljs-number">5</span>);<br>    <span class="hljs-built_in">print</span>(v);<br>&#125;<br></code></pre></td></tr></table></figure>











<h4 id="vector插入和删除"><a href="#vector插入和删除" class="headerlink" title="vector插入和删除"></a>vector插入和删除</h4><p><strong>功能描述</strong>：</p>
<ul>
<li>对vector容器进行插入、删除操作</li>
</ul>
<p><strong>函数原型</strong>：</p>
<ul>
<li><code>push_back(ele);</code>    &#x2F;&#x2F;尾部插入元素ele</li>
<li><code>pop_back();</code>    &#x2F;&#x2F;删除最后一个元素</li>
<li><code>insert(const_iterator pos,ele);</code>  &#x2F;&#x2F;迭代器指向位置pos插入元素ele</li>
<li><code>insert(const_iterator pos,int count,ele);</code>    &#x2F;&#x2F;迭代器指向位置pos插入count个元素ele</li>
<li><code>erase(const_iterator pos);</code>  &#x2F;&#x2F;删除迭代器指向的元素</li>
<li><code>erase(const_iterator start,const_iterator end);</code>&#x2F;&#x2F;删除迭代器从start到end之间的元素</li>
<li><code>clear();</code>    &#x2F;&#x2F;删除容器中所有元素</li>
</ul>
<p>示例：</p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><code class="hljs c++"><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;iostream&gt;</span></span><br><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;vector&gt;</span></span><br><span class="hljs-keyword">using</span> <span class="hljs-keyword">namespace</span> std;<br><br><span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">print</span><span class="hljs-params">(vector&lt;<span class="hljs-type">int</span>&gt;&amp;v)</span></span>&#123;<br>    <span class="hljs-keyword">for</span>(vector&lt;<span class="hljs-type">int</span>&gt;::iterator it=v.<span class="hljs-built_in">begin</span>();it!=v.<span class="hljs-built_in">end</span>();it++)&#123;<br>        cout&lt;&lt;*it&lt;&lt;<span class="hljs-string">&quot; &quot;</span>;<br>    &#125;<br>    cout&lt;&lt;endl;<br>&#125;<br><br><br><span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">test01</span><span class="hljs-params">()</span></span>&#123;<br>    vector&lt;<span class="hljs-type">int</span>&gt;v;<br>    <span class="hljs-keyword">for</span>(<span class="hljs-type">int</span> i=<span class="hljs-number">1</span>;i&lt;=<span class="hljs-number">5</span>;i++)&#123;<br>        v.<span class="hljs-built_in">push_back</span>(i*<span class="hljs-number">10</span>);<br>    &#125;<br>    <span class="hljs-built_in">print</span>(v);<br>    v.<span class="hljs-built_in">pop_back</span>();  <span class="hljs-comment">//尾删</span><br>    <span class="hljs-built_in">print</span>(v);<br>    <span class="hljs-comment">//插入</span><br>    v.<span class="hljs-built_in">insert</span>(v.<span class="hljs-built_in">begin</span>(),<span class="hljs-number">100</span>);  <span class="hljs-comment">//第一个参数为迭代器</span><br>    <span class="hljs-built_in">print</span>(v);<br>    v.<span class="hljs-built_in">insert</span>(v.<span class="hljs-built_in">begin</span>(),<span class="hljs-number">2</span>,<span class="hljs-number">1000</span>);<br>    <span class="hljs-built_in">print</span>(v);<br>    <span class="hljs-comment">//删除</span><br>    v.<span class="hljs-built_in">erase</span>(v.<span class="hljs-built_in">begin</span>());  <span class="hljs-comment">//参数也为迭代器</span><br>    <span class="hljs-built_in">print</span>(v);<br>    <span class="hljs-comment">//清空</span><br>    <span class="hljs-comment">//v.erase(v.begin(),v.end());  //从头到尾删除</span><br>    v.<span class="hljs-built_in">clear</span>();  <span class="hljs-comment">//也是清空操作</span><br>    <span class="hljs-built_in">print</span>(v);<br>&#125;<br></code></pre></td></tr></table></figure>















<h4 id="vector数据存取"><a href="#vector数据存取" class="headerlink" title="vector数据存取"></a>vector数据存取</h4><p><strong>功能描述</strong>：</p>
<ul>
<li>对vector中的数据的存取操作</li>
</ul>
<p><strong>函数原型</strong>：</p>
<ul>
<li><code>at(int idx);</code>    &#x2F;&#x2F;返回索引idx所指的数据</li>
<li><code>operator[];</code>      &#x2F;&#x2F;返回索引idx所指的数据</li>
<li><code>front();</code>           &#x2F;&#x2F;返回容器中第一个数据元素</li>
<li><code>back();</code>            &#x2F;&#x2F;返回容器中最后一个数据元素</li>
</ul>
<p>示例：</p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><code class="hljs c++"><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;iostream&gt;</span></span><br><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;vector&gt;</span></span><br><span class="hljs-keyword">using</span> <span class="hljs-keyword">namespace</span> std;<br><br><br><span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">test01</span><span class="hljs-params">()</span></span>&#123;<br>    vector&lt;<span class="hljs-type">int</span>&gt;v;<br>    <span class="hljs-keyword">for</span>(<span class="hljs-type">int</span> i=<span class="hljs-number">0</span>;i&lt;<span class="hljs-number">10</span>;i++)&#123;<br>        v.<span class="hljs-built_in">push_back</span>(i);<br>    &#125;<br>    <span class="hljs-comment">//利用[]方式访问数组中元素</span><br>    <span class="hljs-keyword">for</span>(<span class="hljs-type">int</span> i=<span class="hljs-number">0</span>;i&lt;v.<span class="hljs-built_in">size</span>();i++)&#123;<br>        cout&lt;&lt;v[i]&lt;&lt;<span class="hljs-string">&quot; &quot;</span>;<br>    &#125;<br>    cout&lt;&lt;endl;<br>    <span class="hljs-comment">//利用at方式访问元素</span><br>    <span class="hljs-keyword">for</span>(<span class="hljs-type">int</span> i=<span class="hljs-number">0</span>;i&lt;v.<span class="hljs-built_in">size</span>();i++)&#123;<br>		cout&lt;&lt;v.<span class="hljs-built_in">at</span>(i)&lt;&lt;<span class="hljs-string">&quot; &quot;</span>;<br>    &#125;<br>    cout&lt;&lt;endl;<br>    <br>    cout&lt;&lt;<span class="hljs-string">&quot;第一个元素为：&quot;</span>&lt;&lt;v.<span class="hljs-built_in">front</span>()&lt;&lt;endl;<br>    cout&lt;&lt;<span class="hljs-string">&quot;最后一个元素为：&quot;</span>&lt;&lt;v.<span class="hljs-built_in">back</span>()&lt;&lt;endl;<br>&#125;<br></code></pre></td></tr></table></figure>













<h4 id="vector互换容器"><a href="#vector互换容器" class="headerlink" title="vector互换容器"></a>vector互换容器</h4><p><strong>功能描述</strong>：</p>
<ul>
<li>实现两个容器内元素进行互换</li>
</ul>
<p><strong>函数原型</strong>：</p>
<ul>
<li><code>swap(vec);</code>    &#x2F;&#x2F;将vec与本身大的元素互换</li>
</ul>
<p>示例：</p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br></pre></td><td class="code"><pre><code class="hljs c++"><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;iostream&gt;</span></span><br><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;vector&gt;</span></span><br><span class="hljs-keyword">using</span> <span class="hljs-keyword">namespace</span> std;<br><br><span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">print</span><span class="hljs-params">(vector&lt;<span class="hljs-type">int</span>&gt;&amp;v)</span></span>&#123;<br>    <span class="hljs-keyword">for</span>(vector&lt;<span class="hljs-type">int</span>&gt;::iterator it=v.<span class="hljs-built_in">begin</span>();it!=v.<span class="hljs-built_in">end</span>();it++)&#123;<br>        cout&lt;&lt;*it&lt;&lt;<span class="hljs-string">&quot; &quot;</span>;<br>    &#125;<br>    cout&lt;&lt;endl;<br>&#125;<br><br><span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">test01</span><span class="hljs-params">()</span></span>&#123;<br>    vector&lt;<span class="hljs-type">int</span>&gt;v;<br>    <span class="hljs-keyword">for</span>(<span class="hljs-type">int</span> i=<span class="hljs-number">0</span>;i&lt;<span class="hljs-number">10</span>;i++)&#123;<br>        v.<span class="hljs-built_in">push_back</span>(i);<br>    &#125;<br>    <span class="hljs-built_in">print</span>(v);<br>    vector&lt;<span class="hljs-type">int</span>&gt;v1;<br>    <span class="hljs-keyword">for</span>(<span class="hljs-type">int</span> i=<span class="hljs-number">10</span>;i&gt;<span class="hljs-number">0</span>;i--)&#123;<br>		v1.<span class="hljs-built_in">push_back</span>(i);<br>    &#125;<br>    <span class="hljs-built_in">print</span>(v1);<br>    cout&lt;&lt;<span class="hljs-string">&quot;交换后：&quot;</span>&lt;&lt;endl;<br>    v1.<span class="hljs-built_in">swap</span>(v);<br>    <span class="hljs-built_in">print</span>(v);<br>    <span class="hljs-built_in">print</span>(v1);<br>&#125;<br><br><span class="hljs-comment">//实际用途</span><br><span class="hljs-comment">//巧用swap可以收缩内存空间</span><br><span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">test02</span><span class="hljs-params">()</span></span>&#123;<br>    vector&lt;<span class="hljs-type">int</span>&gt;v;<br>    <span class="hljs-keyword">for</span>(<span class="hljs-type">int</span> i=<span class="hljs-number">0</span>;i&lt;<span class="hljs-number">10000</span>;i++)&#123;<br>        v.<span class="hljs-built_in">push_back</span>(i);<br>        <br>    &#125;<br>    cout&lt;&lt;<span class="hljs-string">&quot;v的容量：&quot;</span>&lt;&lt;v.<span class="hljs-built_in">capacity</span>()&lt;&lt;endl;<br>    cout&lt;&lt;<span class="hljs-string">&quot;v的大小为：&quot;</span>&lt;&lt;v.<span class="hljs-built_in">size</span>()&lt;&lt;endl;<br>    v.<span class="hljs-built_in">resize</span>(<span class="hljs-number">3</span>);<br>    cout&lt;&lt;<span class="hljs-string">&quot;v的容量：&quot;</span>&lt;&lt;v.<span class="hljs-built_in">capacity</span>()&lt;&lt;endl;   <span class="hljs-comment">//容量不变</span><br>    cout&lt;&lt;<span class="hljs-string">&quot;v的大小为：&quot;</span>&lt;&lt;v.<span class="hljs-built_in">size</span>()&lt;&lt;endl;<br>    <span class="hljs-comment">//巧用swap收缩内存</span><br>    <span class="hljs-built_in">vector</span>&lt;<span class="hljs-type">int</span>&gt;(v).<span class="hljs-built_in">swap</span>(v);<br>    <span class="hljs-comment">//vector&lt;int&gt;(v)  匿名对象，当前行执行完，就将匿名对象回收</span><br>    <span class="hljs-comment">//.swap(v);   容量交换</span><br>    <span class="hljs-comment">//用swap会根据交换的容器大小来初始化容器的容量</span><br>    cout&lt;&lt;<span class="hljs-string">&quot;v的容量：&quot;</span>&lt;&lt;v.<span class="hljs-built_in">capacity</span>()&lt;&lt;endl;   <span class="hljs-comment">//容量收缩了</span><br>    cout&lt;&lt;<span class="hljs-string">&quot;v的大小为：&quot;</span>&lt;&lt;v.<span class="hljs-built_in">size</span>()&lt;&lt;endl;<br>&#125;<br></code></pre></td></tr></table></figure>











<h4 id="vector预留空间"><a href="#vector预留空间" class="headerlink" title="vector预留空间"></a>vector预留空间</h4><p><strong>功能描述</strong>：</p>
<ul>
<li>减少vector在动态扩展容量时的扩展次数</li>
</ul>
<p><strong>函数原型</strong>：</p>
<ul>
<li><code>reserve(int len);</code> &#x2F;&#x2F;容器预留len个元素长度，预留位置不初始化，元素不可访问</li>
</ul>
<p>示例：</p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><code class="hljs c++"><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;iostream&gt;</span></span><br><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;vector&gt;</span></span><br><span class="hljs-keyword">using</span> <span class="hljs-keyword">namespace</span> std;<br><br><span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">test01</span><span class="hljs-params">()</span></span>&#123;<br>    vector&lt;<span class="hljs-type">int</span>&gt;v;<br>    <span class="hljs-comment">//利用reserve预留空间，减少开辟次数</span><br>    v.<span class="hljs-built_in">reserve</span>(<span class="hljs-number">100000</span>);<br>    <span class="hljs-type">int</span> num=<span class="hljs-number">0</span>;<span class="hljs-comment">//统计容器开辟次数</span><br>    <span class="hljs-type">int</span> *p=<span class="hljs-literal">NULL</span>;<br>    <span class="hljs-keyword">for</span>(<span class="hljs-type">int</span> i=<span class="hljs-number">0</span>;i&lt;<span class="hljs-number">100000</span>;i++)&#123;<br>		v.<span class="hljs-built_in">push_back</span>(i);<br>        <span class="hljs-keyword">if</span>(p!=&amp;v[<span class="hljs-number">0</span>])&#123;<br>            p=&amp;v[<span class="hljs-number">0</span>];<br>            num++;<br>        &#125;<br>    &#125;<br>    cout&lt;&lt;<span class="hljs-string">&quot;num= &quot;</span>&lt;&lt;num&lt;&lt;endl;<br>&#125;<br></code></pre></td></tr></table></figure>















<h3 id="deque容器"><a href="#deque容器" class="headerlink" title="deque容器"></a>deque容器</h3><h4 id="基本概念"><a href="#基本概念" class="headerlink" title="基本概念"></a>基本概念</h4><p><strong>功能</strong>：</p>
<ul>
<li>双端数组，可以对头端进行插入删除操作</li>
</ul>
<p><strong>deque与vector区别</strong>：</p>
<ul>
<li>vector对于头部的插入删除效率低，数据量越大，效率越低</li>
<li>deque相对而言，对头部的插入删除速度会比vector快</li>
<li>vector访问元素时速度会比deque快，这和两者内部实现有关</li>
</ul>
<p><strong>deque内部工作原理</strong>：</p>
<p>deque内部有一个<strong>中控器</strong>，维护每段缓冲区中的内容，缓冲区中存放真实数据</p>
<p>中控器维护的是每个缓冲区的地址，使得使用deque时像一片连续的内存空间</p>
<p><img src="https://cdn.jsdelivr.net/gh/MoonforDream/photohouse/hexo/202405190009277.png" srcset="/img/loading.gif" lazyload alt="image"></p>
<ul>
<li>deque容器的迭代器也是支持随机访问的</li>
</ul>
<h4 id="deque构造函数"><a href="#deque构造函数" class="headerlink" title="deque构造函数"></a>deque构造函数</h4><p><strong>功能描述</strong>：</p>
<ul>
<li>deque容器构造</li>
</ul>
<p><strong>函数原型</strong>：</p>
<ul>
<li><code>deque&lt;T&gt; deqT;</code>   &#x2F;&#x2F;默认构造形式</li>
<li><code>deque(beg,end);</code>  &#x2F;&#x2F;构造函数将[beg,end)区间中的元素拷贝给本身</li>
<li><code>deque(n,elem);</code>    &#x2F;&#x2F;构造函数将n个elem拷贝给本身</li>
<li><code>deque(const deque &amp;deq);</code>  &#x2F;&#x2F;拷贝构造函数</li>
</ul>
<p>示例：</p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><code class="hljs c++"><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;iostream&gt;</span></span><br><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;deque&gt;</span></span><br><span class="hljs-keyword">using</span> <span class="hljs-keyword">namespace</span> std;<br><br><span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">print</span><span class="hljs-params">(<span class="hljs-type">const</span> deque&lt;<span class="hljs-type">int</span>&gt; &amp;d)</span></span>&#123;  <span class="hljs-comment">//内部的*it不能更改了</span><br>    <span class="hljs-keyword">for</span>(deque&lt;<span class="hljs-type">int</span>&gt;:: const_iterator it=d.<span class="hljs-built_in">begin</span>();it!=d.<span class="hljs-built_in">end</span>();it++)&#123;<br>        cout&lt;&lt;*it&lt;&lt;<span class="hljs-string">&quot; &quot;</span>;<br>    &#125;<br>    cout&lt;&lt;endl;<br>&#125;<br><br><span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">test01</span><span class="hljs-params">()</span></span>&#123;<br>    deque&lt;<span class="hljs-type">int</span>&gt;d1;<br>    <span class="hljs-keyword">for</span>(<span class="hljs-type">int</span> i=<span class="hljs-number">0</span>;i&lt;<span class="hljs-number">10</span>;i++)&#123;<br>        d1.<span class="hljs-built_in">push_back</span>(i);<br>    &#125;<br>    <span class="hljs-built_in">print</span>(d1);<br>    deque&lt;<span class="hljs-type">int</span>&gt;<span class="hljs-built_in">d2</span>(d1.<span class="hljs-built_in">begin</span>(),d1.<span class="hljs-built_in">end</span>());<br>    <span class="hljs-built_in">print</span>(d2);<br>    deque&lt;<span class="hljs-type">int</span>&gt;<span class="hljs-built_in">d3</span>(<span class="hljs-number">10</span>,<span class="hljs-number">100</span>);<br>    <span class="hljs-built_in">print</span>(d3);<br>    deque&lt;<span class="hljs-type">int</span>&gt;<span class="hljs-built_in">d4</span>(d3);<br>    <span class="hljs-built_in">print</span>(d4);<br>&#125;<br></code></pre></td></tr></table></figure>















<h4 id="deque赋值操作"><a href="#deque赋值操作" class="headerlink" title="deque赋值操作"></a>deque赋值操作</h4><p><strong>功能描述</strong>：</p>
<ul>
<li>给deque容器进行赋值</li>
</ul>
<p><strong>函数原型</strong>：</p>
<ul>
<li><code>deque&amp; operator=(const deque &amp;deq);</code>   &#x2F;&#x2F;重载等号操作符</li>
<li><code>assign(beg,end);</code>    &#x2F;&#x2F;将[beg,end)区间中的数据拷贝赋值给本身</li>
<li><code>assign(n,elem);</code>     &#x2F;&#x2F;将n个elem赋值给本身</li>
</ul>
<p>示例：</p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><code class="hljs c++"><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;iostream&gt;</span></span><br><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;deque&gt;</span></span><br><span class="hljs-keyword">using</span> <span class="hljs-keyword">namespace</span> std;<br><br><span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">print</span><span class="hljs-params">(<span class="hljs-type">const</span> deque&lt;<span class="hljs-type">int</span>&gt; &amp;d)</span></span>&#123;  <span class="hljs-comment">//内部的*it不能更改了</span><br>    <span class="hljs-keyword">for</span>(deque&lt;<span class="hljs-type">int</span>&gt;:: const_iterator it=d.<span class="hljs-built_in">begin</span>();it!=d.<span class="hljs-built_in">end</span>();it++)&#123;<br>        cout&lt;&lt;*it&lt;&lt;<span class="hljs-string">&quot; &quot;</span>;<br>    &#125;<br>    cout&lt;&lt;endl;<br>&#125;<br><br><span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">test01</span><span class="hljs-params">()</span></span>&#123;<br>    deque&lt;<span class="hljs-type">int</span>&gt;d1;<br>    <span class="hljs-keyword">for</span>(<span class="hljs-type">int</span> i=<span class="hljs-number">0</span>;i&lt;<span class="hljs-number">10</span>;i++)&#123;<br>        d1.<span class="hljs-built_in">push_back</span>(i);<br>    &#125;<br>    <span class="hljs-built_in">print</span>(d1);<br>    <span class="hljs-comment">//第一种赋值</span><br>    deque&lt;<span class="hljs-type">int</span>&gt;d2;<br>    d2=d1;<br>    <span class="hljs-built_in">print</span>(d2);<br>    <span class="hljs-comment">//第二种</span><br>    deque&lt;<span class="hljs-type">int</span>&gt;d3;<br>    d3.<span class="hljs-built_in">assign</span>(d1.<span class="hljs-built_in">begin</span>(),d1.<span class="hljs-built_in">end</span>());<br>    <span class="hljs-built_in">print</span>(d3);<br>    <span class="hljs-comment">//第三种</span><br>    deque&lt;<span class="hljs-type">int</span>&gt;d4;<br>    d4.<span class="hljs-built_in">assign</span>(<span class="hljs-number">10</span>,<span class="hljs-number">100</span>);<br>    <span class="hljs-built_in">print</span>(d4);<br>&#125;<br></code></pre></td></tr></table></figure>









<h4 id="deque大小操作"><a href="#deque大小操作" class="headerlink" title="deque大小操作"></a>deque大小操作</h4><p><strong>功能描述</strong>：</p>
<ul>
<li>对deque容器的大小进行操作</li>
</ul>
<p><strong>函数原型</strong>：</p>
<ul>
<li><code>deque.empty();</code>     &#x2F;&#x2F;判断容器是否为空</li>
<li><code>deque.size();</code>      &#x2F;&#x2F;返回容器中的元素个数</li>
<li><code>deque.resize(num);</code> &#x2F;&#x2F;重新指定容器的长度num，若容器变长，则以默认值填充新位置，如果容器变短，则末尾超出容器长度的元素被删除</li>
<li><code>deque.resize(num,elem);</code>   &#x2F;&#x2F;重新指定容器的长度为num，若容器变长，则以elem值填充新位置。如果容器变短，则末尾超出容器长度的元素被删除。</li>
</ul>
<p>示例：</p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><code class="hljs c++"><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;iostream&gt;</span></span><br><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;deque&gt;</span></span><br><span class="hljs-keyword">using</span> <span class="hljs-keyword">namespace</span> std;<br><br><br><span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">print</span><span class="hljs-params">(<span class="hljs-type">const</span> deque&lt;<span class="hljs-type">int</span>&gt;&amp;d)</span></span>&#123;<br>    <span class="hljs-keyword">for</span>(deque&lt;<span class="hljs-type">int</span>&gt;::const_iterator it=d.<span class="hljs-built_in">begin</span>();it!=d.<span class="hljs-built_in">end</span>();it++)&#123;<br>        cout&lt;&lt;*it&lt;&lt;<span class="hljs-string">&quot; &quot;</span>;<br>    &#125;<br>    cout&lt;&lt;endl;<br>&#125;<br><br><span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">test01</span><span class="hljs-params">()</span></span>&#123;<br>    deque&lt;<span class="hljs-type">int</span>&gt;d1;<br>    <span class="hljs-keyword">for</span>(<span class="hljs-type">int</span> i=<span class="hljs-number">0</span>;i&lt;<span class="hljs-number">10</span>;i++)&#123;<br>        d1.<span class="hljs-built_in">push_back</span>(i);<br>    &#125;<br>    <span class="hljs-built_in">print</span>(d1);<br>    <span class="hljs-keyword">if</span>(d1.<span class="hljs-built_in">empty</span>())&#123;<br>        cout&lt;&lt;<span class="hljs-string">&quot;d1为空&quot;</span>&lt;&lt;endl;<br>    &#125;<span class="hljs-keyword">else</span>&#123;<br>        cout&lt;&lt;<span class="hljs-string">&quot;d1不为空&quot;</span>&lt;&lt;endl;<br>        cout&lt;&lt;<span class="hljs-string">&quot;d1的大小为：&quot;</span>&lt;&lt;d1.<span class="hljs-built_in">size</span>()&lt;&lt;endl;<br>        <span class="hljs-comment">//deque容器没有容量概念</span><br>    &#125;<br>    <span class="hljs-comment">//重新指定大小</span><br>    d1.<span class="hljs-built_in">resize</span>(<span class="hljs-number">15</span>);<br>    <span class="hljs-built_in">print</span>(d1);<br>    d1.<span class="hljs-built_in">resize</span>(<span class="hljs-number">15</span>,<span class="hljs-number">1</span>);<br>    <span class="hljs-built_in">print</span>(d1);<br>    d1.<span class="hljs-built_in">resize</span>(<span class="hljs-number">5</span>);<br>    <span class="hljs-built_in">print</span>(d1);<br>&#125;<br></code></pre></td></tr></table></figure>

<blockquote>
<p><strong>总结</strong>：deque容器是没有容量的概念的。</p>
</blockquote>
<h4 id="deque插入和删除"><a href="#deque插入和删除" class="headerlink" title="deque插入和删除"></a>deque插入和删除</h4><p><strong>功能描述</strong>：</p>
<ul>
<li>向deque容器中插入和删除数据</li>
</ul>
<p><strong>函数原型</strong>：</p>
<p>两端插入删除操作：</p>
<ul>
<li><code>push_back(elem);</code>   &#x2F;&#x2F;在容器尾部添加一个数据</li>
<li><code>push_front(elem);</code> &#x2F;&#x2F;在容器的头部插入一个数据</li>
<li><code>pop_back();</code>     &#x2F;&#x2F;删除容器最后一个数据</li>
<li><code>pop_front();</code>   &#x2F;&#x2F;删除容器第一个数据</li>
</ul>
<p>指定位置操作：</p>
<ul>
<li><code>insert(pos,elem);</code>  &#x2F;&#x2F;在pos位置插入一个elem元素的拷贝，返回新数据的位置。</li>
<li><code>insert(pos,n,elem);</code>  &#x2F;&#x2F;在pos位置插入n个elem数据，无返回值</li>
<li><code>insert(pos,beg,end);</code>  &#x2F;&#x2F;在pos位置插入[beg,end)区间的数据，无返回值</li>
<li><code>clear();</code>  &#x2F;&#x2F;清空容器的所有数据</li>
<li><code>erase(beg,end);</code>   &#x2F;&#x2F;删除[beg,end)区间的数据，返回下一个数据的位置</li>
<li><code>erase(pos);</code>   &#x2F;&#x2F;删除pos位置的数据，返回下一个数据的位置</li>
</ul>
<p>示例：</p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br></pre></td><td class="code"><pre><code class="hljs c++"><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;iostream&gt;</span></span><br><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;deque&gt;</span></span><br><span class="hljs-keyword">using</span> <span class="hljs-keyword">namespace</span> std;<br><br><span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">print</span><span class="hljs-params">(<span class="hljs-type">const</span> deque&lt;<span class="hljs-type">int</span>&gt;&amp;d)</span></span>&#123;<br>    <span class="hljs-keyword">for</span>(deque&lt;<span class="hljs-type">int</span>&gt;::const_iterator it=d.<span class="hljs-built_in">begin</span>();it!=d.<span class="hljs-built_in">end</span>();it++)&#123;<br>        cout&lt;&lt;*it&lt;&lt;<span class="hljs-string">&quot; &quot;</span>;<br>    &#125;<br>    cout&lt;&lt;endl;<br>&#125;<br><br><span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">test01</span><span class="hljs-params">()</span></span>&#123;<br>    deque&lt;<span class="hljs-type">int</span>&gt;d1;<br>    <span class="hljs-comment">//尾插法</span><br>    d1.<span class="hljs-built_in">push_back</span>(<span class="hljs-number">10</span>);<br>    d1.<span class="hljs-built_in">push_back</span>(<span class="hljs-number">20</span>);<br>    <span class="hljs-comment">//头插</span><br>    d1.<span class="hljs-built_in">push_front</span>(<span class="hljs-number">100</span>);<br>    d1.<span class="hljs-built_in">push_front</span>(<span class="hljs-number">200</span>);<br>    <span class="hljs-built_in">print</span>(d1);<br>    <span class="hljs-comment">//尾删</span><br>    d1.<span class="hljs-built_in">pop_back</span>();<br>    <span class="hljs-built_in">print</span>(d1);<br>    <span class="hljs-comment">//头删</span><br>    d1.<span class="hljs-built_in">pop_front</span>();<br>    <span class="hljs-built_in">print</span>(d1);<br>&#125;<br><br><span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">test02</span><span class="hljs-params">()</span></span>&#123;<br>    deque&lt;<span class="hljs-type">int</span>&gt;d1;<br>    d1.<span class="hljs-built_in">push_back</span>(<span class="hljs-number">10</span>);<br>    d1.<span class="hljs-built_in">push_back</span>(<span class="hljs-number">20</span>);<br>    d1.<span class="hljs-built_in">push_front</span>(<span class="hljs-number">100</span>);<br>    d1.<span class="hljs-built_in">push_front</span>(<span class="hljs-number">200</span>);<br>    <span class="hljs-built_in">print</span>(d1);<br>    <span class="hljs-comment">//insert插入</span><br>    d1.<span class="hljs-built_in">insert</span>(d1.<span class="hljs-built_in">begin</span>(),<span class="hljs-number">1000</span>);<br>    <span class="hljs-built_in">print</span>(d1);<br>    d1.<span class="hljs-built_in">insert</span>(d1.<span class="hljs-built_in">begin</span>(),<span class="hljs-number">2</span>,<span class="hljs-number">10000</span>);<br>    <span class="hljs-built_in">print</span>(d1);<br>    <span class="hljs-comment">//按照区间进行插入</span><br>    deque&lt;<span class="hljs-type">int</span>&gt;d2;<br>    d2.<span class="hljs-built_in">push_back</span>(<span class="hljs-number">1</span>);<br>    d2.<span class="hljs-built_in">push_back</span>(<span class="hljs-number">2</span>);<br>    d2.<span class="hljs-built_in">push_back</span>(<span class="hljs-number">3</span>);<br>    d1.<span class="hljs-built_in">insert</span>(d1.<span class="hljs-built_in">begin</span>(),d2.<span class="hljs-built_in">begin</span>(),d2.<span class="hljs-built_in">end</span>());<br>    <span class="hljs-built_in">print</span>(d1);<br>&#125;<br><br><br><span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">test03</span><span class="hljs-params">()</span></span>&#123;<br>    deque&lt;<span class="hljs-type">int</span>&gt;d1;<br>    d1.<span class="hljs-built_in">push_back</span>(<span class="hljs-number">10</span>);<br>    d1.<span class="hljs-built_in">push_back</span>(<span class="hljs-number">20</span>);<br>    d1.<span class="hljs-built_in">push_front</span>(<span class="hljs-number">100</span>);<br>    d1.<span class="hljs-built_in">push_front</span>(<span class="hljs-number">200</span>);<br>    <span class="hljs-comment">//删除</span><br>    deque&lt;<span class="hljs-type">int</span>&gt;::iterator it=d1.<span class="hljs-built_in">begin</span>();<br>    it++;<br>    d1.<span class="hljs-built_in">erase</span>(it);<br>    <span class="hljs-built_in">print</span>(d1);<br>    <span class="hljs-comment">//按照区间方式删除</span><br>    d1.<span class="hljs-built_in">erase</span>(d1.<span class="hljs-built_in">begin</span>(),d1.<span class="hljs-built_in">end</span>());<br>    <span class="hljs-comment">//清空</span><br>    d1.<span class="hljs-built_in">clear</span>();<br>    <span class="hljs-built_in">print</span>(d1);<br>&#125;<br></code></pre></td></tr></table></figure>

<blockquote>
<p><strong>总结</strong>：</p>
<ul>
<li>插入和删除提供的位置是迭代器！</li>
</ul>
</blockquote>
<h4 id="deque数据存取"><a href="#deque数据存取" class="headerlink" title="deque数据存取"></a>deque数据存取</h4><p><strong>功能描述</strong>：</p>
<ul>
<li>对deque中的数据的存取操作</li>
</ul>
<p><strong>函数原型</strong>：</p>
<ul>
<li><code>at(int idx);</code>   &#x2F;&#x2F;返回索引idx所指数据</li>
<li><code>operator[];</code>   &#x2F;&#x2F;返回索引idx所指数据</li>
<li><code>front();</code>    &#x2F;&#x2F;返回容器中第一个数据元素</li>
<li><code>back();</code>      &#x2F;&#x2F;返回容器中最后一个数据元素</li>
</ul>
<p>示例：</p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><code class="hljs c++"><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;iostream&gt;</span></span><br><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;deque&gt;</span></span><br><span class="hljs-keyword">using</span> <span class="hljs-keyword">namespace</span> std;<br><br><span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">test01</span><span class="hljs-params">()</span></span>&#123;<br>    deque&lt;<span class="hljs-type">int</span>&gt;d;<br>    d.<span class="hljs-built_in">push_back</span>(<span class="hljs-number">10</span>);<br>    d.<span class="hljs-built_in">push_back</span>(<span class="hljs-number">20</span>);<br>    d.<span class="hljs-built_in">push_back</span>(<span class="hljs-number">30</span>);<br>    d.<span class="hljs-built_in">push_front</span>(<span class="hljs-number">100</span>);<br>    d.<span class="hljs-built_in">push_front</span>(<span class="hljs-number">200</span>);<br>    d.<span class="hljs-built_in">push_front</span>(<span class="hljs-number">300</span>);<br>    <span class="hljs-comment">//通过[]方式访问元素</span><br>    <span class="hljs-keyword">for</span>(<span class="hljs-type">int</span> i=<span class="hljs-number">0</span>;i&lt;d.<span class="hljs-built_in">size</span>();i++)&#123;<br>        cout&lt;&lt;d[i]&lt;&lt;<span class="hljs-string">&quot; &quot;</span>;<br>    &#125;<br>    cout&lt;&lt;endl;<br>    <br>    <span class="hljs-comment">//通过at方式访问元素</span><br>    <span class="hljs-keyword">for</span>(<span class="hljs-type">int</span> i=<span class="hljs-number">0</span>;i&lt;d.<span class="hljs-built_in">size</span>();i++)&#123;<br>        cout&lt;&lt;d.<span class="hljs-built_in">at</span>(i)&lt;&lt;<span class="hljs-string">&quot; &quot;</span>;<br>    &#125;<br>    cout&lt;&lt;endl;<br>    cout&lt;&lt;<span class="hljs-string">&quot;第一个元素为：&quot;</span>&lt;&lt;d.<span class="hljs-built_in">front</span>()&lt;&lt;endl;<br>    cout&lt;&lt;<span class="hljs-string">&quot;最后一个元素为：&quot;</span>&lt;&lt;d.<span class="hljs-built_in">back</span>()&lt;&lt;endl;<br>&#125;<br></code></pre></td></tr></table></figure>











<h4 id="deque排序"><a href="#deque排序" class="headerlink" title="deque排序"></a>deque排序</h4><p><strong>功能描述</strong>：</p>
<ul>
<li>利用算法实现deque容器进行排序</li>
</ul>
<p><strong>算法</strong>：</p>
<ul>
<li><code>sort(iterator beg,iterator end)</code>   &#x2F;&#x2F;对beg和end区间内元素进行排序</li>
</ul>
<p>示例：</p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><code class="hljs c++"><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;iostream&gt;</span></span><br><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;deque&gt;</span></span><br><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;algorithm&gt;</span></span><br><span class="hljs-keyword">using</span> <span class="hljs-keyword">namespace</span> std;<br><br><span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">print</span><span class="hljs-params">(<span class="hljs-type">const</span> deque&lt;<span class="hljs-type">int</span>&gt;&amp;d)</span></span>&#123;<br>    <span class="hljs-keyword">for</span>(deque&lt;<span class="hljs-type">int</span>&gt;::const_iterator it=d.<span class="hljs-built_in">begin</span>();it!=d.<span class="hljs-built_in">end</span>();it++)&#123;<br>        cout&lt;&lt;*it&lt;&lt;<span class="hljs-string">&quot; &quot;</span>;<br>    &#125;<br>    cout&lt;&lt;endl;<br>&#125;<br><br><span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">test01</span><span class="hljs-params">()</span></span>&#123;<br>    deque&lt;<span class="hljs-type">int</span>&gt;d;<br>    d.<span class="hljs-built_in">push_back</span>(<span class="hljs-number">10</span>);<br>    d.<span class="hljs-built_in">push_back</span>(<span class="hljs-number">20</span>);<br>    d.<span class="hljs-built_in">push_back</span>(<span class="hljs-number">30</span>);<br>    d.<span class="hljs-built_in">push_front</span>(<span class="hljs-number">100</span>);<br>    d.<span class="hljs-built_in">push_front</span>(<span class="hljs-number">200</span>);<br>    d.<span class="hljs-built_in">push_front</span>(<span class="hljs-number">300</span>);<br>    <span class="hljs-comment">//排序</span><br>    <span class="hljs-comment">//对于支持随机访问的迭代器的容器，都可以利用sort算法直接进行排序</span><br>    <span class="hljs-built_in">sort</span>(d.<span class="hljs-built_in">begin</span>(),a.<span class="hljs-built_in">end</span>());<br>    cout&lt;&lt;<span class="hljs-string">&quot;排序后结果：&quot;</span>&lt;&lt;endl;<br>    <span class="hljs-built_in">print</span>(d);  <span class="hljs-comment">//默认排序规则从小到大升序</span><br>&#125;<br></code></pre></td></tr></table></figure>















<h3 id="stack-栈-容器"><a href="#stack-栈-容器" class="headerlink" title="stack(栈)容器"></a>stack(栈)容器</h3><p><strong>基本概念</strong>：</p>
<p><strong>概念</strong>：stack是一种<strong>先进后出</strong>(First In Last Out,FILO)的数据结构，它只有一个出口</p>
<p><img src="https://cdn.jsdelivr.net/gh/MoonforDream/photohouse/hexo/202405190009278.png" srcset="/img/loading.gif" lazyload alt="image"></p>
<p>栈中只有顶端的元素才可以被外界使用，因此栈不允许有遍历行为</p>
<p>栈中进入数据称为 — <strong>入栈</strong><code>push</code></p>
<p>栈中弹出数据称为 — <strong>出栈</strong><code>pop</code></p>
<h4 id="stack常用接口"><a href="#stack常用接口" class="headerlink" title="stack常用接口"></a>stack常用接口</h4><p><strong>功能描述</strong>：</p>
<ul>
<li>栈容器常用的对外接口</li>
</ul>
<p><strong>构造函数</strong>：</p>
<ul>
<li><code>stack&lt;T&gt; stk;</code>   &#x2F;&#x2F;stack采用模板类实现，stack对象的默认构造形式</li>
<li><code>stack(const stack &amp;stk);</code>   &#x2F;&#x2F;拷贝构造函数</li>
</ul>
<p><strong>赋值操作</strong>：</p>
<ul>
<li><code>stack&amp; operator=(const stack &amp;stk);</code>    &#x2F;&#x2F;重载等号操作符</li>
</ul>
<p><strong>数据存取</strong>：</p>
<ul>
<li><code>push(elem);</code>   &#x2F;&#x2F;向栈顶添加元素</li>
<li><code>pop();</code>    &#x2F;&#x2F;从栈顶移除第一个元素</li>
<li><code>top();</code>    &#x2F;&#x2F;返回栈顶元素</li>
</ul>
<p><strong>大小操作</strong>：</p>
<ul>
<li><code>empty();</code>   &#x2F;&#x2F;判断堆栈是否为空</li>
<li><code>size();</code>     &#x2F;&#x2F;返回栈的大小</li>
</ul>
<p>示例：</p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><code class="hljs c++"><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;iostream&gt;</span></span><br><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;stack&gt;</span></span><br><span class="hljs-keyword">using</span> <span class="hljs-keyword">namespace</span> std;<br><br><span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">test01</span><span class="hljs-params">()</span></span>&#123;<br>    stack&lt;<span class="hljs-type">int</span>&gt;s;<br>    <span class="hljs-comment">//入栈</span><br>    s.<span class="hljs-built_in">push</span>(<span class="hljs-number">10</span>);<br>    s.<span class="hljs-built_in">push</span>(<span class="hljs-number">20</span>);<br>    s.<span class="hljs-built_in">push</span>(<span class="hljs-number">30</span>);<br>    s.<span class="hljs-built_in">push</span>(<span class="hljs-number">40</span>);<br>    cout&lt;&lt;<span class="hljs-string">&quot;栈的大小：&quot;</span>&lt;&lt;s.<span class="hljs-built_in">size</span>()&lt;&lt;endl;<br>    <span class="hljs-comment">//只要栈不为空，查看栈顶，并且执行出栈操作</span><br>    <span class="hljs-keyword">while</span>(!s.<span class="hljs-built_in">empty</span>())&#123;<br>        cout&lt;&lt;<span class="hljs-string">&quot;栈顶元素为：&quot;</span>&lt;&lt;s.<span class="hljs-built_in">top</span>()&lt;&lt;endl;<br>        <span class="hljs-comment">//出栈</span><br>        s.<span class="hljs-built_in">pop</span>();<br>    &#125;<br>    cout&lt;&lt;<span class="hljs-string">&quot;栈的大小为：&quot;</span>&lt;&lt;s.<span class="hljs-built_in">size</span>()&lt;&lt;endl;<br>&#125;<br></code></pre></td></tr></table></figure>









<h3 id="queue-队列-容器"><a href="#queue-队列-容器" class="headerlink" title="queue(队列)容器"></a>queue(队列)容器</h3><h4 id="基本概念-1"><a href="#基本概念-1" class="headerlink" title="基本概念"></a>基本概念</h4><p><strong>概念</strong>：Queue是一种先进先出(First In First Out,FIFO)的数据结构，它有两个出口</p>
<p><img src="https://cdn.jsdelivr.net/gh/MoonforDream/photohouse/hexo/202405190009279.png" srcset="/img/loading.gif" lazyload alt="image"></p>
<p>队列容器允许从一端新增元素，从另一端移除元素</p>
<p>队列中只有队头和队尾才可以被外界使用，因此队列不允许有遍历行为</p>
<p>队列中进数据称为 — <strong>入队</strong><code>push</code></p>
<p>队列中出数据称为 — <strong>出队</strong><code>pop</code></p>
<h4 id="queue常用接口"><a href="#queue常用接口" class="headerlink" title="queue常用接口"></a>queue常用接口</h4><p><strong>功能描述</strong>：</p>
<ul>
<li>队列容器常用的对外接口</li>
</ul>
<p><strong>构造函数</strong>：</p>
<ul>
<li><code>queue&lt;T&gt; que;</code>    &#x2F;&#x2F;queue采用模板类实现，queue对象的默认构造形式</li>
<li><code>queue(const queue &amp;que);</code>    &#x2F;&#x2F;拷贝构造函数</li>
</ul>
<p><strong>赋值操作</strong>：</p>
<ul>
<li><code>queue&amp; operator=(const queue &amp;que);</code>   &#x2F;&#x2F;重载等号操作符</li>
</ul>
<p><strong>数据存取</strong>：</p>
<ul>
<li><code>push(elem);</code>   &#x2F;&#x2F;往队尾添加元素</li>
<li><code>pop();</code>    &#x2F;&#x2F;从队头移除第一个元素</li>
<li><code>back();</code>   &#x2F;&#x2F;返回最后一个元素</li>
<li><code>front();</code>  &#x2F;&#x2F;返回第一个元素</li>
</ul>
<p><strong>大小操作</strong>：</p>
<ul>
<li><code>empty();</code>   &#x2F;&#x2F;判断堆栈是否为空</li>
<li><code>size();</code>    &#x2F;&#x2F;返回栈的大小</li>
</ul>
<p>示例：</p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br></pre></td><td class="code"><pre><code class="hljs c++"><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;iostream&gt;</span></span><br><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;queue&gt;</span></span><br><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;string&gt;</span></span><br><span class="hljs-keyword">using</span> <span class="hljs-keyword">namespace</span> std;<br><br><span class="hljs-keyword">class</span> <span class="hljs-title class_">Person</span>&#123;<br><span class="hljs-keyword">public</span>:<br>    <span class="hljs-built_in">Person</span>(string name,<span class="hljs-type">int</span> age)&#123;<br>        <span class="hljs-keyword">this</span>-&gt;m_name=name;<br>        <span class="hljs-keyword">this</span>-&gt;m_age=age;<br>    &#125;<br>    string m_name;<br>    <span class="hljs-type">int</span> m_age;<br>&#125;;<br><br><span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">test01</span><span class="hljs-params">()</span></span>&#123;<br>    queue&lt;Person&gt;q;<br>    <span class="hljs-function">Person <span class="hljs-title">p1</span><span class="hljs-params">(<span class="hljs-string">&quot;p1&quot;</span>,<span class="hljs-number">20</span>)</span></span>;<br>    <span class="hljs-function">Person <span class="hljs-title">p2</span><span class="hljs-params">(<span class="hljs-string">&quot;p2&quot;</span>,<span class="hljs-number">30</span>)</span></span>;<br>    <span class="hljs-function">Person <span class="hljs-title">p3</span><span class="hljs-params">(<span class="hljs-string">&quot;p3&quot;</span>,<span class="hljs-number">40</span>)</span></span>;<br>    <span class="hljs-function">Person <span class="hljs-title">p4</span><span class="hljs-params">(<span class="hljs-string">&quot;p4&quot;</span>,<span class="hljs-number">50</span>)</span></span>;<br>    <span class="hljs-comment">//入队</span><br>    q.<span class="hljs-built_in">push</span>(p1);<br>    q.<span class="hljs-built_in">push</span>(p2);<br>    q.<span class="hljs-built_in">push</span>(p3);<br>    q.<span class="hljs-built_in">push</span>(p4);<br>    cout&lt;&lt;<span class="hljs-string">&quot;队列大小：&quot;</span>&lt;&lt;q.<span class="hljs-built_in">size</span>()&lt;&lt;endl;<br>    <span class="hljs-comment">//判断只要队列不为空，查看队头，查看队尾，出队</span><br>    <span class="hljs-keyword">while</span>(!q.<span class="hljs-built_in">empty</span>())&#123;<br>        <span class="hljs-comment">//查看队头</span><br>        cout&lt;&lt;<span class="hljs-string">&quot;队头元素：&quot;</span>&lt;&lt;q.<span class="hljs-built_in">front</span>().m_name&lt;&lt;<span class="hljs-string">&quot; &quot;</span>&lt;&lt;q.<span class="hljs-built_in">front</span>().m_age&lt;&lt;endl;<br>        <span class="hljs-comment">//查看队尾</span><br>        cout&lt;&lt;<span class="hljs-string">&quot;队尾元素：&quot;</span>&lt;&lt;q.<span class="hljs-built_in">back</span>().m_name&lt;&lt;<span class="hljs-string">&quot; &quot;</span>&lt;&lt;q.<span class="hljs-built_in">back</span>().m_age&lt;&lt;endl;<br>        <span class="hljs-comment">//出队</span><br>        q.<span class="hljs-built_in">pop</span>();<br>    &#125;<br>    cout&lt;&lt;<span class="hljs-string">&quot;队列大小：&quot;</span>&lt;&lt;q.<span class="hljs-built_in">size</span>()&lt;&lt;endl;<br>&#125;<br></code></pre></td></tr></table></figure>













<h3 id="priority-queue-优先队列-容器"><a href="#priority-queue-优先队列-容器" class="headerlink" title="priority_queue(优先队列)容器"></a>priority_queue(优先队列)容器</h3><p><strong>优先队列定义</strong>：</p>
<ul>
<li>使用优先队列,**定义参数&lt;数据类型，容器类型，比较方法&gt;**，默认是大根堆<br>例子：      <code>priority_queue&lt;pair&lt;int,int&gt;,vector&lt;pair&lt;int,int&gt;&gt;,greater&lt;pair&lt;int,int&gt;&gt;&gt;q</code>;</li>
</ul>
<p><strong>数据存取操作</strong>：</p>
<ul>
<li><code>push(elem);</code>   &#x2F;&#x2F;添加元素</li>
<li><code>pop();</code>    &#x2F;&#x2F;从队列中删除最高优先级的元素</li>
<li><code>top();</code>    &#x2F;&#x2F;获取队列中最高优先级的元素</li>
</ul>
<p><strong>大小操作</strong>：</p>
<ul>
<li><code>empty();</code>   &#x2F;&#x2F;判断是否为空</li>
<li><code>size();</code>    &#x2F;&#x2F;获取队列大小</li>
</ul>
<h3 id="list-链表-容器"><a href="#list-链表-容器" class="headerlink" title="list(链表)容器"></a>list(链表)容器</h3><p><strong>功能</strong>：将数据进行链式存储</p>
<p><strong>链表</strong>(list)：是一种物理存储单元上非连续的存储结构，数据元素的逻辑顺序是通过链表中的指针链接实现的</p>
<p>链表的组成：链表由一系列<strong>结点</strong>组成</p>
<p>结点的组成：一个是存储数据元素的<strong>数据域</strong>，另一个是存储下一个结点地址的<strong>指针域</strong></p>
<p>STL的链表是一个<strong>双向循环链表</strong></p>
<p><img src="https://cdn.jsdelivr.net/gh/MoonforDream/photohouse/hexo/202405190009280.png" srcset="/img/loading.gif" lazyload alt="image"></p>
<p>由于链表的存储方式不是连续的内存内存空间，因此链表list中的迭代器只支持前移和后移属于<strong>双向迭代器</strong></p>
<p><strong>优点</strong>：</p>
<ul>
<li>采用动态存储分配，不会造成内存浪费和溢出</li>
<li>链表执行插入和删除操作十分方便，修改指针即可，不需要移动大量元素</li>
</ul>
<p><strong>缺点</strong>：</p>
<ul>
<li>链表灵活，但是空间(指针域)和时间(遍历)额外耗费较大</li>
</ul>
<p>List有一个重要的性质，插入操作和删除操作都不会造成原有list迭代器的失效，这在vector是不成立的</p>
<blockquote>
<p><strong>总结</strong>：STL中的<strong>List和vector是两个最常被使用的容器</strong>，各有优缺点</p>
</blockquote>
<h4 id="list构造函数"><a href="#list构造函数" class="headerlink" title="list构造函数"></a>list构造函数</h4><p><strong>功能描述</strong>：</p>
<ul>
<li>创建list容器</li>
</ul>
<p><strong>函数原型</strong>：</p>
<ul>
<li><code>list&lt;T&gt; lst;</code>   &#x2F;&#x2F;list采用模板类实现，对象的默认构造形式</li>
<li><code>list(beg,end);</code>  &#x2F;&#x2F;构造函数将[beg,end)区间中的元素拷贝给本身</li>
<li><code>list(n,elem);</code>  &#x2F;&#x2F;构造函数将n个elem拷贝给本身</li>
<li><code>list(const list &amp;lst);</code>   &#x2F;&#x2F;拷贝构造函数</li>
</ul>
<p>示例：</p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><code class="hljs c++"><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;iostream&gt;</span></span><br><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;list&gt;</span></span><br><span class="hljs-keyword">using</span> <span class="hljs-keyword">namespace</span> std;<br><br><span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">print</span><span class="hljs-params">(<span class="hljs-type">const</span> list&lt;<span class="hljs-type">int</span>&gt;&amp;l)</span></span>&#123;<br>    <span class="hljs-keyword">for</span>(list&lt;<span class="hljs-type">int</span>&gt;::const_iterator it=l.<span class="hljs-built_in">begin</span>();it!=l.<span class="hljs-built_in">end</span>();it++)&#123;<br>        cout&lt;&lt;*it&lt;&lt;<span class="hljs-string">&quot; &quot;</span>;<br>    &#125;<br>    cout&lt;&lt;endl;<br>&#125;<br><br><span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">test01</span><span class="hljs-params">()</span></span>&#123;<br>    list&lt;<span class="hljs-type">int</span>&gt;l;<br>    <span class="hljs-comment">//添加数据</span><br>    l.<span class="hljs-built_in">push_back</span>(<span class="hljs-number">10</span>);<br>    l.<span class="hljs-built_in">push_back</span>(<span class="hljs-number">20</span>);<br>    l.<span class="hljs-built_in">push_back</span>(<span class="hljs-number">30</span>);<br>    l.<span class="hljs-built_in">push_back</span>(<span class="hljs-number">40</span>);<br>    <span class="hljs-comment">//遍历容器</span><br>    <span class="hljs-built_in">print</span>(l);<br>    <span class="hljs-comment">//区间方式构造</span><br>    list&lt;<span class="hljs-type">int</span>&gt;<span class="hljs-built_in">l1</span>(l.<span class="hljs-built_in">begin</span>(),l.<span class="hljs-built_in">end</span>());<br>    <span class="hljs-built_in">print</span>(l1);<br>    <span class="hljs-comment">//拷贝构造</span><br>    list&lt;<span class="hljs-type">int</span>&gt;<span class="hljs-built_in">l2</span>(l1);<br>    <span class="hljs-built_in">print</span>(l2);<br>    <span class="hljs-comment">//n个elem</span><br>    list&lt;<span class="hljs-type">int</span>&gt;<span class="hljs-built_in">l3</span>(<span class="hljs-number">10</span>,<span class="hljs-number">1000</span>);<br>    <span class="hljs-built_in">print</span>(l3);<br>&#125;<br></code></pre></td></tr></table></figure>













<h4 id="list赋值和交换"><a href="#list赋值和交换" class="headerlink" title="list赋值和交换"></a>list赋值和交换</h4><p><strong>功能描述</strong>：</p>
<ul>
<li>给list容器进行赋值，以及交换list容器</li>
</ul>
<p><strong>函数原型</strong>：</p>
<ul>
<li><code>assign(beg,end);</code>    &#x2F;&#x2F;将[beg,end)区间中的数据拷贝赋值给本身</li>
<li><code>assign(n,elem);</code>    &#x2F;&#x2F;将n个elem拷贝赋值给本身</li>
<li><code>list&amp; operator=(const list &amp;lst);</code>    &#x2F;&#x2F;重载等号操作符</li>
<li><code>swap(lst);</code>     &#x2F;&#x2F;将lst与本身的元素互换</li>
</ul>
<p>示例：</p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br></pre></td><td class="code"><pre><code class="hljs c++"><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;iostream&gt;</span></span><br><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;list&gt;</span></span><br><span class="hljs-keyword">using</span> <span class="hljs-keyword">namespace</span> std;<br><br><span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">print</span><span class="hljs-params">(<span class="hljs-type">const</span> list&lt;<span class="hljs-type">int</span>&gt;&amp;l)</span></span>&#123;<br>    <span class="hljs-keyword">for</span>(list&lt;<span class="hljs-type">int</span>&gt;::const_iterator it=l.<span class="hljs-built_in">begin</span>();it!=l.<span class="hljs-built_in">end</span>();it++)&#123;<br>        cout&lt;&lt;*it&lt;&lt;<span class="hljs-string">&quot; &quot;</span>;<br>    &#125;<br>    cout&lt;&lt;endl;<br>&#125;<br><br><span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">test01</span><span class="hljs-params">()</span></span>&#123;<br>    list&lt;<span class="hljs-type">int</span>&gt;l;<br>    l.<span class="hljs-built_in">push_back</span>(<span class="hljs-number">10</span>);<br>    l.<span class="hljs-built_in">push_back</span>(<span class="hljs-number">20</span>);<br>    l.<span class="hljs-built_in">push_back</span>(<span class="hljs-number">30</span>);<br>    l.<span class="hljs-built_in">push_back</span>(<span class="hljs-number">40</span>);<br>    <span class="hljs-built_in">print</span>(l);<br>    list&lt;<span class="hljs-type">int</span>&gt;l1;<br>    l1=l;  <span class="hljs-comment">//operator= 赋值</span><br>    <span class="hljs-built_in">print</span>(l1);<br>    list&lt;<span class="hljs-type">int</span>&gt;l2;<br>    l2.<span class="hljs-built_in">assign</span>(l1.<span class="hljs-built_in">begin</span>(),l1.<span class="hljs-built_in">end</span>());<br>    <span class="hljs-built_in">print</span>(l2);<br>    list&lt;<span class="hljs-type">int</span>&gt;l3;<br>    l3.<span class="hljs-built_in">assign</span>(<span class="hljs-number">10</span>,<span class="hljs-number">100</span>);<br>    <span class="hljs-built_in">print</span>(l3);<br>&#125;<br><br><span class="hljs-comment">//交换</span><br><span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">test02</span><span class="hljs-params">()</span></span>&#123;<br>    list&lt;<span class="hljs-type">int</span>&gt;l;<br>    l.<span class="hljs-built_in">push_back</span>(<span class="hljs-number">10</span>);<br>    l.<span class="hljs-built_in">push_back</span>(<span class="hljs-number">20</span>);<br>    l.<span class="hljs-built_in">push_back</span>(<span class="hljs-number">30</span>);<br>    l.<span class="hljs-built_in">push_back</span>(<span class="hljs-number">40</span>);<br>    list&lt;<span class="hljs-type">int</span>&gt;l1;<br>    l1.<span class="hljs-built_in">assign</span>(<span class="hljs-number">10</span>,<span class="hljs-number">100</span>);<br>    cout&lt;&lt;<span class="hljs-string">&quot;交换前：&quot;</span>&lt;&lt;endl;<br>    <span class="hljs-built_in">print</span>(l);<br>    <span class="hljs-built_in">print</span>(l1);<br>    cout&lt;&lt;<span class="hljs-string">&quot;交换后：&quot;</span>&lt;&lt;endl;<br>    l.<span class="hljs-built_in">swap</span>(l1);<br>    <span class="hljs-built_in">print</span>(l);<br>    <span class="hljs-built_in">print</span>(l1);<br>&#125;<br></code></pre></td></tr></table></figure>











<h4 id="list大小操作"><a href="#list大小操作" class="headerlink" title="list大小操作"></a>list大小操作</h4><p><strong>功能描述</strong>：</p>
<ul>
<li>对list容器的大小进行操作</li>
</ul>
<p><strong>函数原型</strong>：</p>
<ul>
<li><code>size();</code>   &#x2F;&#x2F;返回容器中元素的个数</li>
<li><code>empty();</code>    &#x2F;&#x2F;判断容器是否为空</li>
<li><code>resize(num);</code>   &#x2F;&#x2F;重新指定容器的长度为num，若容器变长，则以默认值填充新位置，如果容器变短，则末尾超出容器长度的元素被删除</li>
<li><code>resize(num,elem);</code>   &#x2F;&#x2F;重新指定容器的长度为num，若容器变长，则以elem值填充新位置。如果容器变短，则末尾超出容器长度的元素被删除</li>
</ul>
<p>示例：</p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br></pre></td><td class="code"><pre><code class="hljs c++"><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;iostream&gt;</span></span><br><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;list&gt;</span></span><br><span class="hljs-keyword">using</span> <span class="hljs-keyword">namespace</span> std;<br><br><span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">print</span><span class="hljs-params">(<span class="hljs-type">const</span> list&lt;<span class="hljs-type">int</span>&gt;&amp;l)</span></span>&#123;<br>    <span class="hljs-keyword">for</span>(list&lt;<span class="hljs-type">int</span>&gt;::const_iterator it=l.<span class="hljs-built_in">begin</span>();it!=l.<span class="hljs-built_in">end</span>();it++)&#123;<br>        cout&lt;&lt;*it&lt;&lt;<span class="hljs-string">&quot; &quot;</span>;<br>    &#125;<br>    cout&lt;&lt;endl;<br>&#125;<br><br><span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">test01</span><span class="hljs-params">()</span></span>&#123;<br>    list&lt;<span class="hljs-type">int</span>&gt;l;<br>    l.<span class="hljs-built_in">push_back</span>(<span class="hljs-number">10</span>);<br>    l.<span class="hljs-built_in">push_back</span>(<span class="hljs-number">20</span>);<br>    l.<span class="hljs-built_in">push_back</span>(<span class="hljs-number">30</span>);<br>    l.<span class="hljs-built_in">push_back</span>(<span class="hljs-number">40</span>);<br>    <span class="hljs-built_in">print</span>(l);<br>    <br>    <span class="hljs-comment">//判断容器是否为空</span><br>    <span class="hljs-keyword">if</span>(l.<span class="hljs-built_in">empty</span>())&#123;<br>        cout&lt;&lt;<span class="hljs-string">&quot;l为空&quot;</span>&lt;&lt;endl;<br>    &#125;<span class="hljs-keyword">else</span>&#123;<br>		cout&lt;&lt;<span class="hljs-string">&quot;l不为空&quot;</span>&lt;&lt;endl;<br>        cout&lt;&lt;<span class="hljs-string">&quot;l的大小为：&quot;</span>&lt;&lt;l.<span class="hljs-built_in">size</span>()&lt;&lt;endl;<br>    &#125;<br>    <br>    <span class="hljs-comment">//重新指定大小</span><br>    l.<span class="hljs-built_in">resize</span>(<span class="hljs-number">10</span>);<br>    <span class="hljs-built_in">print</span>(l);<br>    l.<span class="hljs-built_in">resize</span>(<span class="hljs-number">11</span>,<span class="hljs-number">10000</span>);<br>    <span class="hljs-built_in">print</span>(l);<br>    l.<span class="hljs-built_in">resize</span>(<span class="hljs-number">2</span>);<br>    <span class="hljs-built_in">print</span>(l);<br>&#125;<br></code></pre></td></tr></table></figure>











<h4 id="list插入和删除"><a href="#list插入和删除" class="headerlink" title="list插入和删除"></a>list插入和删除</h4><p><strong>功能描述</strong>：</p>
<ul>
<li>对list容器进行数据的插入和删除</li>
</ul>
<p><strong>函数原型</strong>：</p>
<ul>
<li><code>push_back(elem);</code>    &#x2F;&#x2F;在容器尾部加入一个元素</li>
<li><code>pop_back();</code>    &#x2F;&#x2F;删除容器中最后一个元素</li>
<li><code>push_front(elem);</code>   &#x2F;&#x2F;在容器开头插入一个元素</li>
<li><code>pop_front();</code>  &#x2F;&#x2F;在容器开头移除第一个元素</li>
<li><code>insert(pos,elem);</code>   &#x2F;&#x2F;在pos位置插入elem元素的拷贝，返回新数据的位置</li>
<li><code>insert(pos,n,elem);</code>   &#x2F;&#x2F;在pos位置插入n个elem数据，无返回值</li>
<li><code>insert(pos,beg,end);</code>   &#x2F;&#x2F;在pos位置插入[beg,end)区间的数据，无返回值</li>
<li><code>clear();</code>   &#x2F;&#x2F;移除容器的所有数据</li>
<li><code>erase(beg,end);</code>   &#x2F;&#x2F;删除[beg,end)区间的数据，返回下一个数据的位置</li>
<li><code>erase(pos);</code>    &#x2F;&#x2F;删除pos位置的数据，返回下一个数据的位置</li>
<li><code>remove(elem);</code>   &#x2F;&#x2F;删除容器中所有与elem值匹配的元素</li>
</ul>
<p>示例：</p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br></pre></td><td class="code"><pre><code class="hljs c++"><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;iostream&gt;</span></span><br><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;list&gt;</span></span><br><span class="hljs-keyword">using</span> <span class="hljs-keyword">namespace</span> std;<br><br><span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">print</span><span class="hljs-params">(<span class="hljs-type">const</span> list&lt;<span class="hljs-type">int</span>&gt;l)</span></span>&#123;<br>    <span class="hljs-keyword">for</span>(list&lt;<span class="hljs-type">int</span>&gt;::const_iterator it=l.<span class="hljs-built_in">begin</span>();it!=l.<span class="hljs-built_in">end</span>();it++)&#123;<br>        cout&lt;&lt;*it&lt;&lt;<span class="hljs-string">&quot; &quot;</span>;<br>    &#125;<br>    cout&lt;&lt;endl;<br>&#125;<br><br><span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">test01</span><span class="hljs-params">()</span></span>&#123;<br>    list&lt;<span class="hljs-type">int</span>&gt;l;<br>    <span class="hljs-comment">//尾插</span><br>    l.<span class="hljs-built_in">push_back</span>(<span class="hljs-number">10</span>);<br>    l.<span class="hljs-built_in">push_back</span>(<span class="hljs-number">20</span>);<br>    l.<span class="hljs-built_in">push_back</span>(<span class="hljs-number">30</span>);<br>    <br>    <span class="hljs-comment">//头插</span><br>    l.<span class="hljs-built_in">push_front</span>(<span class="hljs-number">100</span>);<br>    l.<span class="hljs-built_in">push_front</span>(<span class="hljs-number">200</span>);<br>    l.<span class="hljs-built_in">push_front</span>(<span class="hljs-number">300</span>);<br>    <span class="hljs-built_in">print</span>(l);<br>    <span class="hljs-comment">//尾删</span><br>    l.<span class="hljs-built_in">pop_back</span>();<br>    <span class="hljs-built_in">print</span>(l);<br>    <span class="hljs-comment">//头删</span><br>    l.<span class="hljs-built_in">pop_front</span>();<br>    <span class="hljs-built_in">print</span>(l);<br>    <br>    <span class="hljs-comment">//insert插入</span><br>    list&lt;<span class="hljs-type">int</span>&gt;::iterator it=l.<span class="hljs-built_in">begin</span>();<br>    l.<span class="hljs-built_in">insert</span>(++it,<span class="hljs-number">1000</span>);<br>    <span class="hljs-built_in">print</span>(l);<br>    <br>    <span class="hljs-comment">//删除</span><br>    it=l.<span class="hljs-built_in">begin</span>();<br>    l.<span class="hljs-built_in">erase</span>(++it);<br>    <span class="hljs-built_in">print</span>(l);<br>    <br>    <span class="hljs-comment">//移除</span><br>    l.<span class="hljs-built_in">push_back</span>(<span class="hljs-number">10000</span>);<br>    l.<span class="hljs-built_in">push_back</span>(<span class="hljs-number">10000</span>);<br>    l.<span class="hljs-built_in">push_back</span>(<span class="hljs-number">10000</span>);<br>    <span class="hljs-built_in">print</span>(l);<br>    l.<span class="hljs-built_in">remove</span>(<span class="hljs-number">10000</span>);<br>    <span class="hljs-built_in">print</span>(l);<br>    <br>    <span class="hljs-comment">//清空</span><br>    l.<span class="hljs-built_in">clear</span>();<br>    <span class="hljs-built_in">print</span>(l);<br>    <br>&#125;<br></code></pre></td></tr></table></figure>













<h4 id="list数据存取"><a href="#list数据存取" class="headerlink" title="list数据存取"></a>list数据存取</h4><p><strong>功能·描述</strong>：</p>
<ul>
<li>对list容器中数据进行存取</li>
</ul>
<p><strong>函数原型</strong>：</p>
<ul>
<li><code>front();</code>   &#x2F;&#x2F;返回第一个元素</li>
<li><code>back();</code>     &#x2F;&#x2F;返回最后一个元素</li>
</ul>
<p>示例：</p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><code class="hljs c++"><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;iostream&gt;</span></span><br><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;list&gt;</span></span><br><span class="hljs-keyword">using</span> <span class="hljs-keyword">namespace</span> std;<br><br><span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">print</span><span class="hljs-params">(<span class="hljs-type">const</span> list&lt;<span class="hljs-type">int</span>&gt;l)</span></span>&#123;<br>    <span class="hljs-keyword">for</span>(list&lt;<span class="hljs-type">int</span>&gt;::const_iterator it=l.<span class="hljs-built_in">begin</span>();it!=l.<span class="hljs-built_in">end</span>();it++)&#123;<br>        cout&lt;&lt;*it&lt;&lt;<span class="hljs-string">&quot; &quot;</span>;<br>    &#125;<br>    cout&lt;&lt;endl;<br>&#125;<br><br><span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">test01</span><span class="hljs-params">()</span></span>&#123;<br>    list&lt;<span class="hljs-type">int</span>&gt;l;<br>    l.<span class="hljs-built_in">push_back</span>(<span class="hljs-number">10</span>);<br>    l.<span class="hljs-built_in">push_back</span>(<span class="hljs-number">20</span>);<br>    l.<span class="hljs-built_in">push_back</span>(<span class="hljs-number">30</span>);<br>    l.<span class="hljs-built_in">push_back</span>(<span class="hljs-number">40</span>);<br>    <br>    <span class="hljs-comment">//l[0]  不可以用[]访问list容器中数据</span><br>    <span class="hljs-comment">//list本质是个链表，每个数据不是用连续的线性空间存储数据，迭代器也是不支持随机访问</span><br>    cout&lt;&lt;<span class="hljs-string">&quot;第一个元素为：&quot;</span>&lt;&lt;l.<span class="hljs-built_in">front</span>()&lt;&lt;endl;<br>    cout&lt;&lt;<span class="hljs-string">&quot;最后一个元素为：&quot;</span>&lt;&lt;l.<span class="hljs-built_in">back</span>()&lt;&lt;endl;<br>    <br>    <span class="hljs-comment">//验证迭代器是不支持随机访问的</span><br>    list&lt;<span class="hljs-type">int</span>&gt;::iterator it=l.<span class="hljs-built_in">begin</span>();<br>    <span class="hljs-comment">//it=it+2;//不允许跳跃式访问(随机访问)</span><br>    it++;<br>    it--; <span class="hljs-comment">//支持双向</span><br>&#125;<br></code></pre></td></tr></table></figure>

<blockquote>
<p><strong>总结</strong>：list容器中不可以通过[]或者at方式访问数据</p>
</blockquote>
<h4 id="list反转和排序"><a href="#list反转和排序" class="headerlink" title="list反转和排序"></a>list反转和排序</h4><p><strong>功能描述</strong>：</p>
<ul>
<li>将容器中的元素反转，以及将容器中的数据进行排序</li>
</ul>
<p><strong>函数原型</strong>：</p>
<ul>
<li><code>reverse();</code>         &#x2F;&#x2F;反转链表</li>
<li><code>sort();</code>       &#x2F;&#x2F;链表排序</li>
</ul>
<p>示例：</p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br></pre></td><td class="code"><pre><code class="hljs c++"><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;iostream&gt;</span></span><br><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;list&gt;</span></span><br><span class="hljs-keyword">using</span> <span class="hljs-keyword">namespace</span> std;<br><br><span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">print</span><span class="hljs-params">(<span class="hljs-type">const</span> list&lt;<span class="hljs-type">int</span>&gt;l)</span></span>&#123;<br>    <span class="hljs-keyword">for</span>(list&lt;<span class="hljs-type">int</span>&gt;::const_iterator it=l.<span class="hljs-built_in">begin</span>();it!=l.<span class="hljs-built_in">end</span>();it++)&#123;<br>        cout&lt;&lt;*it&lt;&lt;<span class="hljs-string">&quot; &quot;</span>;<br>    &#125;<br>    cout&lt;&lt;endl;<br>&#125;<br><br><br><span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">test01</span><span class="hljs-params">()</span></span>&#123;<br>    <span class="hljs-comment">//反转</span><br>    list&lt;<span class="hljs-type">int</span>&gt;l;<br>    l.<span class="hljs-built_in">push_back</span>(<span class="hljs-number">10</span>);<br>    l.<span class="hljs-built_in">push_back</span>(<span class="hljs-number">20</span>);<br>    l.<span class="hljs-built_in">push_back</span>(<span class="hljs-number">30</span>);<br>    l.<span class="hljs-built_in">push_back</span>(<span class="hljs-number">40</span>);<br>    l.<span class="hljs-built_in">push_back</span>(<span class="hljs-number">50</span>);<br>    <span class="hljs-built_in">print</span>(l);<br>    cout&lt;&lt;<span class="hljs-string">&quot;反转后：&quot;</span>&lt;&lt;endl;<br>    l.<span class="hljs-built_in">reverse</span>();<br>    <span class="hljs-built_in">print</span>(l);<br>&#125;<br><br><span class="hljs-function"><span class="hljs-type">bool</span> <span class="hljs-title">mycompare</span><span class="hljs-params">(<span class="hljs-type">int</span> v1,<span class="hljs-type">int</span> v2)</span></span>&#123;<br>    <span class="hljs-comment">//降序，就让第一个数大于第二个数</span><br>    <span class="hljs-keyword">return</span> v1&gt;v2;<br>&#125;<br><br><span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">test02</span><span class="hljs-params">()</span></span>&#123;<br>    list&lt;<span class="hljs-type">int</span>&gt;l;<br>    l.<span class="hljs-built_in">push_back</span>(<span class="hljs-number">60</span>);<br>    l.<span class="hljs-built_in">push_back</span>(<span class="hljs-number">10</span>);<br>    l.<span class="hljs-built_in">push_back</span>(<span class="hljs-number">5</span>);<br>    l.<span class="hljs-built_in">push_back</span>(<span class="hljs-number">40</span>);<br>    l.<span class="hljs-built_in">push_back</span>(<span class="hljs-number">50</span>);<br>    cout&lt;&lt;<span class="hljs-string">&quot;排序前：&quot;</span>&lt;&lt;endl;<br>    <span class="hljs-built_in">print</span>(l);<br>    cout&lt;&lt;<span class="hljs-string">&quot;排序后：&quot;</span>&lt;&lt;endl;<br>    <span class="hljs-comment">//所有不支持随机访问迭代器的容器，不可以用标准算法</span><br>    <span class="hljs-comment">//不支持随机访问迭代器的容器,内部会提供对应一些算法</span><br>    l.<span class="hljs-built_in">sort</span>();<span class="hljs-comment">//默认为升序</span><br>    <span class="hljs-built_in">print</span>(l);<br>    <span class="hljs-comment">//降序</span><br>    l.<span class="hljs-built_in">sort</span>(mycompare);<br>    <span class="hljs-built_in">print</span>(l);<br>&#125;<br></code></pre></td></tr></table></figure>



















<h3 id="set-multiset-集合-容器"><a href="#set-multiset-集合-容器" class="headerlink" title="set&#x2F;multiset(集合)容器"></a>set&#x2F;multiset(集合)容器</h3><h4 id="基本概念-2"><a href="#基本概念-2" class="headerlink" title="基本概念"></a>基本概念</h4><p><strong>简介</strong>：</p>
<ul>
<li>所有元素都会插入时自动被排序</li>
</ul>
<p><strong>本质</strong>：</p>
<ul>
<li>set&#x2F;multiset属于<strong>关联式容器</strong>，底层结构是用<strong>二叉树</strong>实现</li>
</ul>
<p><strong>set和multiset区别</strong>：</p>
<ul>
<li>set不允许容器中有重复的元素</li>
<li>multiset允许容器中有重复的元素</li>
</ul>
<h4 id="set构造和赋值"><a href="#set构造和赋值" class="headerlink" title="set构造和赋值"></a>set构造和赋值</h4><p><strong>功能描述</strong>：</p>
<ul>
<li>创建set容器以及赋值</li>
</ul>
<p><strong>构造</strong>：</p>
<ul>
<li><code>set&lt;T&gt;st;</code>    &#x2F;&#x2F;默认构造函数</li>
<li><code>set(const set &amp;st);</code>    &#x2F;&#x2F;拷贝构造函数</li>
</ul>
<p><strong>赋值</strong>：</p>
<ul>
<li><code>set&amp; operator=(const set &amp;st);</code>    &#x2F;&#x2F;重载等号操作符</li>
</ul>
<p>示例：</p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><code class="hljs c++"><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;iostream&gt;</span></span><br><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;set&gt;</span></span><br><span class="hljs-keyword">using</span> <span class="hljs-keyword">namespace</span> std;<br><br><span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">print</span><span class="hljs-params">(<span class="hljs-type">const</span> set&lt;<span class="hljs-type">int</span>&gt;s)</span></span>&#123;<br>    <span class="hljs-keyword">for</span>(set&lt;<span class="hljs-type">int</span>&gt;::const_iterator it=s.<span class="hljs-built_in">begin</span>();it!=s.<span class="hljs-built_in">end</span>();it++)&#123;<br>        cout&lt;&lt;*it&lt;&lt;<span class="hljs-string">&quot; &quot;</span>;<br>    &#125;<br>    cout&lt;&lt;endl;<br>&#125; <br><br><span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">test01</span><span class="hljs-params">()</span></span>&#123;<br>    set&lt;<span class="hljs-type">int</span>&gt;s1;<br>    <span class="hljs-comment">//插入数据只有insert方式</span><br>    s1.<span class="hljs-built_in">insert</span>(<span class="hljs-number">10</span>);<br>    s1.<span class="hljs-built_in">insert</span>(<span class="hljs-number">30</span>);<br>    s1.<span class="hljs-built_in">insert</span>(<span class="hljs-number">40</span>);<br>    s1.<span class="hljs-built_in">insert</span>(<span class="hljs-number">20</span>);<br>    s1.<span class="hljs-built_in">insert</span>(<span class="hljs-number">30</span>);<br>    <span class="hljs-comment">//set容器特点：所有元素插入时候自动排序</span><br>    <span class="hljs-comment">//set容器不允许插入重复值</span><br>    <span class="hljs-built_in">print</span>(s1);<br>    <span class="hljs-comment">//拷贝构造</span><br>    set&lt;<span class="hljs-type">int</span>&gt;<span class="hljs-built_in">s2</span>(s1);<br>    <span class="hljs-built_in">print</span>(s2);<br>    <span class="hljs-comment">//赋值</span><br>    set&lt;<span class="hljs-type">int</span>&gt;s3;<br>    s3=s2;<br>    <span class="hljs-built_in">print</span>(s3);<br>&#125;<br></code></pre></td></tr></table></figure>













<h4 id="set大小和交换"><a href="#set大小和交换" class="headerlink" title="set大小和交换"></a>set大小和交换</h4><p><strong>功能描述</strong>：</p>
<ul>
<li>统计set容器大小以及交换set容器</li>
</ul>
<p><strong>函数原型</strong>：</p>
<ul>
<li><code>size();</code>    &#x2F;&#x2F;返回容器中元素的数目</li>
<li><code>empty();</code>    &#x2F;&#x2F;判断容器是否为空</li>
<li><code>swap(st);</code>    &#x2F;&#x2F;交换两个集合容器</li>
</ul>
<p>示例：</p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br></pre></td><td class="code"><pre><code class="hljs c++"><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;iostream&gt;</span></span><br><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;set&gt;</span></span><br><span class="hljs-keyword">using</span> <span class="hljs-keyword">namespace</span> std;<br><br><span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">print</span><span class="hljs-params">(<span class="hljs-type">const</span> set&lt;<span class="hljs-type">int</span>&gt;s)</span></span>&#123;<br>    <span class="hljs-keyword">for</span>(set&lt;<span class="hljs-type">int</span>&gt;::const_iterator it=s.<span class="hljs-built_in">begin</span>();it!=s.<span class="hljs-built_in">end</span>();it++)&#123;<br>        cout&lt;&lt;*it&lt;&lt;<span class="hljs-string">&quot; &quot;</span>;<br>    &#125;<br>    cout&lt;&lt;endl;<br>&#125;<br><br><span class="hljs-comment">//大小</span><br><span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">test01</span><span class="hljs-params">()</span></span>&#123;<br>	set&lt;<span class="hljs-type">int</span>&gt;s1;<br>    s1.<span class="hljs-built_in">insert</span>(<span class="hljs-number">10</span>);<br>    s1.<span class="hljs-built_in">insert</span>(<span class="hljs-number">20</span>);<br>    s1.<span class="hljs-built_in">insert</span>(<span class="hljs-number">30</span>);<br>    s1.<span class="hljs-built_in">insert</span>(<span class="hljs-number">40</span>);<br>    <span class="hljs-built_in">print</span>(s1);<br>    <br>    <span class="hljs-keyword">if</span>(s1.<span class="hljs-built_in">empty</span>())&#123;<br>        cout&lt;&lt;<span class="hljs-string">&quot;s1为空&quot;</span>&lt;&lt;endl;<br>    &#125;<span class="hljs-keyword">else</span>&#123;<br>        cout&lt;&lt;<span class="hljs-string">&quot;s1不为空&quot;</span>&lt;&lt;endl;<br>        cout&lt;&lt;<span class="hljs-string">&quot;s1的大小为：&quot;</span>&lt;&lt;s1.<span class="hljs-built_in">size</span>()&lt;&lt;endl;<br>    &#125;<br>&#125;<br><br><span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">test02</span><span class="hljs-params">()</span></span>&#123;<br>    set&lt;<span class="hljs-type">int</span>&gt;s1;<br>    s1.<span class="hljs-built_in">insert</span>(<span class="hljs-number">10</span>);<br>    s1.<span class="hljs-built_in">insert</span>(<span class="hljs-number">20</span>);<br>    s1.<span class="hljs-built_in">insert</span>(<span class="hljs-number">30</span>);<br>    s1.<span class="hljs-built_in">insert</span>(<span class="hljs-number">40</span>);<br>    set&lt;<span class="hljs-type">int</span>&gt;s2;<br>    s2.<span class="hljs-built_in">insert</span>(<span class="hljs-number">100</span>);<br>    s2.<span class="hljs-built_in">insert</span>(<span class="hljs-number">200</span>);<br>    s2.<span class="hljs-built_in">insert</span>(<span class="hljs-number">300</span>);<br>    s2.<span class="hljs-built_in">insert</span>(<span class="hljs-number">400</span>);<br>    cout&lt;&lt;<span class="hljs-string">&quot;交换前：&quot;</span>&lt;&lt;endl;<br>    <span class="hljs-built_in">print</span>(s1);<br>    <span class="hljs-built_in">print</span>(s2);<br>    cout&lt;&lt;<span class="hljs-string">&quot;交换后：&quot;</span>&lt;&lt;endl;<br>    s1.<span class="hljs-built_in">swap</span>(s2);<br>    <span class="hljs-built_in">print</span>(s1);<br>    <span class="hljs-built_in">print</span>(s2);<br>&#125;<br></code></pre></td></tr></table></figure>













<h4 id="set插入和删除"><a href="#set插入和删除" class="headerlink" title="set插入和删除"></a>set插入和删除</h4><p><strong>功能描述</strong>：</p>
<ul>
<li>set容器进行插入数据和删除数据</li>
</ul>
<p><strong>函数原型</strong>：</p>
<ul>
<li><code>insert(elem);</code>    &#x2F;&#x2F;在容器中插入元素</li>
<li><code>clear();</code>    &#x2F;&#x2F;清除所有元素</li>
<li><code>erase(pos);</code>    &#x2F;&#x2F;删除pos迭代器所指的元素，返回下一个元素的迭代器</li>
<li><code>erase(beg,end);</code>    &#x2F;&#x2F;删除区间[beg,end)的所有元素，返回下一个元素的迭代器</li>
<li><code>erase(elem);</code>    &#x2F;&#x2F;删除容器中值为elem的元素</li>
</ul>
<p>示例：</p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><code class="hljs c++"><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;iostream&gt;</span></span><br><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;set&gt;</span></span><br><span class="hljs-keyword">using</span> <span class="hljs-keyword">namespace</span> std;<br><br><span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">print</span><span class="hljs-params">(<span class="hljs-type">const</span> set&lt;<span class="hljs-type">int</span>&gt;s)</span></span>&#123;<br>    <span class="hljs-keyword">for</span>(set&lt;<span class="hljs-type">int</span>&gt;::const_iterator it=s.<span class="hljs-built_in">begin</span>();it!=s.<span class="hljs-built_in">end</span>();it++)&#123;<br>        cout&lt;&lt;*it&lt;&lt;<span class="hljs-string">&quot; &quot;</span>;<br>    &#125;<br>    cout&lt;&lt;endl;<br>&#125;<br><br><span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">test01</span><span class="hljs-params">()</span></span>&#123;<br>    set&lt;<span class="hljs-type">int</span>&gt;s1;<br>    s1.<span class="hljs-built_in">insert</span>(<span class="hljs-number">10</span>);<br>    s1.<span class="hljs-built_in">insert</span>(<span class="hljs-number">30</span>);<br>    s1.<span class="hljs-built_in">insert</span>(<span class="hljs-number">20</span>);<br>    s1.<span class="hljs-built_in">insert</span>(<span class="hljs-number">40</span>);<br>    <span class="hljs-built_in">print</span>(s1);<br>    <br>    <span class="hljs-comment">//删除</span><br>    s1.<span class="hljs-built_in">erase</span>(s1.<span class="hljs-built_in">begin</span>());<br>    <span class="hljs-built_in">print</span>(s1);<br>    <span class="hljs-comment">//删除重载版本</span><br>    s1.<span class="hljs-built_in">erase</span>(<span class="hljs-number">30</span>);<br>    <span class="hljs-built_in">print</span>(s1);<br>    <br>    <span class="hljs-comment">//清空</span><br>    <span class="hljs-comment">//s1.erase(s1.begin(),s1.end());</span><br>    s1.<span class="hljs-built_in">clear</span>();<br>    <span class="hljs-built_in">print</span>(s1);<br>&#125;<br></code></pre></td></tr></table></figure>













<h4 id="set查找和统计"><a href="#set查找和统计" class="headerlink" title="set查找和统计"></a>set查找和统计</h4><p><strong>功能描述</strong>：</p>
<ul>
<li>对set容器进行查找数据以及统计数据</li>
</ul>
<p><strong>函数原型</strong>：</p>
<ul>
<li><code>find(key);</code>    &#x2F;&#x2F;查找key是否存在，若存在，返回该键的元素的迭代器；若不存在，返回set.end();</li>
<li><code>count(key);</code>    &#x2F;&#x2F;统计key的元素个数</li>
</ul>
<p>示例：</p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><code class="hljs c++"><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;iostream&gt;</span></span><br><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;set&gt;</span></span><br><span class="hljs-keyword">using</span> <span class="hljs-keyword">namespace</span> std;<br><br><span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">test01</span><span class="hljs-params">()</span></span>&#123;<br>    set&lt;<span class="hljs-type">int</span>&gt;s1;<br>    s1.<span class="hljs-built_in">insert</span>(<span class="hljs-number">10</span>);<br>    s1.<span class="hljs-built_in">insert</span>(<span class="hljs-number">20</span>);<br>    s1.<span class="hljs-built_in">insert</span>(<span class="hljs-number">30</span>);<br>    s1.<span class="hljs-built_in">insert</span>(<span class="hljs-number">40</span>);<br>    <span class="hljs-comment">//查找</span><br>    set&lt;<span class="hljs-type">int</span>&gt;::iterator pos=s1.<span class="hljs-built_in">find</span>(<span class="hljs-number">30</span>);<br>    <span class="hljs-keyword">if</span>(pos!=s1.<span class="hljs-built_in">end</span>())&#123;<br>        cout&lt;&lt;<span class="hljs-string">&quot;找到元素：&quot;</span>&lt;&lt;*pos&lt;&lt;endl;<br>    &#125;<span class="hljs-keyword">else</span>&#123;<br>        cout&lt;&lt;<span class="hljs-string">&quot;未找到元素&quot;</span>&lt;&lt;endl;<br>    &#125;<br>&#125;<br><br><span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">test02</span><span class="hljs-params">()</span></span>&#123;<br>	set&lt;<span class="hljs-type">int</span>&gt;s1;<br>    s1.<span class="hljs-built_in">insert</span>(<span class="hljs-number">10</span>);<br>    s1.<span class="hljs-built_in">insert</span>(<span class="hljs-number">20</span>);<br>    s1.<span class="hljs-built_in">insert</span>(<span class="hljs-number">30</span>);<br>    s1.<span class="hljs-built_in">insert</span>(<span class="hljs-number">40</span>);<br>    s1.<span class="hljs-built_in">insert</span>(<span class="hljs-number">30</span>);<br>    s1.<span class="hljs-built_in">insert</span>(<span class="hljs-number">30</span>);<br>    <span class="hljs-comment">//统计,对于set而言，统计结果要么是0，要么是1</span><br>    <span class="hljs-type">int</span> num=s1.<span class="hljs-built_in">count</span>(<span class="hljs-number">30</span>);<br>    cout&lt;&lt;<span class="hljs-string">&quot;num= &quot;</span>&lt;&lt;num&lt;&lt;endl;<br>&#125;<br></code></pre></td></tr></table></figure>















<h4 id="set和multiset区别"><a href="#set和multiset区别" class="headerlink" title="set和multiset区别"></a>set和multiset区别</h4><p><strong>区别</strong>：</p>
<ul>
<li>set不可以插入重复数据，而multiset可以</li>
<li>set插入数据的同时会返回插入结果，表示插入是否成功</li>
<li>multiset不会检测数据，因此可以插入重复数据</li>
</ul>
<p>示例：</p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><code class="hljs c++"><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;iostream&gt;</span></span><br><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;set&gt;</span></span><br><span class="hljs-keyword">using</span> <span class="hljs-keyword">namespace</span> std;<br><br><br><span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">test01</span><span class="hljs-params">()</span></span>&#123;<br>    set&lt;<span class="hljs-type">int</span>&gt;s;<br>    pair&lt;set&lt;<span class="hljs-type">int</span>&gt;::iterator,<span class="hljs-type">bool</span>&gt; ret=s.<span class="hljs-built_in">insert</span>(<span class="hljs-number">10</span>);<br>    <span class="hljs-keyword">if</span>(ret.second)&#123;<br>        cout&lt;&lt;<span class="hljs-string">&quot;第一次插入成功&quot;</span>&lt;&lt;endl;<br>    &#125;<span class="hljs-keyword">else</span>&#123;<br>        cout&lt;&lt;<span class="hljs-string">&quot;第一次插入失败&quot;</span>&lt;&lt;endl;<br>    &#125;<br>    ret=s.<span class="hljs-built_in">insert</span>(<span class="hljs-number">10</span>);<br>    <span class="hljs-keyword">if</span>(ret.second)&#123;<br>        cout&lt;&lt;<span class="hljs-string">&quot;第二次插入成功&quot;</span>&lt;&lt;endl;<br>    &#125;<span class="hljs-keyword">else</span>&#123;<br>        cout&lt;&lt;<span class="hljs-string">&quot;第二次插入失败&quot;</span>&lt;&lt;endl;<br>    &#125;<br>    <br>    multiset&lt;<span class="hljs-type">int</span>&gt;m;<br>    <span class="hljs-comment">//允许插入重复的值</span><br>    m.<span class="hljs-built_in">insert</span>(<span class="hljs-number">10</span>);<br>    m.<span class="hljs-built_in">insert</span>(<span class="hljs-number">10</span>);<br>    <span class="hljs-keyword">for</span>(multiset&lt;<span class="hljs-type">int</span>&gt;::iterator it=m.<span class="hljs-built_in">begin</span>();it!=m.<span class="hljs-built_in">end</span>();it++)&#123;<br>        cout&lt;&lt;*it&lt;&lt;<span class="hljs-string">&quot; &quot;</span>;<br>    &#125;<br>    cout&lt;&lt;endl;<br>&#125;<br></code></pre></td></tr></table></figure>

<blockquote>
<p><strong>总结</strong>：</p>
<ul>
<li>如果不允许插入重复数据可以利用set</li>
<li>如果需要插入重复数据利用multiset</li>
</ul>
</blockquote>
<h4 id="pair队组创建"><a href="#pair队组创建" class="headerlink" title="pair队组创建"></a>pair队组创建</h4><p><strong>功能描述</strong>：</p>
<ul>
<li>成对出现的数据，利用队组可以返回两个数据</li>
</ul>
<p><strong>两种创建方式</strong>：</p>
<ul>
<li><code>pair&lt;type,type&gt; p(value1,value2);</code></li>
<li><code>pair&lt;type,type&gt; p=make_pair(value1,value2);</code></li>
</ul>
<p><strong>注意事项</strong>：</p>
<ul>
<li>使用时不需要包含头文件</li>
</ul>
<p>示例：</p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><code class="hljs c++"><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;iostream&gt;</span></span><br><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;string&gt;</span></span><br><span class="hljs-keyword">using</span> <span class="hljs-keyword">namespace</span> std;<br><br><br><span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">test01</span><span class="hljs-params">()</span></span>&#123;<br>    <span class="hljs-comment">//第一种方式</span><br>    pair&lt;string,<span class="hljs-type">int</span>&gt;<span class="hljs-built_in">p</span>(<span class="hljs-string">&quot;Tom&quot;</span>,<span class="hljs-number">20</span>);<br>    cout&lt;&lt;<span class="hljs-string">&quot;姓名：&quot;</span>&lt;&lt;p.first&lt;&lt;<span class="hljs-string">&quot;年龄：&quot;</span>&lt;&lt;p.second&lt;&lt;endl;<br>    <br>    <span class="hljs-comment">//第二种方式</span><br>    pair&lt;string,<span class="hljs-type">int</span>&gt;p2=<span class="hljs-built_in">make_pair</span>(<span class="hljs-string">&quot;jerry&quot;</span>,<span class="hljs-number">30</span>);<br>    cout&lt;&lt;<span class="hljs-string">&quot;姓名：&quot;</span>&lt;&lt;p2.first&lt;&lt;<span class="hljs-string">&quot;年龄：&quot;</span>&lt;&lt;p2.second&lt;&lt;endl;<br>&#125;<br></code></pre></td></tr></table></figure>









<h4 id="set容器排序"><a href="#set容器排序" class="headerlink" title="set容器排序"></a>set容器排序</h4><p>学习目标：</p>
<ul>
<li>set容器默认排序规则是从小到大，掌握如何改变排序规则</li>
</ul>
<p>主要技术点：</p>
<ul>
<li>利用仿函数，可以改变排序规则</li>
</ul>
<p><strong>示例一</strong>  set存放内置数据类型</p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br></pre></td><td class="code"><pre><code class="hljs c++"><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;iostream&gt;</span></span><br><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;set&gt;</span></span><br><span class="hljs-keyword">using</span> <span class="hljs-keyword">namespace</span> std;<br><br><span class="hljs-keyword">class</span> <span class="hljs-title class_">mycompare</span>&#123;<br><span class="hljs-keyword">public</span>:<br>    <span class="hljs-function"><span class="hljs-type">bool</span> <span class="hljs-title">operator</span><span class="hljs-params">()</span><span class="hljs-params">(<span class="hljs-type">int</span> v1,<span class="hljs-type">int</span> v2)</span></span>&#123;<br>        <span class="hljs-keyword">return</span> v1&gt;v2;<br>    &#125;<br>&#125;;<br><br><br><span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">test01</span><span class="hljs-params">()</span></span>&#123;<br>    set&lt;<span class="hljs-type">int</span>&gt;s1;<br>    s1.<span class="hljs-built_in">insert</span>(<span class="hljs-number">10</span>);<br>    s1.<span class="hljs-built_in">insert</span>(<span class="hljs-number">20</span>);<br>    s1.<span class="hljs-built_in">insert</span>(<span class="hljs-number">30</span>);<br>    s1.<span class="hljs-built_in">insert</span>(<span class="hljs-number">40</span>);<br>    s1.<span class="hljs-built_in">insert</span>(<span class="hljs-number">50</span>);<br>    <span class="hljs-keyword">for</span>(set&lt;<span class="hljs-type">int</span>&gt;::iterator it=s1.<span class="hljs-built_in">begin</span>();it!=s1.<span class="hljs-built_in">end</span>();it++)&#123;<br>        cout&lt;&lt;*it&lt;&lt;<span class="hljs-string">&quot; &quot;</span>;<br>    &#125;<br>    cout&lt;&lt;endl;<br>    <span class="hljs-comment">//指定排序规则为从小到大</span><br>    set&lt;<span class="hljs-type">int</span>,mycompare&gt;s2;<br>    <br>    s2.<span class="hljs-built_in">insert</span>(<span class="hljs-number">10</span>);<br>    s2.<span class="hljs-built_in">insert</span>(<span class="hljs-number">20</span>);<br>    s2.<span class="hljs-built_in">insert</span>(<span class="hljs-number">30</span>);<br>    s2.<span class="hljs-built_in">insert</span>(<span class="hljs-number">40</span>);<br>    s2.<span class="hljs-built_in">insert</span>(<span class="hljs-number">50</span>);<br>    <span class="hljs-keyword">for</span>(set&lt;<span class="hljs-type">int</span>,mycompare&gt;::iterator it=s2.<span class="hljs-built_in">begin</span>();it!=s2.<span class="hljs-built_in">end</span>();it++)&#123;<br>        cout&lt;&lt;*it&lt;&lt;<span class="hljs-string">&quot; &quot;</span>;<br>    &#125;<br>    cout&lt;&lt;endl;<br>&#125;<br></code></pre></td></tr></table></figure>







<p><strong>示例2</strong> set存放自定义数据类型</p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br></pre></td><td class="code"><pre><code class="hljs c++"><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;iostream&gt;</span></span><br><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;set&gt;</span></span><br><span class="hljs-keyword">using</span> <span class="hljs-keyword">namespace</span> std;<br><br><span class="hljs-keyword">class</span> <span class="hljs-title class_">Person</span>&#123;<br><span class="hljs-keyword">public</span>:<br>    <span class="hljs-built_in">Person</span>(string name,<span class="hljs-type">int</span> age)&#123;<br>        <span class="hljs-keyword">this</span>-&gt;m_name=name;<br>        <span class="hljs-keyword">this</span>-&gt;m_age=age;<br>    &#125;<br>    string m_name;<br>    <span class="hljs-type">int</span> m_age;<br>&#125;;<br><br><span class="hljs-keyword">class</span> <span class="hljs-title class_">mycompare</span>&#123;<br><span class="hljs-keyword">public</span>:<br>    <span class="hljs-function"><span class="hljs-type">bool</span> <span class="hljs-title">operator</span><span class="hljs-params">()</span><span class="hljs-params">(<span class="hljs-type">const</span> Person&amp;p1,<span class="hljs-type">const</span> Person&amp;p2)</span></span>&#123;<br>        <span class="hljs-keyword">return</span> p1.m_age&gt;p2.m_age;<br>    &#125;<br>&#125;;<br><br><span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">test01</span><span class="hljs-params">()</span></span>&#123;<br>    <span class="hljs-comment">//自定义数据类型都会指定排序规则</span><br>    set&lt;Person,mycompare&gt;s;<br>    <span class="hljs-function">Person <span class="hljs-title">p1</span><span class="hljs-params">(<span class="hljs-string">&quot;张1&quot;</span>,<span class="hljs-number">24</span>)</span></span>;<br>    <span class="hljs-function">Person <span class="hljs-title">p1</span><span class="hljs-params">(<span class="hljs-string">&quot;张2&quot;</span>,<span class="hljs-number">28</span>)</span></span>;<br>    <span class="hljs-function">Person <span class="hljs-title">p1</span><span class="hljs-params">(<span class="hljs-string">&quot;张3&quot;</span>,<span class="hljs-number">25</span>)</span></span>;<br>    <span class="hljs-function">Person <span class="hljs-title">p1</span><span class="hljs-params">(<span class="hljs-string">&quot;张4&quot;</span>,<span class="hljs-number">21</span>)</span></span>;<br>    s.<span class="hljs-built_in">insert</span>(p1);<br>    s.<span class="hljs-built_in">insert</span>(p2);<br>    s.<span class="hljs-built_in">insert</span>(p3);<br>    s.<span class="hljs-built_in">insert</span>(p4);<br>    <span class="hljs-keyword">for</span>(set&lt;Person&gt;::iterator it=s.<span class="hljs-built_in">begin</span>();it!=s.<span class="hljs-built_in">end</span>();it++)&#123;<br>        cout&lt;&lt;<span class="hljs-string">&quot;姓名：&quot;</span>&lt;&lt;it-&gt;m_name&lt;&lt;<span class="hljs-string">&quot;年龄：&quot;</span>&lt;&lt;it-&gt;m_age&lt;&lt;endl;<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure>













<h3 id="map-multimap容器"><a href="#map-multimap容器" class="headerlink" title="map&#x2F;multimap容器"></a>map&#x2F;multimap容器</h3><h4 id="map基本概念"><a href="#map基本概念" class="headerlink" title="map基本概念"></a>map基本概念</h4><p><strong>简介</strong>：</p>
<ul>
<li>map中所有元素都是pair(队组)</li>
<li>pair中第一个元素为key(键值)，起到索引作用，第二个元素为value(实值)</li>
<li>所有元素都会根据元素的键值自动排序</li>
</ul>
<p><strong>本质</strong>：</p>
<ul>
<li>map&#x2F;multimap属于<strong>关联式容器</strong>，底层使用二叉树实现</li>
</ul>
<p><strong>优点</strong>：</p>
<ul>
<li>可以根据key值快速找到value值</li>
</ul>
<p><strong>map和multimap区别</strong>：</p>
<ul>
<li>map不允许容器中有重复key值元素</li>
<li>multimap允许容器中有重复key值元素</li>
</ul>
<h4 id="map构造和赋值"><a href="#map构造和赋值" class="headerlink" title="map构造和赋值"></a>map构造和赋值</h4><p><strong>功能描述</strong>：</p>
<ul>
<li>对map容器进行构造和赋值操作</li>
</ul>
<p><strong>函数原型</strong>：</p>
<p><strong>构造</strong>：</p>
<ul>
<li><code>map&lt;T1,T2&gt;mp;</code>     &#x2F;&#x2F;map默认构造函数</li>
<li><code>map(const map &amp;mp);</code>   &#x2F;&#x2F;拷贝构造函数</li>
</ul>
<p><strong>赋值</strong>：</p>
<ul>
<li><code>map&amp; operator=(const map &amp;mp);</code>    &#x2F;&#x2F;重载等号操作符</li>
</ul>
<p>示例：</p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><code class="hljs c++"><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;iostream&gt;</span></span><br><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;map&gt;</span></span><br><span class="hljs-keyword">using</span> <span class="hljs-keyword">namespace</span> std;<br><br><span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">print</span><span class="hljs-params">(<span class="hljs-type">const</span> map&lt;<span class="hljs-type">int</span>,<span class="hljs-type">int</span>&gt;&amp;m)</span></span>&#123;<br>    <span class="hljs-keyword">for</span>(map&lt;<span class="hljs-type">int</span>,<span class="hljs-type">int</span>&gt;::const_iterator it=m.<span class="hljs-built_in">begin</span>();it!=m.<span class="hljs-built_in">end</span>();it++)&#123;<br>        cout&lt;&lt;<span class="hljs-string">&quot;key= &quot;</span>&lt;&lt;(*it).first&lt;&lt;<span class="hljs-string">&quot;value= &quot;</span>&lt;&lt;(*it).second&lt;&lt;endl;<br>    &#125;<br>    cout&lt;&lt;endl;<br>&#125;<br><br><br><span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">test01</span><span class="hljs-params">()</span></span>&#123;<br>    map&lt;<span class="hljs-type">int</span>,<span class="hljs-type">int</span>&gt;m;<br>    m.<span class="hljs-built_in">insert</span>(<span class="hljs-built_in">pair</span>&lt;<span class="hljs-type">int</span>,<span class="hljs-type">int</span>&gt;(<span class="hljs-number">1</span>,<span class="hljs-number">10</span>));<br>    m.<span class="hljs-built_in">insert</span>(<span class="hljs-built_in">pair</span>&lt;<span class="hljs-type">int</span>,<span class="hljs-type">int</span>&gt;(<span class="hljs-number">3</span>,<span class="hljs-number">30</span>));<br>    m.<span class="hljs-built_in">insert</span>(<span class="hljs-built_in">pair</span>&lt;<span class="hljs-type">int</span>,<span class="hljs-type">int</span>&gt;(<span class="hljs-number">2</span>,<span class="hljs-number">20</span>));<br>    m.<span class="hljs-built_in">insert</span>(<span class="hljs-built_in">pair</span>&lt;<span class="hljs-type">int</span>,<span class="hljs-type">int</span>&gt;(<span class="hljs-number">4</span>,<span class="hljs-number">40</span>));<br>    <br>    <span class="hljs-built_in">print</span>(m);<br>    <br>    <span class="hljs-comment">//拷贝构造</span><br>    map&lt;<span class="hljs-type">int</span>,<span class="hljs-type">int</span>&gt;<span class="hljs-built_in">m2</span>(m);<br>    <span class="hljs-built_in">print</span>(m2);<br>    <br>    <span class="hljs-comment">//赋值</span><br>    map&lt;<span class="hljs-type">int</span>,<span class="hljs-type">int</span>&gt;m3;<br>    m3=m2;<br>    <span class="hljs-built_in">print</span>(m3);<br>&#125;<br></code></pre></td></tr></table></figure>













<h4 id="map大小和交换"><a href="#map大小和交换" class="headerlink" title="map大小和交换"></a>map大小和交换</h4><p><strong>功能描述</strong>：</p>
<ul>
<li>统计map容器大小以及交换map容器</li>
</ul>
<p><strong>函数原型</strong>：</p>
<ul>
<li><code>size();</code>    &#x2F;&#x2F;返回容器中元素的数目</li>
<li><code>empty();</code>    &#x2F;&#x2F;判断容器是否为空</li>
<li><code>swap(st);</code>    &#x2F;&#x2F;交换两个集合容器</li>
</ul>
<p>示例：</p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br></pre></td><td class="code"><pre><code class="hljs c++"><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;iostream&gt;</span></span><br><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;map&gt;</span></span><br><span class="hljs-keyword">using</span> <span class="hljs-keyword">namespace</span> std;<br><br><span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">print</span><span class="hljs-params">(<span class="hljs-type">const</span> map&lt;<span class="hljs-type">int</span>,<span class="hljs-type">int</span>&gt;&amp;m)</span></span>&#123;<br>    <span class="hljs-keyword">for</span>(map&lt;<span class="hljs-type">int</span>,<span class="hljs-type">int</span>&gt;::const_iterator it=m.<span class="hljs-built_in">begin</span>();it!=m.<span class="hljs-built_in">end</span>();it++)&#123;<br>        cout&lt;&lt;<span class="hljs-string">&quot;key= &quot;</span>&lt;&lt;(*it).first&lt;&lt;<span class="hljs-string">&quot;value= &quot;</span>&lt;&lt;(*it).second&lt;&lt;endl;<br>    &#125;<br>    cout&lt;&lt;endl;<br>&#125;<br><br><span class="hljs-comment">//大小</span><br><span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">test01</span><span class="hljs-params">()</span></span>&#123;<br>    map&lt;<span class="hljs-type">int</span>,<span class="hljs-type">int</span>&gt;m;<br>    m.<span class="hljs-built_in">insert</span>(<span class="hljs-built_in">pair</span>&lt;<span class="hljs-type">int</span>,<span class="hljs-type">int</span>&gt;(<span class="hljs-number">1</span>,<span class="hljs-number">10</span>));<br>    m.<span class="hljs-built_in">insert</span>(<span class="hljs-built_in">pair</span>&lt;<span class="hljs-type">int</span>,<span class="hljs-type">int</span>&gt;(<span class="hljs-number">2</span>,<span class="hljs-number">20</span>));<br>    m.<span class="hljs-built_in">insert</span>(<span class="hljs-built_in">pair</span>&lt;<span class="hljs-type">int</span>,<span class="hljs-type">int</span>&gt;(<span class="hljs-number">3</span>,<span class="hljs-number">30</span>));<br>    <span class="hljs-keyword">if</span>(m.<span class="hljs-built_in">empty</span>())&#123;<br>        cout&lt;&lt;<span class="hljs-string">&quot;m为空&quot;</span>&lt;&lt;endl;<br>    &#125;<span class="hljs-keyword">else</span>&#123;<br>        cout&lt;&lt;<span class="hljs-string">&quot;m不为空&quot;</span>&lt;&lt;endl;<br>        cout&lt;&lt;<span class="hljs-string">&quot;m的大小为：&quot;</span>&lt;&lt;m.<span class="hljs-built_in">size</span>()&lt;&lt;endl;<br>    &#125;<br>&#125;<br><span class="hljs-comment">//交换</span><br><span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">test02</span><span class="hljs-params">()</span></span>&#123;<br>    map&lt;<span class="hljs-type">int</span>,<span class="hljs-type">int</span>&gt;m;<br>    m.<span class="hljs-built_in">insert</span>(<span class="hljs-built_in">pair</span>&lt;<span class="hljs-type">int</span>,<span class="hljs-type">int</span>&gt;(<span class="hljs-number">1</span>,<span class="hljs-number">10</span>));<br>    m.<span class="hljs-built_in">insert</span>(<span class="hljs-built_in">pair</span>&lt;<span class="hljs-type">int</span>,<span class="hljs-type">int</span>&gt;(<span class="hljs-number">2</span>,<span class="hljs-number">20</span>));<br>    m.<span class="hljs-built_in">insert</span>(<span class="hljs-built_in">pair</span>&lt;<span class="hljs-type">int</span>,<span class="hljs-type">int</span>&gt;(<span class="hljs-number">3</span>,<span class="hljs-number">30</span>));<br>    map&lt;<span class="hljs-type">int</span>,<span class="hljs-type">int</span>&gt;m2;<br>    m2.<span class="hljs-built_in">insert</span>(<span class="hljs-built_in">pair</span>&lt;<span class="hljs-type">int</span>,<span class="hljs-type">int</span>&gt;(<span class="hljs-number">4</span>,<span class="hljs-number">100</span>));<br>    m2.<span class="hljs-built_in">insert</span>(<span class="hljs-built_in">pair</span>&lt;<span class="hljs-type">int</span>,<span class="hljs-type">int</span>&gt;(<span class="hljs-number">5</span>,<span class="hljs-number">200</span>));<br>    m2.<span class="hljs-built_in">insert</span>(<span class="hljs-built_in">pair</span>&lt;<span class="hljs-type">int</span>,<span class="hljs-type">int</span>&gt;(<span class="hljs-number">6</span>,<span class="hljs-number">300</span>));<br>    cout&lt;&lt;<span class="hljs-string">&quot;交换前：&quot;</span>&lt;&lt;endl;<br>    <span class="hljs-built_in">print</span>(m);<br>    <span class="hljs-built_in">print</span>(m2);<br>    cout&lt;&lt;<span class="hljs-string">&quot;交换后：&quot;</span>&lt;&lt;endl;<br>    m.<span class="hljs-built_in">swap</span>(m2);<br>    <span class="hljs-built_in">print</span>(m);<br>    <span class="hljs-built_in">print</span>(m2);<br>&#125;<br></code></pre></td></tr></table></figure>













<h4 id="map插入和删除"><a href="#map插入和删除" class="headerlink" title="map插入和删除"></a>map插入和删除</h4><p><strong>功能描述</strong>：</p>
<ul>
<li>map容器进行插入数据和删除数据</li>
</ul>
<p><strong>函数原型</strong>：</p>
<ul>
<li><code>insert(elem);</code>   &#x2F;&#x2F;在容器中插入元素</li>
<li><code>clear();</code>    &#x2F;&#x2F;清除所有元素</li>
<li><code>erase(pos);</code>    &#x2F;&#x2F;删除pos迭代器所指的元素，返回下一个元素的迭代器</li>
<li><code>erase(beg,end);</code>    &#x2F;&#x2F;删除区间[beg,end)的所有有元素，返回下一个元素的迭代器</li>
<li><code>erase(key);</code>      &#x2F;&#x2F;删除容器中值为key的元素</li>
</ul>
<p>示例：</p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br></pre></td><td class="code"><pre><code class="hljs c++"><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;iostream&gt;</span></span><br><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;map&gt;</span></span><br><span class="hljs-keyword">using</span> <span class="hljs-keyword">namespace</span> std;<br><br><span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">print</span><span class="hljs-params">(<span class="hljs-type">const</span> map&lt;<span class="hljs-type">int</span>,<span class="hljs-type">int</span>&gt;&amp;m)</span></span>&#123;<br>    <span class="hljs-keyword">for</span>(map&lt;<span class="hljs-type">int</span>,<span class="hljs-type">int</span>&gt;::const_iterator it=m.<span class="hljs-built_in">begin</span>();it!=m.<span class="hljs-built_in">end</span>();it++)&#123;<br>        cout&lt;&lt;<span class="hljs-string">&quot;key= &quot;</span>&lt;&lt;it-&gt;first&lt;&lt;<span class="hljs-string">&quot; value= &quot;</span>&lt;&lt;it-&gt;second&lt;&lt;endl;<br>    &#125;<br>    cout&lt;&lt;endl;<br>&#125;<br><br><span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">test01</span><span class="hljs-params">()</span></span>&#123;<br>    map&lt;<span class="hljs-type">int</span>,<span class="hljs-type">int</span>&gt;m;<br>    <span class="hljs-comment">//第一种</span><br>    m.<span class="hljs-built_in">insert</span>(<span class="hljs-built_in">pair</span>&lt;<span class="hljs-type">int</span>,<span class="hljs-type">int</span>&gt;(<span class="hljs-number">1</span>,<span class="hljs-number">10</span>));<br>    <span class="hljs-comment">//第二种</span><br>    m.<span class="hljs-built_in">insert</span>(<span class="hljs-built_in">make_pair</span>(<span class="hljs-number">2</span>,<span class="hljs-number">20</span>));<br>    <span class="hljs-comment">//第三种</span><br>    m.<span class="hljs-built_in">insert</span>(map&lt;<span class="hljs-type">int</span>,<span class="hljs-type">int</span>&gt;::<span class="hljs-built_in">value_type</span>(<span class="hljs-number">3</span>,<span class="hljs-number">30</span>));<br>    <span class="hljs-comment">//第四种,不建议使用</span><br>    m[<span class="hljs-number">4</span>]=<span class="hljs-number">40</span>;<br>    <span class="hljs-comment">//[]不建议插入，用途可以利用key访问到value</span><br>    cout&lt;&lt;m[<span class="hljs-number">5</span>]&lt;&lt;endl;   <span class="hljs-comment">//如果容器没有这个key值会直接插入该键值实值为0的元素</span><br>    <span class="hljs-built_in">print</span>(m);<br>    <br>    <span class="hljs-comment">//删除</span><br>    m.<span class="hljs-built_in">erase</span>(m.<span class="hljs-built_in">begin</span>());<br>    <span class="hljs-built_in">print</span>(m);<br>    m.<span class="hljs-built_in">erase</span>(<span class="hljs-number">3</span>);  <span class="hljs-comment">//按照key删除</span><br>    <span class="hljs-built_in">print</span>(m);<br>    <span class="hljs-comment">//清空</span><br>    <span class="hljs-comment">//m.erase(m.begin(),m.end());</span><br>    m.<span class="hljs-built_in">clear</span>();<br>    <span class="hljs-built_in">print</span>(m);<br>&#125;<br></code></pre></td></tr></table></figure>













<h4 id="map查找和统计"><a href="#map查找和统计" class="headerlink" title="map查找和统计"></a>map查找和统计</h4><p><strong>功能描述</strong>：</p>
<ul>
<li>对map容器进行查找数据以及统计数据</li>
</ul>
<p><strong>函数原型</strong>：</p>
<ul>
<li><code>find(key);</code>    &#x2F;&#x2F;查找key是否存在，若存在，返回该键的元素的迭代器；若不存在，返回set.end();</li>
<li><code>count(key);</code>    &#x2F;&#x2F;统计key的元素个数</li>
</ul>
<p>示例：</p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><code class="hljs c++"><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;iostream&gt;</span></span><br><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;map&gt;</span></span><br><span class="hljs-keyword">using</span> <span class="hljs-keyword">namespace</span> std;<br><br><span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">test01</span><span class="hljs-params">()</span></span>&#123;<br>    map&lt;<span class="hljs-type">int</span>,<span class="hljs-type">int</span>&gt;m;<br>    m.<span class="hljs-built_in">insert</span>(<span class="hljs-built_in">make_pair</span>(<span class="hljs-number">1</span>,<span class="hljs-number">10</span>));<br>    m.<span class="hljs-built_in">insert</span>(<span class="hljs-built_in">make_pair</span>(<span class="hljs-number">2</span>,<span class="hljs-number">20</span>));<br>    m.<span class="hljs-built_in">insert</span>(<span class="hljs-built_in">make_pair</span>(<span class="hljs-number">3</span>,<span class="hljs-number">30</span>));<br>    m.<span class="hljs-built_in">insert</span>(<span class="hljs-built_in">make_pair</span>(<span class="hljs-number">4</span>,<span class="hljs-number">40</span>));<br>    map&lt;<span class="hljs-type">int</span>,<span class="hljs-type">int</span>&gt;::iterator pos=m.<span class="hljs-built_in">find</span>(<span class="hljs-number">3</span>);<br>    <span class="hljs-keyword">if</span>(pos!=m.<span class="hljs-built_in">end</span>())&#123;<br>        cout&lt;&lt;<span class="hljs-string">&quot;查到了元素key= &quot;</span>&lt;&lt;pos-&gt;first&lt;&lt;<span class="hljs-string">&quot; value= &quot;</span>&lt;&lt;pos-&gt;second&lt;&lt;endl;<br>    &#125;<span class="hljs-keyword">else</span>&#123;<br>        cout&lt;&lt;<span class="hljs-string">&quot;未找到元素&quot;</span>&lt;&lt;endl;<br>    &#125;<br>    <span class="hljs-comment">//统计</span><br>    <span class="hljs-comment">//map不允许插入重复key元素，count统计而言，结果要么0，要么1</span><br>    <span class="hljs-type">int</span> num=m.<span class="hljs-built_in">count</span>(<span class="hljs-number">3</span>);<br>    cout&lt;&lt;<span class="hljs-string">&quot;num= &quot;</span>&lt;&lt;num&lt;&lt;endl;<br>&#125;<br></code></pre></td></tr></table></figure>











<h4 id="map容器排序"><a href="#map容器排序" class="headerlink" title="map容器排序"></a>map容器排序</h4><p><strong>学习目标</strong>：</p>
<ul>
<li>map容器默认排序规则为按照key值进行从小到大排序，掌握如何改变排序规则</li>
</ul>
<p><strong>主要技术点</strong>：</p>
<ul>
<li>利用仿函数，可以改变排序规则</li>
</ul>
<p>示例：</p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><code class="hljs c++"><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;iostream&gt;</span></span><br><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;map&gt;</span></span><br><span class="hljs-keyword">using</span> <span class="hljs-keyword">namespace</span> std;<br><br><span class="hljs-keyword">class</span> <span class="hljs-title class_">mycompare</span>&#123;<br><span class="hljs-keyword">public</span>:<br>    <span class="hljs-function"><span class="hljs-type">bool</span> <span class="hljs-title">operator</span><span class="hljs-params">()</span><span class="hljs-params">(<span class="hljs-type">int</span> v1,<span class="hljs-type">int</span> v2)</span></span>&#123;<br>        <span class="hljs-comment">//降序</span><br>        <span class="hljs-keyword">return</span> v1&gt;v2;<br>    &#125;<br>&#125;;<br><br><span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">test01</span><span class="hljs-params">()</span></span>&#123;<br>    map&lt;<span class="hljs-type">int</span>,<span class="hljs-type">int</span>,mycompare&gt;m;<br>    m.<span class="hljs-built_in">insert</span>(<span class="hljs-built_in">make_pair</span>(<span class="hljs-number">1</span>,<span class="hljs-number">10</span>));<br>    m.<span class="hljs-built_in">insert</span>(<span class="hljs-built_in">make_pair</span>(<span class="hljs-number">2</span>,<span class="hljs-number">30</span>));<br>    m.<span class="hljs-built_in">insert</span>(<span class="hljs-built_in">make_pair</span>(<span class="hljs-number">3</span>,<span class="hljs-number">30</span>));<br>    m.<span class="hljs-built_in">insert</span>(<span class="hljs-built_in">make_pair</span>(<span class="hljs-number">4</span>,<span class="hljs-number">40</span>));<br>    m.<span class="hljs-built_in">insert</span>(<span class="hljs-built_in">make_pair</span>(<span class="hljs-number">5</span>,<span class="hljs-number">50</span>));<br>    <span class="hljs-keyword">for</span>(map&lt;<span class="hljs-type">int</span>,<span class="hljs-type">int</span>&gt;::iterator it=m.<span class="hljs-built_in">begin</span>();it!=m.<span class="hljs-built_in">end</span>();it++)&#123;<br>        cout&lt;&lt;<span class="hljs-string">&quot;key= &quot;</span>&lt;&lt;it-&gt;first&lt;&lt;<span class="hljs-string">&quot; value= &quot;</span>&lt;&lt;it-&gt;second&lt;&lt;endl;<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure>















<h3 id="unordered-map-哈希-容器"><a href="#unordered-map-哈希-容器" class="headerlink" title="unordered_map(哈希)容器"></a>unordered_map(哈希)容器</h3><p><strong>功能描述</strong>：</p>
<ul>
<li>是一个底层由哈希表实现的无序容器，可存储若干个键值对，键有唯一性。</li>
</ul>
<h4 id="常用接口"><a href="#常用接口" class="headerlink" title="常用接口"></a><strong>常用接口</strong></h4><p><strong>构造函数</strong>：</p>
<ul>
<li><code>unordered_map&lt;key_type,val_type&gt; um</code>    &#x2F;&#x2F;key_type为键的类型一般为int型，val_type为存储数据类型</li>
</ul>
<p><strong>赋值操作</strong>：</p>
<ul>
<li><code>unordered_map&amp; operator=(const unordered_map &amp;um);</code>    &#x2F;&#x2F;重载等号操作符</li>
</ul>
<p><strong>数据存取</strong>：</p>
<ul>
<li><code>insert(make_pair(key,val))</code>      &#x2F;&#x2F;向哈希表中插入键值对</li>
</ul>
<p><strong>数据查找&#x2F;修改</strong>：</p>
<ul>
<li><code>count(const key_type&amp; key);</code>     &#x2F;&#x2F;返回键为key的元素个数</li>
<li><code>find(const key_type&amp; key);</code>      &#x2F;&#x2F;返回键为key的第一个元素，返回迭代器，没找到返回end()</li>
<li><code>emplace(const key_type&amp; key,const val_type&amp; val);</code>    &#x2F;&#x2F;如果容器中没有对应的键值，则插入一个新元素，如果有，就修改该键值对应的value值</li>
<li><code>clear();</code>    &#x2F;&#x2F;清除容器中所有元素</li>
<li><code>iterator erase ( const_iterator position ); </code>  &#x2F;&#x2F;删除指定迭代器的元素</li>
<li><code>size_type erase ( const key_type&amp; k );</code>       &#x2F;&#x2F;删除指定键值的元素</li>
<li><code>iterator erase ( const_iterator first, const_iterator last ); </code>    &#x2F;&#x2F;删除指定迭代器范围内的元素</li>
<li><code>swap(unordered_map&amp; ump);</code>    &#x2F;&#x2F;互相交换两个容器的内容，容器类型必须一致，但大小可以不同</li>
</ul>
<p><strong>大小操作</strong>：</p>
<ul>
<li><code>empty();</code>   &#x2F;&#x2F;判断哈希表是否为空</li>
<li><code>size();</code>     &#x2F;&#x2F;返回哈希表的大小</li>
<li><code>max_size();</code>   &#x2F;&#x2F;返回哈希容器最大容纳数量</li>
</ul>
<h2 id="STL-–函数对象"><a href="#STL-–函数对象" class="headerlink" title="STL –函数对象"></a>STL –函数对象</h2><h3 id="函数对象"><a href="#函数对象" class="headerlink" title="函数对象"></a>函数对象</h3><h4 id="函数对象概念"><a href="#函数对象概念" class="headerlink" title="函数对象概念"></a>函数对象概念</h4><p><strong>概念</strong>：</p>
<ul>
<li>重载<strong>函数调用操作符</strong>的类，其对象常称为<strong>函数对象</strong></li>
<li><strong>函数对象</strong>使用重载的()时，行为类似函数调用，也叫<strong>仿函数</strong></li>
</ul>
<p><strong>本质</strong>：</p>
<p>函数对象(仿函数)是一个<strong>类</strong>，不是一个函数</p>
<h4 id="函数对象使用"><a href="#函数对象使用" class="headerlink" title="函数对象使用"></a>函数对象使用</h4><p><strong>特点</strong>：</p>
<ul>
<li>函数对象在使用时，可以像普通函数那样调用，可以有参数，可以有返回值</li>
<li>函数对象超出普通函数的概念，函数对象可以有自己的状态</li>
<li>函数对象可以作为参数传递</li>
</ul>
<p>示例：</p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br></pre></td><td class="code"><pre><code class="hljs c++"><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;iostream&gt;</span></span><br><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;string&gt;</span></span><br><span class="hljs-keyword">using</span> <span class="hljs-keyword">namespace</span> std;<br><br><span class="hljs-keyword">class</span> <span class="hljs-title class_">myadd</span>&#123;<br><span class="hljs-keyword">public</span>:<br>    <span class="hljs-function"><span class="hljs-type">int</span> <span class="hljs-title">operator</span><span class="hljs-params">()</span><span class="hljs-params">(<span class="hljs-type">int</span> v1,<span class="hljs-type">int</span> v2)</span></span>&#123;<br>        <span class="hljs-keyword">return</span> v1+v2;<br>    &#125;<br>&#125;;<br><br><span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">test01</span><span class="hljs-params">()</span></span>&#123;<br>    myadd a;<br>    cout&lt;&lt;<span class="hljs-built_in">a</span>(<span class="hljs-number">10</span>,<span class="hljs-number">10</span>)&lt;&lt;endl;<br>&#125;<br><br><span class="hljs-keyword">class</span> <span class="hljs-title class_">myprint</span>&#123;<br><span class="hljs-keyword">public</span>:<br>    <span class="hljs-built_in">myprint</span>()&#123;<br>        <span class="hljs-keyword">this</span>-&gt;cnt=<span class="hljs-number">0</span>;<br>    &#125;<br>    <span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">operator</span><span class="hljs-params">()</span><span class="hljs-params">(string test)</span></span>&#123;<br>        cout&lt;&lt;test&lt;&lt;endl;<br>        cnt++;<br>    &#125;<br>    <span class="hljs-type">int</span> cnt;<br>&#125;;<br><br><span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">test02</span><span class="hljs-params">()</span></span>&#123;<br>    myprint p;<br>    <span class="hljs-built_in">p</span>(<span class="hljs-string">&quot;hello world&quot;</span>);<br>    cout&lt;&lt;<span class="hljs-string">&quot;myprint调用次数为：&quot;</span>&lt;&lt;p.cnt&lt;&lt;endl;<br>&#125;<br><br><span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">doprint</span><span class="hljs-params">(myprint &amp;mp,string test)</span></span>&#123;<br>    <span class="hljs-built_in">mp</span>(test);<br>&#125;<br><br><span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">test03</span><span class="hljs-params">()</span></span>&#123;<br>    myprint p;<br>    <span class="hljs-built_in">doprint</span>(p,<span class="hljs-string">&quot;hello C++&quot;</span>);<br>&#125;<br></code></pre></td></tr></table></figure>

<blockquote>
<p><strong>总结</strong>：</p>
<ul>
<li>仿函数写法非常灵活，可以作为参数进行传递</li>
</ul>
</blockquote>
<h3 id="谓词"><a href="#谓词" class="headerlink" title="谓词"></a>谓词</h3><h4 id="谓词概念"><a href="#谓词概念" class="headerlink" title="谓词概念"></a>谓词概念</h4><p><strong>概念</strong>：</p>
<ul>
<li>返回bool类型的仿函数称为<strong>谓词</strong></li>
<li>如果operator()接收一个参数，那么叫做一元谓词</li>
<li>如果operator()接收两个参数，那么叫做二元谓词</li>
</ul>
<h4 id="一元谓词"><a href="#一元谓词" class="headerlink" title="一元谓词"></a>一元谓词</h4><p>示例：</p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><code class="hljs c++"><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;iostream&gt;</span></span><br><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;vector&gt;</span></span><br><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;algorithm&gt;</span></span><br><span class="hljs-keyword">using</span> <span class="hljs-keyword">namespace</span> std;<br><br><span class="hljs-keyword">class</span> <span class="hljs-title class_">greaterfive</span>&#123;<br><span class="hljs-keyword">public</span>:<br>    <span class="hljs-function"><span class="hljs-type">bool</span> <span class="hljs-title">operator</span><span class="hljs-params">()</span><span class="hljs-params">(<span class="hljs-type">int</span> val)</span></span>&#123;<br>        <span class="hljs-keyword">return</span> val&gt;<span class="hljs-number">5</span>;<br>    &#125;<br>&#125;;<br><br><span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">test01</span><span class="hljs-params">()</span></span>&#123;<br>    vector&lt;<span class="hljs-type">int</span>&gt;v;<br>    <span class="hljs-keyword">for</span>(<span class="hljs-type">int</span> i=<span class="hljs-number">0</span>;i&lt;<span class="hljs-number">10</span>;i++)&#123;<br>        v.<span class="hljs-built_in">push_back</span>(i);<br>    &#125;<br>    <span class="hljs-comment">//查找容器中有没有大于5的数字</span><br>    <span class="hljs-comment">//greatefive()匿名函数对象</span><br>    vector&lt;<span class="hljs-type">int</span>&gt;::iterator it=<span class="hljs-built_in">find_if</span>(v.<span class="hljs-built_in">begin</span>(),v.<span class="hljs-built_in">end</span>(),<span class="hljs-built_in">greaterfive</span>());<br>    <span class="hljs-keyword">if</span>(it==v.<span class="hljs-built_in">end</span>())&#123;<br>        cout&lt;&lt;<span class="hljs-string">&quot;未找到&quot;</span>&lt;&lt;endl;<br>    &#125;<span class="hljs-keyword">else</span>&#123;<br>        cout&lt;&lt;<span class="hljs-string">&quot;找到了大于5的数字为：&quot;</span>&lt;&lt;*it&lt;&lt;endl;<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure>













<h4 id="二元谓词"><a href="#二元谓词" class="headerlink" title="二元谓词"></a>二元谓词</h4><p>示例：</p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><code class="hljs c++"><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;iostream&gt;</span></span><br><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;vector&gt;</span></span><br><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;algorithm&gt;</span></span><br><span class="hljs-keyword">using</span> <span class="hljs-keyword">namespace</span> std;<br><br><span class="hljs-keyword">class</span> <span class="hljs-title class_">mycompare</span>&#123;<br><span class="hljs-keyword">public</span>:<br>    <span class="hljs-function"><span class="hljs-type">bool</span> <span class="hljs-title">operator</span><span class="hljs-params">()</span><span class="hljs-params">(<span class="hljs-type">int</span> val1,<span class="hljs-type">int</span> val2)</span></span>&#123;<br>        <span class="hljs-keyword">return</span> val1&gt;val2;<br>    &#125;<br>&#125;;<br><br><span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">test01</span><span class="hljs-params">()</span></span>&#123;<br>    vector&lt;<span class="hljs-type">int</span>&gt;v;<br>    v.<span class="hljs-built_in">push_back</span>(<span class="hljs-number">10</span>);<br>    v.<span class="hljs-built_in">push_back</span>(<span class="hljs-number">40</span>);<br>    v.<span class="hljs-built_in">push_back</span>(<span class="hljs-number">20</span>);<br>    v.<span class="hljs-built_in">push_back</span>(<span class="hljs-number">30</span>);<br>    v.<span class="hljs-built_in">push_back</span>(<span class="hljs-number">50</span>);<br>    <span class="hljs-built_in">sort</span>(v.<span class="hljs-built_in">begin</span>(),v.<span class="hljs-built_in">end</span>());<br>    <span class="hljs-keyword">for</span>(vector&lt;<span class="hljs-type">int</span>&gt;::iterator it=v.<span class="hljs-built_in">begin</span>();it!=v.<span class="hljs-built_in">end</span>();it++)&#123;<br>        cout&lt;&lt;*it&lt;&lt;<span class="hljs-string">&quot; &quot;</span>;<br>    &#125;<br>    cout&lt;&lt;endl;<br>    <span class="hljs-comment">//使用函数对象，改变算法策略，变为降序排序规则</span><br>    <span class="hljs-built_in">sort</span>(v.<span class="hljs-built_in">begin</span>(),v.<span class="hljs-built_in">end</span>(),<span class="hljs-built_in">mycompare</span>());<br>    cout&lt;&lt;<span class="hljs-string">&quot;---------------------&quot;</span>&lt;&lt;endl;<br>    <span class="hljs-keyword">for</span>(vector&lt;<span class="hljs-type">int</span>&gt;::iterator it=v.<span class="hljs-built_in">begin</span>();it!=v.<span class="hljs-built_in">end</span>();it++)&#123;<br>        cout&lt;&lt;*it&lt;&lt;<span class="hljs-string">&quot; &quot;</span>;<br>    &#125;<br>    cout&lt;&lt;endl;<br>&#125;<br></code></pre></td></tr></table></figure>













<h3 id="内建函数对象"><a href="#内建函数对象" class="headerlink" title="内建函数对象"></a>内建函数对象</h3><h4 id="内建函数对象意义"><a href="#内建函数对象意义" class="headerlink" title="内建函数对象意义"></a>内建函数对象意义</h4><p><strong>概念</strong>：</p>
<ul>
<li>STL内建了一些函数对象</li>
</ul>
<p><strong>分类</strong>：</p>
<ul>
<li>算术仿函数</li>
<li>关系仿函数</li>
<li>逻辑仿函数</li>
</ul>
<p><strong>用法</strong>：</p>
<ul>
<li>这些仿函数所产生的对象，用法和一般函数完全相同</li>
<li>使用内建函数对象，需要引入头文件<code>#include &lt;functional&gt;</code></li>
</ul>
<h4 id="算术仿函数"><a href="#算术仿函数" class="headerlink" title="算术仿函数"></a>算术仿函数</h4><p><strong>功能描述</strong>：</p>
<ul>
<li>实现四则运算</li>
<li>其中negate是一元运算，其他都是二元运算</li>
</ul>
<p><strong>仿函数原型</strong>：</p>
<ul>
<li><code>template&lt;class T&gt; T plus&lt;T&gt;</code>        &#x2F;&#x2F;加法仿函数</li>
<li><code>template&lt;class T&gt; T minus&lt;T&gt;</code>     &#x2F;&#x2F;减法仿函数</li>
<li><code>template&lt;class T&gt; T multiplies&lt;T&gt;</code>  &#x2F;&#x2F;乘法仿函数</li>
<li><code>template&lt;class T&gt; T divides&lt;T&gt;</code>   &#x2F;&#x2F;除法仿函数</li>
<li><code>template&lt;class T&gt; T modulus&lt;T&gt;</code>    &#x2F;&#x2F;取模仿函数</li>
<li><code>template&lt;class T&gt; T negate&lt;T&gt;</code>     &#x2F;&#x2F;取反仿函数</li>
</ul>
<p>示例：</p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><code class="hljs c++"><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;iostream&gt;</span></span><br><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;functional&gt;</span></span><br><span class="hljs-keyword">using</span> <span class="hljs-keyword">namespace</span> std;<br><br><span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">test01</span><span class="hljs-params">()</span></span>&#123;<br>    negate&lt;<span class="hljs-type">int</span>&gt;n;<br>    cout&lt;&lt;<span class="hljs-built_in">n</span>(<span class="hljs-number">50</span>)&lt;&lt;endl;<br>&#125;<br><br><span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">test02</span><span class="hljs-params">()</span></span>&#123;<br>    plus&lt;<span class="hljs-type">int</span>&gt;p;<br>    cout&lt;&lt;<span class="hljs-built_in">p</span>(<span class="hljs-number">10</span>,<span class="hljs-number">10</span>)&lt;&lt;endl;<br>&#125;<br></code></pre></td></tr></table></figure>









<h4 id="关系仿函数"><a href="#关系仿函数" class="headerlink" title="关系仿函数"></a>关系仿函数</h4><p><strong>功能描述</strong>：</p>
<ul>
<li>实现关系对比</li>
</ul>
<p><strong>仿函数原型</strong>：</p>
<ul>
<li><code>template&lt;class T&gt; bool equal_to&lt;T&gt;</code>    &#x2F;&#x2F;等于</li>
<li><code>template&lt;class T&gt; bool not_equal_to&lt;T&gt;</code>   &#x2F;&#x2F;不等于</li>
<li><code>template&lt;class T&gt; bool greater&lt;T&gt;</code>    &#x2F;&#x2F;大于</li>
<li><code>template&lt;class T&gt; bool greater_equal&lt;T&gt;</code>   &#x2F;&#x2F;大于等于</li>
<li><code>template&lt;class T&gt; bool less&lt;T&gt;</code>    &#x2F;&#x2F;小于</li>
<li><code>template&lt;class T&gt; bool less_equal&lt;T&gt;</code>    &#x2F;&#x2F;小于等于</li>
</ul>
<p>示例：</p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><code class="hljs c++"><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;iostream&gt;</span></span><br><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;functional&gt;</span></span><br><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;vector&gt;</span></span><br><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;algorithm&gt;</span></span><br><span class="hljs-keyword">using</span> <span class="hljs-keyword">namespace</span> std;<br><br><span class="hljs-keyword">class</span> <span class="hljs-title class_">mycompare</span>&#123;<br><span class="hljs-keyword">public</span>:<br>    <span class="hljs-function"><span class="hljs-type">bool</span> <span class="hljs-title">operator</span><span class="hljs-params">()</span><span class="hljs-params">(<span class="hljs-type">int</span> v1,<span class="hljs-type">int</span> v2)</span></span>&#123;<br>        <span class="hljs-keyword">return</span> v1&gt;v2;<br>    &#125;<br>&#125;;<br><br><span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">test01</span><span class="hljs-params">()</span></span>&#123;<br>    vector&lt;<span class="hljs-type">int</span>&gt;v;<br>    v.<span class="hljs-built_in">push_back</span>(<span class="hljs-number">10</span>);<br>    v.<span class="hljs-built_in">push_back</span>(<span class="hljs-number">30</span>);<br>    v.<span class="hljs-built_in">push_back</span>(<span class="hljs-number">40</span>);<br>    v.<span class="hljs-built_in">push_back</span>(<span class="hljs-number">20</span>);<br>    v.<span class="hljs-built_in">push_back</span>(<span class="hljs-number">50</span>);<br>    <span class="hljs-keyword">for</span>(vector&lt;<span class="hljs-type">int</span>&gt;::iterator it=v.<span class="hljs-built_in">begin</span>();it!=v.<span class="hljs-built_in">end</span>();it++)&#123;<br>        cout&lt;&lt;*it&lt;&lt;<span class="hljs-string">&quot; &quot;</span>;<br>    &#125;<br>    cout&lt;&lt;endl;<br>    <span class="hljs-comment">//降序</span><br>    <span class="hljs-comment">//sort(v.begin(),v.end(),mycompare());</span><br>    <span class="hljs-comment">//使用内建仿函数</span><br>    <span class="hljs-built_in">sort</span>(v.<span class="hljs-built_in">begin</span>(),v.<span class="hljs-built_in">end</span>(),<span class="hljs-built_in">greater</span>&lt;<span class="hljs-type">int</span>&gt;());<br>    <span class="hljs-keyword">for</span>(vector&lt;<span class="hljs-type">int</span>&gt;::iterator it=v.<span class="hljs-built_in">begin</span>();it!=v.<span class="hljs-built_in">end</span>();it++)&#123;<br>        cout&lt;&lt;*it&lt;&lt;<span class="hljs-string">&quot; &quot;</span>;<br>    &#125;<br>    cout&lt;&lt;endl;<br>&#125;<br></code></pre></td></tr></table></figure>















<h4 id="逻辑仿函数"><a href="#逻辑仿函数" class="headerlink" title="逻辑仿函数"></a>逻辑仿函数</h4><p><strong>功能描述</strong>：</p>
<ul>
<li>实现逻辑运算</li>
</ul>
<p><strong>函数原型</strong>：</p>
<ul>
<li><code>template&lt;class T&gt; bool logical_and&lt;T&gt;</code>   &#x2F;&#x2F;逻辑与</li>
<li><code>template&lt;class T&gt; bool logical_or&lt;T&gt;</code>    &#x2F;&#x2F;逻辑或</li>
<li><code>template&lt;class T&gt; bool logical_not&lt;T&gt;</code>    &#x2F;&#x2F;逻辑非</li>
</ul>
<p>示例：</p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><code class="hljs c++"><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;iostream&gt;</span></span><br><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;functional&gt;</span></span><br><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;algorithm&gt;</span></span><br><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;vector&gt;</span></span><br><span class="hljs-keyword">using</span> <span class="hljs-keyword">namespace</span> std;<br><br><span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">test01</span><span class="hljs-params">()</span></span>&#123;<br>    vector&lt;<span class="hljs-type">bool</span>&gt;v;<br>    v.<span class="hljs-built_in">push_back</span>(<span class="hljs-literal">true</span>);<br>    v.<span class="hljs-built_in">push_back</span>(<span class="hljs-literal">false</span>);<br>    v.<span class="hljs-built_in">push_back</span>(<span class="hljs-literal">true</span>);<br>    v.<span class="hljs-built_in">push_back</span>(<span class="hljs-literal">false</span>);<br>    <br>   <span class="hljs-keyword">for</span>(vector&lt;<span class="hljs-type">bool</span>&gt;::iterator it=v.<span class="hljs-built_in">begin</span>();it!=v.<span class="hljs-built_in">end</span>();it++)&#123;<br>       cout&lt;&lt;*it&lt;&lt;<span class="hljs-string">&quot; &quot;</span>;<br>   &#125;<br>    cout&lt;&lt;endl;<br>    <span class="hljs-comment">//利用逻辑非将容器v搬运到容器v2中，并执行取反的操作</span><br>    vector&lt;<span class="hljs-type">bool</span>&gt;v2;<br>    v2.<span class="hljs-built_in">resize</span>(v.<span class="hljs-built_in">size</span>());<br>    <span class="hljs-built_in">transform</span>(v.<span class="hljs-built_in">begin</span>(),v.<span class="hljs-built_in">end</span>(),v2.<span class="hljs-built_in">begin</span>(),<span class="hljs-built_in">logical_not</span>&lt;<span class="hljs-type">bool</span>&gt;());<br>    cout&lt;&lt;<span class="hljs-string">&quot;--------------------&quot;</span>&lt;&lt;endl;<br>    <span class="hljs-keyword">for</span>(vector&lt;<span class="hljs-type">bool</span>&gt;::iterator it=v2.<span class="hljs-built_in">begin</span>();it!=v2.<span class="hljs-built_in">end</span>();it++)&#123;<br>       cout&lt;&lt;*it&lt;&lt;<span class="hljs-string">&quot; &quot;</span>;<br>   &#125;<br>    cout&lt;&lt;endl;<br>&#125;<br></code></pre></td></tr></table></figure>

<blockquote>
<p><strong>总结</strong>：逻辑仿函数实际应用较少，了解即可</p>
</blockquote>
<h2 id="STL-–常用算法"><a href="#STL-–常用算法" class="headerlink" title="STL –常用算法"></a>STL –常用算法</h2><p><strong>概述</strong>：</p>
<ul>
<li>算法主要是由头文件<code>&lt;algorithm&gt; &lt;functional&gt; &lt;numeric&gt;</code>组成</li>
<li><code>&lt;algorithm&gt;</code>是所有STL头文件中最大的一个，范围涉及到比较、交换、查找、遍历操作、复制、修改等等</li>
<li><code>&lt;numeric&gt;</code>体积很小，只包括几个在序列上面进行简单数学运算的模板函数</li>
<li><code>&lt;functional&gt;</code>定义了一些模板类，用以声明函数对象</li>
</ul>
<h3 id="常用遍历算法"><a href="#常用遍历算法" class="headerlink" title="常用遍历算法"></a>常用遍历算法</h3><p><strong>学习目标</strong>：</p>
<ul>
<li>掌握常用的遍历算法</li>
</ul>
<p><strong>算法简介</strong>：</p>
<ul>
<li><code>for_each</code>    &#x2F;&#x2F;遍历容器</li>
<li><code>transform</code>   &#x2F;&#x2F;搬运容器到另一个容器中</li>
</ul>
<h4 id="for-each算法"><a href="#for-each算法" class="headerlink" title="for_each算法"></a>for_each算法</h4><p><strong>功能描述</strong>：</p>
<ul>
<li>实现遍历容器</li>
</ul>
<p><strong>函数原型</strong>：</p>
<ul>
<li><p><code>for_each(iterator beg,iterator end,_func);</code></p>
<p>&#x2F;&#x2F;遍历算法  遍历容器元素</p>
<p>&#x2F;&#x2F;beg开始迭代器</p>
<p>&#x2F;&#x2F;end结束迭代器</p>
<p>&#x2F;&#x2F;_func函数或者函数对象</p>
</li>
</ul>
<p>示例：</p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><code class="hljs c++"><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;iostream&gt;</span></span><br><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;algorithm&gt;</span></span><br><span class="hljs-meta">#incude <span class="hljs-string">&lt;vector&gt;</span></span><br><span class="hljs-keyword">using</span> <span class="hljs-keyword">namespace</span> std;<br><br><span class="hljs-comment">//普通函数</span><br><span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">print01</span><span class="hljs-params">(<span class="hljs-type">int</span> val)</span></span>&#123;<br>    cout&lt;&lt;val&lt;&lt;<span class="hljs-string">&quot; &quot;</span>;<br>&#125;<br><br><span class="hljs-comment">//仿函数</span><br><span class="hljs-keyword">class</span> <span class="hljs-title class_">print02</span>&#123;<br><span class="hljs-keyword">public</span>:<br>    <span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">operator</span><span class="hljs-params">()</span><span class="hljs-params">(<span class="hljs-type">int</span> val)</span></span>&#123;<br>        cout&lt;&lt;val&lt;&lt;<span class="hljs-string">&quot; &quot;</span>;<br>    &#125;<br>&#125;;<br><br><span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">test01</span><span class="hljs-params">()</span></span>&#123;<br>    vector&lt;<span class="hljs-type">int</span>&gt;v;<br>    <span class="hljs-keyword">for</span>(<span class="hljs-type">int</span> i=<span class="hljs-number">0</span>;i&lt;<span class="hljs-number">10</span>;i++)&#123;<br>        v.<span class="hljs-built_in">push_back</span>(i);<br>    &#125;<br>    for_each(v.<span class="hljs-built_in">begin</span>(),v.<span class="hljs-built_in">end</span>(),print01);<br>    cout&lt;&lt;endl;<br>    for_each(v.<span class="hljs-built_in">begin</span>(),v.<span class="hljs-built_in">end</span>(),<span class="hljs-built_in">print02</span>());<br>    cout&lt;&lt;endl;<br>&#125;<br></code></pre></td></tr></table></figure>

<blockquote>
<p><strong>总结</strong>：for_each在实际开发中是最常用遍历算法，需要熟练掌握</p>
</blockquote>
<h4 id="transform算法"><a href="#transform算法" class="headerlink" title="transform算法"></a>transform算法</h4><p><strong>功能描述</strong>：</p>
<ul>
<li>搬运容器到另一个容器中</li>
</ul>
<p><strong>函数原型</strong>：</p>
<ul>
<li><p><code>transform(iterator beg1,iterator end1,iterator beg2,_func);</code></p>
<p>&#x2F;&#x2F;beg1 源容器开始迭代器</p>
<p>&#x2F;&#x2F;end1 源容器结束迭代器</p>
<p>&#x2F;&#x2F;beg2 目标容器开始迭代器</p>
<p>&#x2F;&#x2F;_func 函数或者函数对象</p>
</li>
</ul>
<p>示例：</p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><code class="hljs c++"><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;iostream&gt;</span></span><br><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;vector&gt;</span></span><br><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;algorithm&gt;</span></span><br><span class="hljs-keyword">using</span> <span class="hljs-keyword">namespace</span> std;<br><br><span class="hljs-keyword">class</span> <span class="hljs-title class_">Transform</span>&#123;<br><span class="hljs-keyword">public</span>:<br>    <span class="hljs-function"><span class="hljs-type">int</span> <span class="hljs-title">operator</span><span class="hljs-params">()</span><span class="hljs-params">(<span class="hljs-type">int</span> v)</span></span>&#123;<br>        <span class="hljs-keyword">return</span> v+<span class="hljs-number">1000</span>;<br>    &#125;<br>&#125;;<br><br><span class="hljs-keyword">class</span> <span class="hljs-title class_">myprint</span>&#123;<br><span class="hljs-keyword">public</span>:<br>    <span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">operator</span><span class="hljs-params">()</span><span class="hljs-params">(<span class="hljs-type">int</span> val)</span></span>&#123;<br>        cout&lt;&lt;val&lt;&lt;<span class="hljs-string">&quot; &quot;</span>;<br>    &#125;<br>&#125;;<br><br><span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">test01</span><span class="hljs-params">()</span></span>&#123;<br>    vector&lt;<span class="hljs-type">int</span>&gt;v;<br>    <span class="hljs-keyword">for</span>(<span class="hljs-type">int</span> i=<span class="hljs-number">0</span>;i&lt;<span class="hljs-number">10</span>;i++)&#123;<br>        v.<span class="hljs-built_in">push_back</span>(i);<br>    &#125;<br>    <br>    vector&lt;<span class="hljs-type">int</span>&gt;vt;  <span class="hljs-comment">//目标容器</span><br>    vt.<span class="hljs-built_in">resize</span>(v.<span class="hljs-built_in">size</span>()); <span class="hljs-comment">//目标容器需要提前开辟空间</span><br>    <span class="hljs-built_in">transform</span>(v.<span class="hljs-built_in">begin</span>(),v.<span class="hljs-built_in">end</span>(),vt.<span class="hljs-built_in">begin</span>(),<span class="hljs-built_in">Transform</span>());<br>    for_each(vt.<span class="hljs-built_in">begin</span>(),vt.<span class="hljs-built_in">end</span>(),<span class="hljs-built_in">myprint</span>());<br>    cout&lt;&lt;endl;<br>&#125;<br></code></pre></td></tr></table></figure>

<blockquote>
<p><strong>总结</strong>：搬运的目标容器必须要提前开辟空间，否则无法正常搬运</p>
</blockquote>
<h3 id="常用查找算法"><a href="#常用查找算法" class="headerlink" title="常用查找算法"></a>常用查找算法</h3><p><strong>学习目标</strong>：</p>
<ul>
<li>掌握常用的查找算法</li>
</ul>
<p><strong>算法简介</strong>：</p>
<ul>
<li><code>find</code>     &#x2F;&#x2F;查找元素</li>
<li><code>find_if</code>    &#x2F;&#x2F;按条件查找元素</li>
<li><code>abjacent_find</code>    &#x2F;&#x2F;查找相邻重复元素</li>
<li><code>binary_search</code>    &#x2F;&#x2F;二分查找法</li>
<li><code>count</code>       &#x2F;&#x2F;统计元素个数</li>
<li><code>count_if</code>   &#x2F;&#x2F;按条件统计元素个数</li>
</ul>
<h4 id="find-算法"><a href="#find-算法" class="headerlink" title="find 算法"></a>find 算法</h4><p><strong>功能描述</strong>：</p>
<ul>
<li>查找指定元素，找到返回指定元素的迭代器，找不到返回结束迭代器end()</li>
</ul>
<p><strong>函数原型</strong>：</p>
<ul>
<li><p><code>find(iterator beg,iterator end,value);</code></p>
<p>&#x2F;&#x2F;按值查找元素，找到返回指定位置迭代器，找不到返回结束迭代器位置</p>
<p>&#x2F;&#x2F;beg  开始迭代器</p>
<p>&#x2F;&#x2F;end  结束迭代器</p>
<p>&#x2F;&#x2F;value  查找的元素</p>
</li>
</ul>
<p>示例：</p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br></pre></td><td class="code"><pre><code class="hljs c++"><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;iostream&gt;</span></span><br><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;algorithm&gt;</span></span><br><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;vector&gt;</span></span><br><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;string&gt;</span></span><br><span class="hljs-keyword">using</span> <span class="hljs-keyword">namespace</span> std;<br><br><span class="hljs-comment">//查找内置数据类型</span><br><span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">test01</span><span class="hljs-params">()</span></span>&#123;<br>    vector&lt;<span class="hljs-type">int</span>&gt;v;<br>    <span class="hljs-keyword">for</span>(<span class="hljs-type">int</span> i=<span class="hljs-number">0</span>;i&lt;<span class="hljs-number">10</span>;i++)&#123;<br>        v.<span class="hljs-built_in">push_back</span>(i);<br>    &#125;<br>    vector&lt;<span class="hljs-type">int</span>&gt;::iterator it=<span class="hljs-built_in">find</span>(v.<span class="hljs-built_in">begin</span>(),v.<span class="hljs-built_in">end</span>(),<span class="hljs-number">5</span>);<br>    <span class="hljs-keyword">if</span>(it==v.<span class="hljs-built_in">end</span>())&#123;<br>        cout&lt;&lt;<span class="hljs-string">&quot;未找到&quot;</span>&lt;&lt;endl;<br>    &#125;<span class="hljs-keyword">else</span>&#123;<br>        cout&lt;&lt;<span class="hljs-string">&quot;找到：&quot;</span>&lt;&lt;*it&lt;&lt;endl;<br>    &#125;<br>&#125;<br><br><span class="hljs-keyword">class</span> <span class="hljs-title class_">Person</span>&#123;<br><span class="hljs-keyword">public</span>:<br>    <span class="hljs-built_in">Person</span>(string name,<span class="hljs-type">int</span> age)&#123;<br>        <span class="hljs-keyword">this</span>-&gt;m_name=name;<br>        <span class="hljs-keyword">this</span>-&gt;m_age=age;<br>    &#125;<br>    <span class="hljs-comment">//重载==号 让底层find知道如何对比person数据类型</span><br>    <span class="hljs-type">bool</span> <span class="hljs-keyword">operator</span>==(<span class="hljs-type">const</span> Person &amp;p)&#123;<br>        <span class="hljs-keyword">if</span>(<span class="hljs-keyword">this</span>-&gt;m_name==p.m_name&amp;&amp;<span class="hljs-keyword">this</span>-&gt;m_age==p.m_age)&#123;<br>            <span class="hljs-keyword">return</span> <span class="hljs-literal">true</span>;<br>        &#125;<span class="hljs-keyword">else</span>&#123;<br>            <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>;<br>        &#125;<br>    &#125;<br>    string m_name;<br>    <span class="hljs-type">int</span> m_age;<br>&#125;;<br><br><span class="hljs-comment">//查找自定义数据类型</span><br><span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">test02</span><span class="hljs-params">()</span></span>&#123;<br>    vector&lt;Person&gt;v;<br>    <span class="hljs-function">Person <span class="hljs-title">p1</span><span class="hljs-params">(<span class="hljs-string">&quot;aaa&quot;</span>,<span class="hljs-number">10</span>)</span></span>;<br>    <span class="hljs-function">Person <span class="hljs-title">p2</span><span class="hljs-params">(<span class="hljs-string">&quot;bbb&quot;</span>,<span class="hljs-number">20</span>)</span></span>;<br>    <span class="hljs-function">Person <span class="hljs-title">p3</span><span class="hljs-params">(<span class="hljs-string">&quot;ccc&quot;</span>,<span class="hljs-number">30</span>)</span></span>;<br>    <span class="hljs-function">Person <span class="hljs-title">p4</span><span class="hljs-params">(<span class="hljs-string">&quot;ddd&quot;</span>,<span class="hljs-number">40</span>)</span></span>;<br>    v.<span class="hljs-built_in">push_back</span>(p1);<br>    v.<span class="hljs-built_in">push_back</span>(p2);<br>    v.<span class="hljs-built_in">push_back</span>(p3);<br>    v.<span class="hljs-built_in">push_back</span>(p4);<br>    vector&lt;Person&gt;::iterator it=<span class="hljs-built_in">find</span>(v.<span class="hljs-built_in">begin</span>(),v.<span class="hljs-built_in">end</span>(),p2);<br>    <span class="hljs-keyword">if</span>(it==v.<span class="hljs-built_in">end</span>())&#123;<br>        cout&lt;&lt;<span class="hljs-string">&quot;未找到&quot;</span>&lt;&lt;endl;<br>    &#125;<span class="hljs-keyword">else</span>&#123;<br>        cout&lt;&lt;<span class="hljs-string">&quot;找到元素 姓名：&quot;</span>&lt;&lt;it-&gt;m_name&lt;&lt;<span class="hljs-string">&quot; 年龄：&quot;</span>&lt;&lt;it-&gt;m_age&lt;&lt;endl;<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure>















<h4 id="find-if-算法"><a href="#find-if-算法" class="headerlink" title="find_if 算法"></a>find_if 算法</h4><p><strong>功能描述</strong>：</p>
<ul>
<li>按条件查找元素</li>
</ul>
<p><strong>函数原型</strong>：</p>
<ul>
<li><p><code>find_if(iterator beg,iterator end,_Pred);</code></p>
<p>&#x2F;&#x2F;按值查找元素，找到返回指定位置的迭代器，找不到返回结束迭代器位置</p>
<p>&#x2F;&#x2F;beg  开始迭代器</p>
<p>&#x2F;&#x2F;end  结束迭代器</p>
<p>&#x2F;&#x2F;_Pred  函数或者谓词(返回bool类型的仿函数)</p>
</li>
</ul>
<p>示例：</p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br></pre></td><td class="code"><pre><code class="hljs c++"><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;iostream&gt;</span></span><br><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;vector&gt;</span></span><br><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;string&gt;</span></span><br><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;algorithm&gt;</span></span><br><span class="hljs-keyword">using</span> <span class="hljs-keyword">namespace</span> std;<br><br><span class="hljs-keyword">class</span> <span class="hljs-title class_">greaterfive</span>&#123;<br><span class="hljs-keyword">public</span>:<br>    <span class="hljs-function"><span class="hljs-type">bool</span> <span class="hljs-title">operator</span><span class="hljs-params">()</span><span class="hljs-params">(<span class="hljs-type">int</span> val)</span></span>&#123;<br>        <span class="hljs-keyword">return</span> val&gt;<span class="hljs-number">5</span>;<br>    &#125;<br>&#125;;<br><br><span class="hljs-comment">//查找内置数据类型</span><br><span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">test01</span><span class="hljs-params">()</span></span>&#123;<br>    vector&lt;<span class="hljs-type">int</span>&gt;v;<br>    <span class="hljs-keyword">for</span>(<span class="hljs-type">int</span> i=<span class="hljs-number">0</span>;i&lt;<span class="hljs-number">10</span>;i++)&#123;<br>        v.<span class="hljs-built_in">push_back</span>(i);<br>    &#125;<br>    vector&lt;<span class="hljs-type">int</span>&gt;::iterator it=<span class="hljs-built_in">find_if</span>(v.<span class="hljs-built_in">begin</span>(),v.<span class="hljs-built_in">end</span>(),<span class="hljs-built_in">greaterfive</span>());<br>    <span class="hljs-keyword">if</span>(it==v.<span class="hljs-built_in">end</span>())&#123;<br>        cout&lt;&lt;<span class="hljs-string">&quot;没有找到&quot;</span>&lt;&lt;endl;<br>    &#125;<span class="hljs-keyword">else</span>&#123;<br>        cout&lt;&lt;<span class="hljs-string">&quot;找到大于5的数字为：&quot;</span>&lt;&lt;*it&lt;&lt;endl;<br>    &#125;<br>&#125;<br><br><span class="hljs-keyword">class</span> <span class="hljs-title class_">Person</span>&#123;<br><span class="hljs-keyword">public</span>:<br>    <span class="hljs-built_in">Person</span>(string name,<span class="hljs-type">int</span> age)&#123;<br>        <span class="hljs-keyword">this</span>-&gt;m_name=name;<br>        <span class="hljs-keyword">this</span>-&gt;m_age=age;<br>    &#125;<br>    string m_name;<br>    <span class="hljs-type">int</span> m_age;<br>&#125;;<br><br><span class="hljs-keyword">class</span> <span class="hljs-title class_">greater20</span>&#123;<br><span class="hljs-keyword">public</span>:<br>    <span class="hljs-function"><span class="hljs-type">bool</span> <span class="hljs-title">operator</span><span class="hljs-params">()</span><span class="hljs-params">(Person &amp;p)</span></span>&#123;<br>        <span class="hljs-keyword">return</span> p.m_age&gt;<span class="hljs-number">20</span>;<br>    &#125;<br>&#125;;<br><br><span class="hljs-comment">//查找自定义数据类型</span><br><span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">test02</span><span class="hljs-params">()</span></span>&#123;<br>    vector&lt;Person&gt;v;<br>    <span class="hljs-function">Person <span class="hljs-title">p1</span><span class="hljs-params">(<span class="hljs-string">&quot;a&quot;</span>,<span class="hljs-number">10</span>)</span></span>;<br>    <span class="hljs-function">Person <span class="hljs-title">p2</span><span class="hljs-params">(<span class="hljs-string">&quot;b&quot;</span>,<span class="hljs-number">20</span>)</span></span>;<br>    <span class="hljs-function">Person <span class="hljs-title">p3</span><span class="hljs-params">(<span class="hljs-string">&quot;c&quot;</span>,<span class="hljs-number">30</span>)</span></span>;<br>    <span class="hljs-function">Person <span class="hljs-title">p4</span><span class="hljs-params">(<span class="hljs-string">&quot;d&quot;</span>,<span class="hljs-number">40</span>)</span></span>;<br>    v.<span class="hljs-built_in">push_back</span>(p1);<br>    v.<span class="hljs-built_in">push_back</span>(p2);<br>    v.<span class="hljs-built_in">push_back</span>(p3);<br>    v.<span class="hljs-built_in">push_back</span>(p4);<br>    vector&lt;Person&gt;::iterator it=<span class="hljs-built_in">find_if</span>(v.<span class="hljs-built_in">begin</span>(),v.<span class="hljs-built_in">end</span>(),<span class="hljs-built_in">greater20</span>());<br>    <span class="hljs-keyword">if</span>(it==v.<span class="hljs-built_in">end</span>())&#123;<br>        cout&lt;&lt;<span class="hljs-string">&quot;未找到&quot;</span>&lt;&lt;endl;<br>    &#125;<span class="hljs-keyword">else</span>&#123;<br>        cout&lt;&lt;<span class="hljs-string">&quot;找到姓名：&quot;</span>&lt;&lt;it-&gt;m_name&lt;&lt;<span class="hljs-string">&quot; 年龄：&quot;</span>&lt;&lt;it-&gt;m_age&lt;&lt;endl;<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure>















<h4 id="adjacent-find-算法"><a href="#adjacent-find-算法" class="headerlink" title="adjacent_find 算法"></a>adjacent_find 算法</h4><p><strong>功能描述</strong>：</p>
<ul>
<li>查找相邻重复元素</li>
</ul>
<p><strong>函数原型</strong>：</p>
<ul>
<li><p><code>adjacent_find(iterator beg,iterator end);</code></p>
<p>&#x2F;&#x2F;查找相邻重复元素，返回相邻元素的第一个位置的迭代器</p>
<p>&#x2F;&#x2F;beg开始迭代器</p>
<p>&#x2F;&#x2F;end 结束迭代器</p>
</li>
</ul>
<p>示例：</p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><code class="hljs c++"><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;iostream&gt;</span></span><br><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;vector&gt;</span></span><br><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;algorithm&gt;</span></span><br><span class="hljs-keyword">using</span> <span class="hljs-keyword">namespace</span> std;<br><br><br><span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">test01</span><span class="hljs-params">()</span></span>&#123;<br>    vector&lt;<span class="hljs-type">int</span>&gt;v;<br>    v.<span class="hljs-built_in">push_back</span>(<span class="hljs-number">0</span>);<br>    v.<span class="hljs-built_in">push_back</span>(<span class="hljs-number">2</span>);<br>    v.<span class="hljs-built_in">push_back</span>(<span class="hljs-number">0</span>);<br>    v.<span class="hljs-built_in">push_back</span>(<span class="hljs-number">3</span>);<br>    v.<span class="hljs-built_in">push_back</span>(<span class="hljs-number">1</span>);<br>    v.<span class="hljs-built_in">push_back</span>(<span class="hljs-number">4</span>);<br>    v.<span class="hljs-built_in">push_back</span>(<span class="hljs-number">3</span>);<br>    v.<span class="hljs-built_in">push_back</span>(<span class="hljs-number">3</span>);<br>    vector&lt;<span class="hljs-type">int</span>&gt;::iterator pos=<span class="hljs-built_in">adjacent_find</span>(v.<span class="hljs-built_in">begin</span>(),v.<span class="hljs-built_in">end</span>());<br>    <span class="hljs-keyword">if</span>(pos==v.<span class="hljs-built_in">end</span>())&#123;<br>        cout&lt;&lt;<span class="hljs-string">&quot;未找到相邻重复元素&quot;</span>&lt;&lt;endl;<br>    &#125;<span class="hljs-keyword">else</span>&#123;<br>        cout&lt;&lt;<span class="hljs-string">&quot;找到相邻重复元素：&quot;</span>&lt;&lt;*pos&lt;&lt;endl;<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure>

<blockquote>
<p><strong>总结</strong>：面试题中如果出现查找相邻重复元素，记得用STL中的adjacemt_find算法</p>
</blockquote>
<p><strong>binary_search 算法</strong></p>
<p><strong>功能描述</strong>：</p>
<ul>
<li>查找指定元素是否存在</li>
</ul>
<p><strong>函数原型</strong>：</p>
<ul>
<li><p><code>bool binary_search(iterator beg,iterator end,value);</code></p>
<p>&#x2F;&#x2F;查找指定的元素，查到返回true，否则返回false</p>
<p>&#x2F;&#x2F;<strong>注意</strong>：在<strong>无序序列中不可用</strong></p>
<p>&#x2F;&#x2F;beg 开始迭代器</p>
<p>&#x2F;&#x2F;end 结束迭代器</p>
<p>&#x2F;&#x2F;value 查找的元素</p>
</li>
</ul>
<p>示例：</p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><code class="hljs c++"><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;iostream&gt;</span></span><br><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;vector&gt;</span></span><br><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;algorithm&gt;</span></span><br><span class="hljs-keyword">using</span> <span class="hljs-keyword">namespace</span> std;<br><br><br><span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">test01</span><span class="hljs-params">()</span></span>&#123;<br>    vector&lt;<span class="hljs-type">int</span>&gt;v;<br>    <span class="hljs-keyword">for</span>(<span class="hljs-type">int</span> i=<span class="hljs-number">0</span>;i&lt;<span class="hljs-number">10</span>;i++)&#123;<br>        v.<span class="hljs-built_in">push_back</span>(i);<br>    &#125;<br>    <span class="hljs-comment">//注意：容器必须是有序的序列，如果是无序序列结果未知</span><br>    <span class="hljs-type">bool</span> ret=<span class="hljs-built_in">binary_search</span>(v.<span class="hljs-built_in">begin</span>(),v.<span class="hljs-built_in">end</span>(),<span class="hljs-number">9</span>);<br>    <span class="hljs-keyword">if</span>(ret)&#123;<br>        cout&lt;&lt;<span class="hljs-string">&quot;找到了元素&quot;</span>&lt;&lt;endl;<br>    &#125;<span class="hljs-keyword">else</span>&#123;<br>        cout&lt;&lt;<span class="hljs-string">&quot;未找到&quot;</span>&lt;&lt;endl;<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure>

















<h4 id="binary-search-算法"><a href="#binary-search-算法" class="headerlink" title="binary_search 算法"></a>binary_search 算法</h4><p><strong>功能描述</strong>：</p>
<ul>
<li>查找指定元素是否存在</li>
</ul>
<p><strong>函数原型</strong>：</p>
<ul>
<li><p><code>bool binary_search(iterator beg,iterator end,value);</code></p>
<p>&#x2F;&#x2F;查找指定的元素，查到返回true，否则false</p>
<p>&#x2F;&#x2F;<strong>注意</strong>：在<strong>无序序列中不可用</strong></p>
<p>&#x2F;&#x2F;beg  开始迭代器</p>
<p>&#x2F;&#x2F;end  结束迭代器</p>
<p>&#x2F;&#x2F;value  查找的元素</p>
</li>
</ul>
<p>示例：</p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><code class="hljs c++"><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;iostream&gt;</span></span><br><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;vector&gt;</span></span><br><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;algorithm&gt;</span></span><br><span class="hljs-keyword">using</span> <span class="hljs-keyword">namespace</span> std;<br><br><br><span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">test01</span><span class="hljs-params">()</span> </span>&#123;<br>	vector&lt;<span class="hljs-type">int</span>&gt;v;<br>	<span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> i = <span class="hljs-number">0</span>; i &lt; <span class="hljs-number">10</span>; i++) &#123;<br>		v.<span class="hljs-built_in">push_back</span>(i);<br>	&#125;<br>	<span class="hljs-comment">//注意：容器必须是有序的序列，如果是无序序列结果未知</span><br>	<span class="hljs-type">bool</span> ret = <span class="hljs-built_in">binary_search</span>(v.<span class="hljs-built_in">begin</span>(), v.<span class="hljs-built_in">end</span>(), <span class="hljs-number">9</span>);<br>	<span class="hljs-keyword">if</span> (ret) &#123;<br>		cout &lt;&lt; <span class="hljs-string">&quot;找到了元素&quot;</span> &lt;&lt; endl;<br>	&#125; <span class="hljs-keyword">else</span> &#123;<br>		cout &lt;&lt; <span class="hljs-string">&quot;未找到&quot;</span> &lt;&lt; endl;<br>	&#125;<br>&#125;<br></code></pre></td></tr></table></figure>

<blockquote>
<p><strong>总结</strong>：二分查找法查找效率很高，值得注意的是查找的容器中必须是有序序列</p>
</blockquote>
<h4 id="count-算法"><a href="#count-算法" class="headerlink" title="count 算法"></a>count 算法</h4><p><strong>功能描述</strong>：</p>
<ul>
<li>统计元素个数</li>
</ul>
<p><strong>函数原型</strong>：</p>
<ul>
<li><p><code>count(iterator beg,iterator end,value);</code></p>
<p>&#x2F;&#x2F;统计元素出现次数</p>
<p>&#x2F;&#x2F;beg  开始迭代器</p>
<p>&#x2F;&#x2F;end  结束迭代器</p>
<p>&#x2F;&#x2F;value  统计的元素</p>
</li>
</ul>
<p>示例：</p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br></pre></td><td class="code"><pre><code class="hljs c++"><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;iostream&gt;</span></span><br><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;vector&gt;</span></span><br><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;algorithm&gt;</span></span><br><span class="hljs-keyword">using</span> <span class="hljs-keyword">namespace</span> std;<br><br><span class="hljs-comment">//统计内置数据类型</span><br><span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">test01</span><span class="hljs-params">()</span> </span>&#123;<br>	vector&lt;<span class="hljs-type">int</span>&gt;v;<br>	v.<span class="hljs-built_in">push_back</span>(<span class="hljs-number">10</span>);<br>	v.<span class="hljs-built_in">push_back</span>(<span class="hljs-number">40</span>);<br>	v.<span class="hljs-built_in">push_back</span>(<span class="hljs-number">30</span>);<br>	v.<span class="hljs-built_in">push_back</span>(<span class="hljs-number">40</span>);<br>	v.<span class="hljs-built_in">push_back</span>(<span class="hljs-number">40</span>);<br>	<span class="hljs-type">int</span> num = <span class="hljs-built_in">count</span>(v.<span class="hljs-built_in">begin</span>(), v.<span class="hljs-built_in">end</span>(), <span class="hljs-number">40</span>);<br>	cout &lt;&lt; <span class="hljs-string">&quot;40的元素个数为：&quot;</span> &lt;&lt; num &lt;&lt; endl;<br>&#125;<br><br><span class="hljs-comment">//统计自定义数据类型</span><br><span class="hljs-keyword">class</span> <span class="hljs-title class_">Person</span> &#123;<br>	<span class="hljs-keyword">public</span>:<br>		<span class="hljs-built_in">Person</span>(string name, <span class="hljs-type">int</span> age) &#123;<br>			<span class="hljs-keyword">this</span>-&gt;m_name = name;<br>			<span class="hljs-keyword">this</span>-&gt;m_age = age;<br>		&#125;<br>		<span class="hljs-type">bool</span> <span class="hljs-keyword">operator</span>==(<span class="hljs-type">const</span> Person &amp;p) &#123;<br>			<span class="hljs-keyword">if</span> (<span class="hljs-keyword">this</span>-&gt;m_age == p.m_age) &#123;<br>				<span class="hljs-keyword">return</span> <span class="hljs-literal">true</span>;<br>			&#125; <span class="hljs-keyword">else</span> &#123;<br>				<span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>;<br>			&#125;<br>		&#125;<br>		string m_name;<br>		<span class="hljs-type">int</span> m_age;<br>&#125;;<br><br><span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">test02</span><span class="hljs-params">()</span> </span>&#123;<br>	vector&lt;Person&gt;v;<br>	<span class="hljs-function">Person <span class="hljs-title">p1</span><span class="hljs-params">(<span class="hljs-string">&quot;a&quot;</span>, <span class="hljs-number">35</span>)</span></span>;<br>	<span class="hljs-function">Person <span class="hljs-title">p2</span><span class="hljs-params">(<span class="hljs-string">&quot;b&quot;</span>, <span class="hljs-number">35</span>)</span></span>;<br>	<span class="hljs-function">Person <span class="hljs-title">p3</span><span class="hljs-params">(<span class="hljs-string">&quot;c&quot;</span>, <span class="hljs-number">35</span>)</span></span>;<br>	<span class="hljs-function">Person <span class="hljs-title">p4</span><span class="hljs-params">(<span class="hljs-string">&quot;d&quot;</span>, <span class="hljs-number">40</span>)</span></span>;<br>	<span class="hljs-function">Person <span class="hljs-title">p5</span><span class="hljs-params">(<span class="hljs-string">&quot;e&quot;</span>, <span class="hljs-number">40</span>)</span></span>;<br>	<span class="hljs-function">Person <span class="hljs-title">p6</span><span class="hljs-params">(<span class="hljs-string">&quot;f&quot;</span>, <span class="hljs-number">35</span>)</span></span>;<br>	v.<span class="hljs-built_in">push_back</span>(p1);<br>	v.<span class="hljs-built_in">push_back</span>(p2);<br>	v.<span class="hljs-built_in">push_back</span>(p3);<br>	v.<span class="hljs-built_in">push_back</span>(p4);<br>	v.<span class="hljs-built_in">push_back</span>(p5);<br>	<span class="hljs-type">int</span> num = <span class="hljs-built_in">count</span>(v.<span class="hljs-built_in">begin</span>(), v.<span class="hljs-built_in">end</span>(), p6);<br>	cout &lt;&lt; <span class="hljs-string">&quot;与f同岁数的人员个数为：&quot;</span> &lt;&lt; num &lt;&lt; endl;<br>&#125;<br></code></pre></td></tr></table></figure>

<blockquote>
<p><strong>总结</strong>：统计自定义数据类型时候，需要配合重载<code>operator==</code></p>
</blockquote>
<h4 id="count-if-算法"><a href="#count-if-算法" class="headerlink" title="count_if 算法"></a>count_if 算法</h4><p><strong>功能描述</strong>：</p>
<ul>
<li>按条件统计元素个数</li>
</ul>
<p><strong>函数原型</strong>：</p>
<ul>
<li><p><code>count_if(iterator beg,iterator end,_Pred);</code></p>
<p>&#x2F;&#x2F;按条件统计元素出现次数</p>
<p>&#x2F;&#x2F;beg  开始迭代器</p>
<p>&#x2F;&#x2F;end  结束迭代器</p>
<p>&#x2F;&#x2F;_Pred  谓词</p>
</li>
</ul>
<p>示例：</p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br></pre></td><td class="code"><pre><code class="hljs c++"><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;iostream&gt;</span></span><br><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;vector&gt;</span></span><br><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;algorithm&gt;</span></span><br><span class="hljs-keyword">using</span> <span class="hljs-keyword">namespace</span> std;<br><br><span class="hljs-keyword">class</span> <span class="hljs-title class_">greater20</span> &#123;<br>	<span class="hljs-keyword">public</span>:<br>		<span class="hljs-function"><span class="hljs-type">bool</span> <span class="hljs-title">operator</span><span class="hljs-params">()</span><span class="hljs-params">(<span class="hljs-type">int</span> val)</span> </span>&#123;<br>			<span class="hljs-keyword">return</span> val &gt; <span class="hljs-number">20</span>;<br>		&#125;<br>&#125;;<br><br><span class="hljs-comment">//统计内置数据类型</span><br><span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">test01</span><span class="hljs-params">()</span> </span>&#123;<br>	vector&lt;<span class="hljs-type">int</span>&gt;v;<br>	v.<span class="hljs-built_in">push_back</span>(<span class="hljs-number">10</span>);<br>	v.<span class="hljs-built_in">push_back</span>(<span class="hljs-number">40</span>);<br>	v.<span class="hljs-built_in">push_back</span>(<span class="hljs-number">30</span>);<br>	v.<span class="hljs-built_in">push_back</span>(<span class="hljs-number">20</span>);<br>	v.<span class="hljs-built_in">push_back</span>(<span class="hljs-number">40</span>);<br>	<span class="hljs-type">int</span> num = <span class="hljs-built_in">count_if</span>(v.<span class="hljs-built_in">begin</span>(), v.<span class="hljs-built_in">end</span>(), <span class="hljs-built_in">greater20</span>());<br>	cout &lt;&lt; <span class="hljs-string">&quot;大于20的元素个数为：&quot;</span> &lt;&lt; num &lt;&lt; endl;<br>&#125;<br><br><span class="hljs-keyword">class</span> <span class="hljs-title class_">Person</span> &#123;<br>	<span class="hljs-keyword">public</span>:<br>		<span class="hljs-built_in">Person</span>(string name, <span class="hljs-type">int</span> age) &#123;<br>			<span class="hljs-keyword">this</span>-&gt;m_name = name;<br>			<span class="hljs-keyword">this</span>-&gt;m_age = age;<br>		&#125;<br>		string m_name;<br>		<span class="hljs-type">int</span> m_age;<br>&#125;;<br><br><span class="hljs-keyword">class</span> <span class="hljs-title class_">agegreater</span> &#123;<br>	<span class="hljs-keyword">public</span>:<br>		<span class="hljs-function"><span class="hljs-type">bool</span> <span class="hljs-title">operator</span><span class="hljs-params">()</span><span class="hljs-params">(<span class="hljs-type">const</span> Person &amp;p)</span> </span>&#123;<br>			<span class="hljs-keyword">return</span> p.m_age &gt; <span class="hljs-number">20</span>;<br>		&#125;<br>&#125;;<br><br><span class="hljs-comment">//统计自定义数据类型</span><br><span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">test02</span><span class="hljs-params">()</span> </span>&#123;<br>	vector&lt;Person&gt;v;<br>	<span class="hljs-function">Person <span class="hljs-title">p1</span><span class="hljs-params">(<span class="hljs-string">&quot;a&quot;</span>, <span class="hljs-number">35</span>)</span></span>;<br>	<span class="hljs-function">Person <span class="hljs-title">p2</span><span class="hljs-params">(<span class="hljs-string">&quot;b&quot;</span>, <span class="hljs-number">35</span>)</span></span>;<br>	<span class="hljs-function">Person <span class="hljs-title">p3</span><span class="hljs-params">(<span class="hljs-string">&quot;c&quot;</span>, <span class="hljs-number">35</span>)</span></span>;<br>	<span class="hljs-function">Person <span class="hljs-title">p4</span><span class="hljs-params">(<span class="hljs-string">&quot;d&quot;</span>, <span class="hljs-number">40</span>)</span></span>;<br>	<span class="hljs-function">Person <span class="hljs-title">p5</span><span class="hljs-params">(<span class="hljs-string">&quot;e&quot;</span>, <span class="hljs-number">20</span>)</span></span>;<br>	v.<span class="hljs-built_in">push_back</span>(p1);<br>	v.<span class="hljs-built_in">push_back</span>(p2);<br>	v.<span class="hljs-built_in">push_back</span>(p3);<br>	v.<span class="hljs-built_in">push_back</span>(p4);<br>	v.<span class="hljs-built_in">push_back</span>(p5);<br>	<span class="hljs-type">int</span> num = <span class="hljs-built_in">count_if</span>(v.<span class="hljs-built_in">begin</span>(), v.<span class="hljs-built_in">end</span>(), <span class="hljs-built_in">agegreater</span>());<br>	cout &lt;&lt; <span class="hljs-string">&quot;大于20岁的人员个数：&quot;</span> &lt;&lt; num &lt;&lt; endl;<br>&#125;<br></code></pre></td></tr></table></figure>

















<h3 id="常用排序算法"><a href="#常用排序算法" class="headerlink" title="常用排序算法"></a>常用排序算法</h3><p><strong>算法简介</strong>：</p>
<ul>
<li><code>sort</code>    &#x2F;&#x2F;对容器内元素进行排序</li>
<li><code>random_shuffle</code>   &#x2F;&#x2F;洗牌  指定范围内的元素随机调整次序</li>
<li><code>merge</code>    &#x2F;&#x2F;容器元素合并，并存储到另一个容器</li>
<li><code>reverse</code>    &#x2F;&#x2F;反转指定范围的元素</li>
</ul>
<h4 id="sort-算法"><a href="#sort-算法" class="headerlink" title="sort  算法"></a>sort  算法</h4><p><strong>功能描述</strong>：</p>
<ul>
<li>对容器内元素进行排序</li>
</ul>
<p><strong>函数原型</strong>：</p>
<ul>
<li><p><code>sort(iterator beg,iterator end,_Pred);</code></p>
<p>&#x2F;&#x2F;按值查找元素，找到返回指定值位置迭代器，找不到返回结束迭代器位置</p>
<p>&#x2F;&#x2F;beg  开始迭代器</p>
<p>&#x2F;&#x2F;end  结束迭代器</p>
<p>&#x2F;&#x2F;_Pred  谓词</p>
</li>
</ul>
<p>示例：</p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><code class="hljs c++"><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;iostream&gt;</span></span><br><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;algorithm&gt;</span></span><br><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;vector&gt;</span></span><br><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;functional&gt;</span></span><br><span class="hljs-keyword">using</span> <span class="hljs-keyword">namespace</span> std;<br><br><span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">myprint</span><span class="hljs-params">(<span class="hljs-type">int</span> val)</span> </span>&#123;<br>	cout &lt;&lt; val &lt;&lt; <span class="hljs-string">&quot; &quot;</span>;<br>&#125;<br><br><span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">test01</span><span class="hljs-params">()</span> </span>&#123;<br>	vector&lt;<span class="hljs-type">int</span>&gt;v;<br>	v.<span class="hljs-built_in">push_back</span>(<span class="hljs-number">10</span>);<br>	v.<span class="hljs-built_in">push_back</span>(<span class="hljs-number">30</span>);<br>	v.<span class="hljs-built_in">push_back</span>(<span class="hljs-number">50</span>);<br>	v.<span class="hljs-built_in">push_back</span>(<span class="hljs-number">20</span>);<br>	v.<span class="hljs-built_in">push_back</span>(<span class="hljs-number">40</span>);<br>	<span class="hljs-built_in">sort</span>(v.<span class="hljs-built_in">begin</span>(), v.<span class="hljs-built_in">end</span>());<br>	for_each(v.<span class="hljs-built_in">begin</span>(), v.<span class="hljs-built_in">end</span>(), myprint);<br>	cout &lt;&lt; endl;<br>	<span class="hljs-built_in">sort</span>(v.<span class="hljs-built_in">begin</span>(), v.<span class="hljs-built_in">end</span>(), <span class="hljs-built_in">greater</span>&lt;<span class="hljs-type">int</span>&gt;());<br>	for_each(v.<span class="hljs-built_in">begin</span>(), v.<span class="hljs-built_in">end</span>(), myprint);<br>&#125;<br></code></pre></td></tr></table></figure>















<h4 id="random-shuffle-算法"><a href="#random-shuffle-算法" class="headerlink" title="random_shuffle 算法"></a>random_shuffle 算法</h4><p><strong>功能描述</strong>：</p>
<ul>
<li>洗牌  指定范围内的元素随机调整次序</li>
</ul>
<p><strong>函数原型</strong>：</p>
<ul>
<li><p><code>random_shuffle(iterator beg,iterator end);</code></p>
<p>&#x2F;&#x2F;指定范围内的元素随机调整次序</p>
<p>&#x2F;&#x2F;beg  开始迭代器</p>
<p>&#x2F;&#x2F;end  结束迭代器</p>
</li>
</ul>
<p>示例：</p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><code class="hljs c++"><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;iostream&gt;</span></span><br><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;vector&gt;</span></span><br><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;algorithm&gt;</span></span><br><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;ctime&gt;</span></span><br><span class="hljs-keyword">using</span> <span class="hljs-keyword">namespace</span> std;<br><br><span class="hljs-keyword">class</span> <span class="hljs-title class_">print</span> &#123;<br>	<span class="hljs-keyword">public</span>:<br>		<span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">operator</span><span class="hljs-params">()</span><span class="hljs-params">(<span class="hljs-type">int</span> val)</span> </span>&#123;<br>			cout &lt;&lt; val &lt;&lt; <span class="hljs-string">&quot; &quot;</span>;<br>		&#125;<br>&#125;;<br><br><span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">test01</span><span class="hljs-params">()</span> </span>&#123;<br>	<span class="hljs-built_in">srand</span>((<span class="hljs-type">unsigned</span> <span class="hljs-type">int</span>)<span class="hljs-built_in">time</span>(<span class="hljs-literal">NULL</span>));<br>	vector&lt;<span class="hljs-type">int</span>&gt;v;<br>	<span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> i = <span class="hljs-number">0</span>; i &lt; <span class="hljs-number">10</span>; i++) &#123;<br>		v.<span class="hljs-built_in">push_back</span>(i);<br>	&#125;<br>	<span class="hljs-built_in">random_shuffle</span>(v.<span class="hljs-built_in">begin</span>(), v.<span class="hljs-built_in">end</span>());<br>	for_each(v.<span class="hljs-built_in">begin</span>(), v.<span class="hljs-built_in">end</span>(), <span class="hljs-built_in">print</span>());<br>	cout &lt;&lt; endl;<br>&#125;<br></code></pre></td></tr></table></figure>

<blockquote>
<p><strong>总结</strong>：random_shuffle算法使用时记得加随机数种子</p>
</blockquote>
<h4 id="merge-算法"><a href="#merge-算法" class="headerlink" title="merge 算法"></a>merge 算法</h4><p><strong>功能描述</strong>：</p>
<ul>
<li>两个容器元素合并，并存储到另一个容器中</li>
</ul>
<p><strong>函数原型</strong>：</p>
<ul>
<li><p><code>merge(iterator beg1,iterator end1,iterator beg2,iterator end2,iterator dest);</code></p>
<p>&#x2F;&#x2F;容器元素合并，并存储到另一容器中</p>
<p>&#x2F;&#x2F;<strong>注意</strong>：两个容器必须是<strong>有序的</strong></p>
<p>&#x2F;&#x2F;beg1  容器1开始迭代器</p>
<p>&#x2F;&#x2F;end1  容器1结束迭代器</p>
<p>&#x2F;&#x2F;beg2  容器2开始迭代器</p>
<p>&#x2F;&#x2F;end2  容器2结束迭代器</p>
<p>&#x2F;&#x2F;dest  目标容器开始迭代器</p>
</li>
</ul>
<p>示例：</p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><code class="hljs c++"><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;iostream&gt;</span></span><br><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;vector&gt;</span></span><br><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;algorithm&gt;</span></span><br><span class="hljs-keyword">using</span> <span class="hljs-keyword">namespace</span> std;<br><br><span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">print</span><span class="hljs-params">(<span class="hljs-type">int</span> val)</span></span>&#123;<br>    cout&lt;&lt;val&lt;&lt;<span class="hljs-string">&quot; &quot;</span>;<br>&#125;<br><br><br><span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">test01</span><span class="hljs-params">()</span></span>&#123;<br>    vector&lt;<span class="hljs-type">int</span>&gt;v1;<br>    vector&lt;<span class="hljs-type">int</span>&gt;v2;<br>    <span class="hljs-keyword">for</span>(<span class="hljs-type">int</span> i=<span class="hljs-number">0</span>;i&lt;<span class="hljs-number">10</span>;i++)&#123;<br>        v1.<span class="hljs-built_in">push_back</span>(i);<br>        v2.<span class="hljs-built_in">push_back</span>(i+<span class="hljs-number">1</span>);<br>    &#125;<br>    <span class="hljs-comment">//目标容器</span><br>    vector&lt;<span class="hljs-type">int</span>&gt;v;<br>    <span class="hljs-comment">//提前给目标容器分配空间</span><br>    v.<span class="hljs-built_in">resize</span>(v1.<span class="hljs-built_in">size</span>()+v2.<span class="hljs-built_in">size</span>());<br>    <span class="hljs-built_in">merge</span>(v1.<span class="hljs-built_in">begin</span>(),v1.<span class="hljs-built_in">end</span>(),v2.<span class="hljs-built_in">begin</span>(),v2.<span class="hljs-built_in">end</span>(),v.<span class="hljs-built_in">begin</span>());<br>    for_each(v.<span class="hljs-built_in">begin</span>(),v.<span class="hljs-built_in">end</span>(),print);<br>    cout&lt;&lt;endl;<br>&#125;<br></code></pre></td></tr></table></figure>

<blockquote>
<p><strong>总结</strong>：merge合并的两个容器必须的有序序列</p>
</blockquote>
<h4 id="reverse-算法"><a href="#reverse-算法" class="headerlink" title="reverse 算法"></a>reverse 算法</h4><p><strong>功能描述</strong>：</p>
<ul>
<li>将容器内元素进行反转</li>
</ul>
<p><strong>函数原型</strong>：</p>
<ul>
<li><p><code>reverse(iterator beg,iterator end);</code></p>
<p>&#x2F;&#x2F;反转指定范围的元素</p>
<p>&#x2F;&#x2F;beg  开始迭代器</p>
<p>&#x2F;&#x2F;end  结束迭代器</p>
</li>
</ul>
<p>示例：</p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><code class="hljs c++"><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;iostream&gt;</span></span><br><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;vector&gt;</span></span><br><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;algorithm&gt;</span></span><br><span class="hljs-keyword">using</span> <span class="hljs-keyword">namespace</span> std;<br><br><span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">print</span><span class="hljs-params">(<span class="hljs-type">int</span> val)</span></span>&#123;<br>    cout&lt;&lt;val&lt;&lt;<span class="hljs-string">&quot; &quot;</span>;<br>&#125;<br><br><span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">test01</span><span class="hljs-params">()</span></span>&#123;<br>    vector&lt;<span class="hljs-type">int</span>&gt;v;<br>    v.<span class="hljs-built_in">push_back</span>(<span class="hljs-number">10</span>);<br>    v.<span class="hljs-built_in">push_back</span>(<span class="hljs-number">30</span>);<br>    v.<span class="hljs-built_in">push_back</span>(<span class="hljs-number">50</span>);<br>    v.<span class="hljs-built_in">push_back</span>(<span class="hljs-number">20</span>);<br>    v.<span class="hljs-built_in">push_back</span>(<span class="hljs-number">40</span>);<br>    cout&lt;&lt;<span class="hljs-string">&quot;反转前：&quot;</span>&lt;&lt;endl;<br>    for_each(v.<span class="hljs-built_in">begin</span>(),v.<span class="hljs-built_in">end</span>(),print);<br>    cout&lt;&lt;endl;<br>    cout&lt;&lt;<span class="hljs-string">&quot;反转后：&quot;</span>&lt;&lt;endl;<br>    <span class="hljs-built_in">reverse</span>(v.<span class="hljs-built_in">begin</span>(),v.<span class="hljs-built_in">end</span>());<br>    for_each(v.<span class="hljs-built_in">begin</span>(),v.<span class="hljs-built_in">end</span>(),print);<br>&#125;<br></code></pre></td></tr></table></figure>

















<h3 id="常用拷贝和替换算法"><a href="#常用拷贝和替换算法" class="headerlink" title="常用拷贝和替换算法"></a>常用拷贝和替换算法</h3><p><strong>算法简介</strong>：</p>
<ul>
<li><code>copy</code>       &#x2F;&#x2F;容器内指定范围的元素拷贝到另一容器中</li>
<li><code>replace</code>     &#x2F;&#x2F;将容器内指定范围的旧元素修改为新元素</li>
<li><code>replace_if</code>   &#x2F;&#x2F;容器内指定范围满足条件的元素替换为新元素</li>
<li><code>swap</code>     &#x2F;&#x2F;互换两个容器的元素</li>
</ul>
<h4 id="copy-算法"><a href="#copy-算法" class="headerlink" title="copy 算法"></a>copy 算法</h4><p><strong>功能描述</strong>：</p>
<ul>
<li>容器内指定范围的元素拷贝到另一个容器中</li>
</ul>
<p><strong>函数原型</strong>：</p>
<ul>
<li><p><code>copy(iterator beg,iterator end,iterator dest);</code></p>
<p>&#x2F;&#x2F;按值查找元素，找到返回指定位置迭代器，找不到返回结束迭代器位置</p>
<p>&#x2F;&#x2F;beg  开始迭代器</p>
<p>&#x2F;&#x2F;end  结束迭代器</p>
<p>&#x2F;&#x2F;dest  目标容器开始迭代器</p>
</li>
</ul>
<p>示例：</p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><code class="hljs c++"><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;iostream&gt;</span></span><br><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;vector&gt;</span></span><br><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;algorithm&gt;</span></span><br><span class="hljs-keyword">using</span> <span class="hljs-keyword">namespace</span> std;<br><br><span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">print</span><span class="hljs-params">(<span class="hljs-type">int</span> val)</span></span>&#123;<br>    cout&lt;&lt;val&lt;&lt;<span class="hljs-string">&quot; &quot;</span>;<br>&#125;<br><br><span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">test01</span><span class="hljs-params">()</span></span>&#123;<br>    vector&lt;<span class="hljs-type">int</span>&gt;v1;<br>    <span class="hljs-keyword">for</span>(<span class="hljs-type">int</span> i=<span class="hljs-number">0</span>;i&lt;<span class="hljs-number">10</span>;i++)&#123;<br>        v1.<span class="hljs-built_in">push_back</span>(i);<br>    &#125;<br>    vector&lt;<span class="hljs-type">int</span>&gt;v2;<br>    v2.<span class="hljs-built_in">resize</span>(v1.<span class="hljs-built_in">size</span>());<br>    <span class="hljs-built_in">copy</span>(v1.<span class="hljs-built_in">begin</span>(),v1.<span class="hljs-built_in">end</span>(),v2.<span class="hljs-built_in">begin</span>());<br>    for_each(v2.<span class="hljs-built_in">begin</span>(),v2.<span class="hljs-built_in">end</span>(),print);<br>    cout&lt;&lt;endl;<br>&#125;<br></code></pre></td></tr></table></figure>













<h4 id="replace-算法"><a href="#replace-算法" class="headerlink" title="replace 算法"></a>replace 算法</h4><p><strong>功能描述</strong>：</p>
<ul>
<li>将容器内指定范围的旧元素修改为新元素</li>
</ul>
<p><strong>函数原型</strong>：</p>
<ul>
<li><p><code>replace(iterator beg,iterator end,oldvalue,newvalue);</code></p>
<p>&#x2F;&#x2F;将区间内旧元素替换成新元素</p>
<p>&#x2F;&#x2F;beg  开始迭代器</p>
<p>&#x2F;&#x2F;end  结束迭代器</p>
<p>&#x2F;&#x2F;oldvalue  旧元素</p>
<p>&#x2F;&#x2F;newvalue  新元素</p>
</li>
</ul>
<p>示例：</p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><code class="hljs c++"><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;iostream&gt;</span></span><br><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;vector&gt;</span></span><br><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;algorithm&gt;</span></span><br><span class="hljs-keyword">using</span> <span class="hljs-keyword">namespace</span> std;<br><br><span class="hljs-keyword">class</span> <span class="hljs-title class_">print</span>&#123;<br><span class="hljs-keyword">public</span>:<br>    <span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">operator</span><span class="hljs-params">()</span><span class="hljs-params">(<span class="hljs-type">int</span> val)</span></span>&#123;<br>        cout&lt;&lt;val&lt;&lt;<span class="hljs-string">&quot; &quot;</span>;<br>    &#125;<br>&#125;;<br><br><span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">test01</span><span class="hljs-params">()</span></span>&#123;<br>    vector&lt;<span class="hljs-type">int</span>&gt;v;<br>    v.<span class="hljs-built_in">push_back</span>(<span class="hljs-number">20</span>);<br>    v.<span class="hljs-built_in">push_back</span>(<span class="hljs-number">30</span>);<br>    v.<span class="hljs-built_in">push_back</span>(<span class="hljs-number">50</span>);<br>    v.<span class="hljs-built_in">push_back</span>(<span class="hljs-number">20</span>);<br>    v.<span class="hljs-built_in">push_back</span>(<span class="hljs-number">10</span>);<br>    v.<span class="hljs-built_in">push_back</span>(<span class="hljs-number">20</span>);<br>    cout&lt;&lt;<span class="hljs-string">&quot;替换前：&quot;</span>&lt;&lt;endl;<br>    for_each(v.<span class="hljs-built_in">begin</span>(),v.<span class="hljs-built_in">end</span>(),<span class="hljs-built_in">print</span>());<br>    cout&lt;&lt;endl;<br>    <span class="hljs-built_in">replace</span>(v.<span class="hljs-built_in">begin</span>(),v.<span class="hljs-built_in">end</span>(),<span class="hljs-number">20</span>,<span class="hljs-number">2000</span>);<br>    cout&lt;&lt;<span class="hljs-string">&quot;替换后：&quot;</span>&lt;&lt;endl;<br>    for_each(v.<span class="hljs-built_in">begin</span>(),v.<span class="hljs-built_in">end</span>(),<span class="hljs-built_in">print</span>());<br>    cout&lt;&lt;endl;<br>&#125;<br></code></pre></td></tr></table></figure>















<h4 id="replace-if-算法"><a href="#replace-if-算法" class="headerlink" title="replace_if 算法"></a>replace_if 算法</h4><p><strong>功能描述</strong>：</p>
<ul>
<li>将区间内满足条件的元素，替换成指定元素</li>
</ul>
<p><strong>函数原型</strong>：</p>
<ul>
<li><p><code>replace_if(iterator beg,iterator end,_pred,newvalue);</code></p>
<p>&#x2F;&#x2F;按条件替换元素，满足条件的替换成指定元素</p>
<p>&#x2F;&#x2F;beg  开始迭代器</p>
<p>&#x2F;&#x2F;end  结束迭代器</p>
<p>&#x2F;&#x2F;_pred  谓词</p>
<p>&#x2F;&#x2F;newvalue  替换的新元素</p>
</li>
</ul>
<p>示例：</p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><code class="hljs c++"><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;iostream&gt;</span></span><br><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;vector&gt;</span></span><br><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;algorithm&gt;</span></span><br><span class="hljs-keyword">using</span> <span class="hljs-keyword">namespace</span> std;<br><br><span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">print</span><span class="hljs-params">(<span class="hljs-type">int</span> val)</span></span>&#123;<br>    cout&lt;&lt;val&lt;&lt;<span class="hljs-string">&quot; &quot;</span>;<br>&#125;<br><br><span class="hljs-keyword">class</span> <span class="hljs-title class_">greater30</span>&#123;<br><span class="hljs-keyword">public</span>:<br>    <span class="hljs-function"><span class="hljs-type">bool</span> <span class="hljs-title">operator</span><span class="hljs-params">()</span><span class="hljs-params">(<span class="hljs-type">int</span> val)</span></span>&#123;<br>        <span class="hljs-keyword">return</span> val&gt;=<span class="hljs-number">30</span>;<br>    &#125;<br>&#125;;<br><br><span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">test01</span><span class="hljs-params">()</span></span>&#123;<br>    vector&lt;<span class="hljs-type">int</span>&gt;v;<br>    v.<span class="hljs-built_in">push_back</span>(<span class="hljs-number">10</span>);<br>    v.<span class="hljs-built_in">push_back</span>(<span class="hljs-number">40</span>);<br>    v.<span class="hljs-built_in">push_back</span>(<span class="hljs-number">20</span>);<br>    v.<span class="hljs-built_in">push_back</span>(<span class="hljs-number">30</span>);<br>    v.<span class="hljs-built_in">push_back</span>(<span class="hljs-number">40</span>);<br>    v.<span class="hljs-built_in">push_back</span>(<span class="hljs-number">50</span>);<br>    cout&lt;&lt;<span class="hljs-string">&quot;替换前：&quot;</span>&lt;&lt;endl;<br>    for_each(v.<span class="hljs-built_in">begin</span>(),v.<span class="hljs-built_in">end</span>(),print);<br>    cout&lt;&lt;endl;<br>    <span class="hljs-built_in">replace_if</span>(v.<span class="hljs-built_in">begin</span>(),v.<span class="hljs-built_in">end</span>(),<span class="hljs-built_in">greater30</span>(),<span class="hljs-number">3000</span>);<br>    cout&lt;&lt;<span class="hljs-string">&quot;替换后：&quot;</span>&lt;&lt;endl;<br>    for_each(v.<span class="hljs-built_in">begin</span>(),v.<span class="hljs-built_in">end</span>(),print);<br>    cout&lt;&lt;endl;<br>&#125;<br></code></pre></td></tr></table></figure>















<h4 id="swap-算法"><a href="#swap-算法" class="headerlink" title="swap 算法"></a>swap 算法</h4><p><strong>功能描述</strong>：</p>
<ul>
<li>互换两个容器的元素</li>
</ul>
<p><strong>函数原型</strong>：</p>
<ul>
<li><p><code>swap(container c1,container c2);</code></p>
<p>&#x2F;&#x2F;互换两个容器的元素</p>
<p>&#x2F;&#x2F;c1容器1</p>
<p>&#x2F;&#x2F;c2容器2</p>
</li>
</ul>
<p><strong>注意</strong>：</p>
<ul>
<li>必须是同种容器才能交换</li>
</ul>
<p>示例：</p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><code class="hljs c++"><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;iostream&gt;</span></span><br><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;vector&gt;</span></span><br><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;algorithm&gt;</span></span><br><span class="hljs-keyword">using</span> <span class="hljs-keyword">namespace</span> std;<br><br><span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">print</span><span class="hljs-params">(<span class="hljs-type">int</span> val)</span></span>&#123;<br>    cout&lt;&lt;val&lt;&lt;<span class="hljs-string">&quot; &quot;</span>;<br>&#125;<br><br><span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">test01</span><span class="hljs-params">()</span></span>&#123;<br>    vector&lt;<span class="hljs-type">int</span>&gt;v1;<br>    vector&lt;<span class="hljs-type">int</span>&gt;v2;<br>    <span class="hljs-keyword">for</span>(<span class="hljs-type">int</span> i=<span class="hljs-number">0</span>;i&lt;<span class="hljs-number">10</span>;i++)&#123;<br>        v1.<span class="hljs-built_in">push_back</span>(i);<br>        v2.<span class="hljs-built_in">push_back</span>(i+<span class="hljs-number">100</span>);<br>    &#125;<br>    cout&lt;&lt;<span class="hljs-string">&quot;交换前：&quot;</span>&lt;&lt;endl;<br>    for_each(v1.<span class="hljs-built_in">begin</span>(),v1.<span class="hljs-built_in">end</span>(),print);<br>    cout&lt;&lt;endl;<br>    for_each(v2.<span class="hljs-built_in">begin</span>(),v2.<span class="hljs-built_in">end</span>(),print);<br>    cout&lt;&lt;endl;<br>    cout&lt;&lt;endl;<br>    cout&lt;&lt;<span class="hljs-string">&quot;交换后：&quot;</span>&lt;&lt;endl;<br>    <span class="hljs-built_in">swap</span>(v1,v2);<br>    for_each(v1.<span class="hljs-built_in">begin</span>(),v1.<span class="hljs-built_in">end</span>(),print);<br>    cout&lt;&lt;endl;<br>    for_each(v2.<span class="hljs-built_in">begin</span>(),v2.<span class="hljs-built_in">end</span>(),print);<br>    cout&lt;&lt;endl;<br>&#125;<br></code></pre></td></tr></table></figure>

















<h3 id="常用算术生成算法"><a href="#常用算术生成算法" class="headerlink" title="常用算术生成算法"></a>常用算术生成算法</h3><p><strong>注意</strong>：</p>
<ul>
<li>算术生成算法属于小型算法，使用时包含头文件为<code>#include &lt;numeric&gt;</code></li>
</ul>
<p><strong>算法简介</strong>：</p>
<ul>
<li><code>accumulate</code>    &#x2F;&#x2F;计算容器元素累计总和</li>
<li><code>fill</code>     &#x2F;&#x2F;向容器种添加元素</li>
</ul>
<h4 id="accumulate-算法"><a href="#accumulate-算法" class="headerlink" title="accumulate 算法"></a>accumulate 算法</h4><p><strong>功能描述</strong>：</p>
<ul>
<li>计算区间内容器元素累计总和</li>
</ul>
<p><strong>函数原型</strong>：</p>
<ul>
<li><p><code>accumulate(iterator beg,iterator end,value);</code></p>
<p>&#x2F;&#x2F;计算容器元素累计总和</p>
<p>&#x2F;&#x2F;beg  开始迭代器</p>
<p>&#x2F;&#x2F;end  结束迭代器</p>
<p>&#x2F;&#x2F;value  起始值</p>
</li>
</ul>
<p>示例：</p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><code class="hljs c++"><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;iostream&gt;</span></span><br><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;numeric&gt;</span></span><br><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;vector&gt;</span></span><br><span class="hljs-keyword">using</span> <span class="hljs-keyword">namespace</span> std;<br><br><br><span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">test01</span><span class="hljs-params">()</span></span>&#123;<br>    vector&lt;<span class="hljs-type">int</span>&gt;v;<br>    <span class="hljs-keyword">for</span>(<span class="hljs-type">int</span> i=<span class="hljs-number">0</span>;i&lt;<span class="hljs-number">100</span>;i++)&#123;<br>        v.<span class="hljs-built_in">push_back</span>(i);<br>    &#125;<br>    <span class="hljs-comment">//value 是起始的累加值</span><br>    <span class="hljs-type">int</span> total=<span class="hljs-built_in">accumulate</span>(v.<span class="hljs-built_in">begin</span>(),v.<span class="hljs-built_in">end</span>(),<span class="hljs-number">0</span>);<br>    cout&lt;&lt;<span class="hljs-string">&quot;total = &quot;</span>&lt;&lt;total&lt;&lt;endl;<br>&#125;<br></code></pre></td></tr></table></figure>













<h4 id="fill-算法"><a href="#fill-算法" class="headerlink" title="fill 算法"></a>fill 算法</h4><p><strong>功能描述</strong>：</p>
<ul>
<li>向容器中填充指定的元素</li>
</ul>
<p><strong>函数原型</strong>：</p>
<ul>
<li><p><code>fill(iterator beg,iterator end,value);</code></p>
<p>&#x2F;&#x2F;向容器中填充元素</p>
<p>&#x2F;&#x2F;beg  开始迭代器</p>
<p>&#x2F;&#x2F;end  结束迭代器</p>
<p>&#x2F;&#x2F;value  填充的值</p>
</li>
</ul>
<p>示例：</p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><code class="hljs c++"><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;iostream&gt;</span></span><br><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;vector&gt;</span></span><br><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;numeric&gt;</span></span><br><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;algorithm&gt;</span></span><br><span class="hljs-keyword">using</span> <span class="hljs-keyword">namespace</span> std;<br><br><span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">print</span><span class="hljs-params">(<span class="hljs-type">int</span> val)</span></span>&#123;<br>    cout&lt;&lt;val&lt;&lt;<span class="hljs-string">&quot; &quot;</span>;<br>&#125;<br><br><span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">test01</span><span class="hljs-params">()</span></span>&#123;<br>    vector&lt;<span class="hljs-type">int</span>&gt;v;<br>    v.<span class="hljs-built_in">resize</span>(<span class="hljs-number">10</span>);<br>    <span class="hljs-comment">//后期重新填充</span><br>    <span class="hljs-built_in">fill</span>(v.<span class="hljs-built_in">begin</span>(),v.<span class="hljs-built_in">end</span>(),<span class="hljs-number">100</span>);<br>    for_each(v.<span class="hljs-built_in">begin</span>(),v.<span class="hljs-built_in">end</span>(),print);<br>    cout&lt;&lt;endl;<br>&#125;<br></code></pre></td></tr></table></figure>

















<h3 id="常用集合算法"><a href="#常用集合算法" class="headerlink" title="常用集合算法"></a>常用集合算法</h3><p><strong>算法简介</strong>：</p>
<ul>
<li><code>set_intersection</code>      &#x2F;&#x2F;求两个容器的并集</li>
<li><code>set_union</code>       &#x2F;&#x2F;求两个容器的并集</li>
<li><code>set_difference</code>       &#x2F;&#x2F;求两个容器的差集</li>
</ul>
<h4 id="set-intersection-算法"><a href="#set-intersection-算法" class="headerlink" title="set_intersection 算法"></a>set_intersection 算法</h4><p><strong>功能描述</strong>：</p>
<ul>
<li>求两个容器的交集</li>
</ul>
<p><strong>函数原型</strong>：</p>
<ul>
<li><p><code>set_intersection(iterator beg1,iterator end1,iterator beg2,iterator end2,iterator dest);</code></p>
<p>&#x2F;&#x2F;求两个集合的交集</p>
<p>&#x2F;&#x2F;beg1  容器1开始迭代器</p>
<p>&#x2F;&#x2F;end1  容器1结束迭代器</p>
<p>&#x2F;&#x2F;beg2  容器2开始迭代器</p>
<p>&#x2F;&#x2F;end2  容器2结束迭代器</p>
<p>&#x2F;&#x2F;dest  目标容器开始迭代器</p>
</li>
</ul>
<p><strong>注意事项</strong>：</p>
<ul>
<li><em>两个集合必须是有序序列</em></li>
</ul>
<p>示例：</p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><code class="hljs c++"><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;iostream&gt;</span></span><br><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;algorithm&gt;</span></span><br><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;vector&gt;</span></span><br><span class="hljs-keyword">using</span> <span class="hljs-keyword">namespace</span> std;<br><br><span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">print</span><span class="hljs-params">(<span class="hljs-type">int</span> val)</span></span>&#123;<br>    cout&lt;&lt;val&lt;&lt;<span class="hljs-string">&quot; &quot;</span>;<br>&#125;<br><br><span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">test01</span><span class="hljs-params">()</span></span>&#123;<br>    vector&lt;<span class="hljs-type">int</span>&gt;v1;<br>    vector&lt;<span class="hljs-type">int</span>&gt;v2;<br>    <span class="hljs-keyword">for</span>(<span class="hljs-type">int</span> i=<span class="hljs-number">0</span>;i&lt;<span class="hljs-number">10</span>;i++)&#123;<br>        v1.<span class="hljs-built_in">push_back</span>(i);<br>        v2.<span class="hljs-built_in">push_back</span>(i+<span class="hljs-number">5</span>);<br>    &#125;<br>    vector&lt;<span class="hljs-type">int</span>&gt;v;<br>    v.<span class="hljs-built_in">resize</span>(<span class="hljs-built_in">min</span>(v1.<span class="hljs-built_in">size</span>(),v2.<span class="hljs-built_in">size</span>()));<br>    vector&lt;<span class="hljs-type">int</span>&gt;::iterator it=<span class="hljs-built_in">set_intersection</span>(v1.<span class="hljs-built_in">begin</span>(),v1.<span class="hljs-built_in">end</span>(),v2.<span class="hljs-built_in">begin</span>(),v2.<span class="hljs-built_in">end</span>(),v.<span class="hljs-built_in">begin</span>());<br>    for_each(v.<span class="hljs-built_in">begin</span>(),it,print);<br>    cout&lt;&lt;endl;<br>&#125;<br></code></pre></td></tr></table></figure>

<blockquote>
<p><strong>总结</strong>：</p>
<ul>
<li>求交集的两个集合必须是有序序列</li>
<li>目标容器开辟空间需要从<strong>两个容器中取小值</strong></li>
<li>set_intersection返回值即是交集中最后一个元素的位置</li>
</ul>
</blockquote>
<h4 id="set-union-算法"><a href="#set-union-算法" class="headerlink" title="set_union 算法"></a>set_union 算法</h4><p><strong>功能描述</strong>：</p>
<ul>
<li>求两个集合的并集</li>
</ul>
<p><strong>函数原型</strong>：</p>
<ul>
<li><p><code>set_union(iterator beg1,itertaor end1,iterator beg2,iterator end2,iterator dest);</code></p>
<p>&#x2F;&#x2F;求两个集合的并集</p>
<p>&#x2F;&#x2F;beg1  容器1开始迭代器</p>
<p>&#x2F;&#x2F;end1  容器1结束迭代器</p>
<p>&#x2F;&#x2F;beg2  容器2开始迭代器</p>
<p>&#x2F;&#x2F;end2  容器2结束迭代器</p>
<p>&#x2F;&#x2F;dest  目标容器开始迭代</p>
</li>
</ul>
<p><strong>注意事项</strong>：</p>
<ul>
<li><em>两个集合必须是有序序列</em></li>
</ul>
<p>示例：</p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><code class="hljs c++"><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;iostream&gt;</span></span><br><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;vector&gt;</span></span><br><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;algorithm&gt;</span></span><br><span class="hljs-keyword">using</span> <span class="hljs-keyword">namespace</span> std;<br><br><span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">print</span><span class="hljs-params">(<span class="hljs-type">int</span> val)</span></span>&#123;<br>    cout&lt;&lt;val&lt;&lt;<span class="hljs-string">&quot; &quot;</span>;<br>&#125;<br><br><span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">test01</span><span class="hljs-params">()</span></span>&#123;<br>    vector&lt;<span class="hljs-type">int</span>&gt;v1;<br>    vector&lt;<span class="hljs-type">int</span>&gt;v2;<br>    vector&lt;<span class="hljs-type">int</span>&gt;v;<br>    <span class="hljs-keyword">for</span>(<span class="hljs-type">int</span> i=<span class="hljs-number">0</span>;i&lt;<span class="hljs-number">10</span>;i++)&#123;<br>        v1.<span class="hljs-built_in">push_back</span>(i);<br>        v2.<span class="hljs-built_in">push_back</span>(i+<span class="hljs-number">5</span>);<br>    &#125;<br>    v.<span class="hljs-built_in">resize</span>(v1.<span class="hljs-built_in">size</span>()+v2.<span class="hljs-built_in">size</span>());<br>    vector&lt;<span class="hljs-type">int</span>&gt;::iterator it=<span class="hljs-built_in">set_union</span>(v1.<span class="hljs-built_in">begin</span>(),v1.<span class="hljs-built_in">end</span>(),v2.<span class="hljs-built_in">begin</span>(),v2.<span class="hljs-built_in">end</span>(),v.<span class="hljs-built_in">begin</span>());<br>    for_each(v.<span class="hljs-built_in">begin</span>(),it,print);<br>    cout&lt;&lt;endl;<br>&#125;<br></code></pre></td></tr></table></figure>

<blockquote>
<p><strong>总结</strong>：</p>
<ul>
<li>求并集的两个集合必须是有序序列</li>
<li>目标容器开辟空间需要从<strong>两个容器大小相加</strong></li>
<li>set_union返回值即是并集中最后一个元素的位置</li>
</ul>
</blockquote>
<h4 id="set-difference-算法"><a href="#set-difference-算法" class="headerlink" title="set_difference 算法"></a>set_difference 算法</h4><p><strong>功能描述</strong>：</p>
<ul>
<li>求两个集合的差集</li>
</ul>
<p><strong>函数原型</strong>：</p>
<ul>
<li><p><code>set_difference(iterator beg1,iterator end1,iterator beg2,iterator end2,iterator dest);</code></p>
<p>&#x2F;&#x2F;求两个集合的差集</p>
<p>&#x2F;&#x2F;beg1  容器1开始迭代器</p>
<p>&#x2F;&#x2F;end1  容器1结束迭代器</p>
<p>&#x2F;&#x2F;beg2  容器2开始迭代器</p>
<p>&#x2F;&#x2F;end2  容器2结束迭代器</p>
<p>&#x2F;&#x2F;dest  目标容器开始迭代器</p>
</li>
</ul>
<p><strong>注意事项</strong>：</p>
<ul>
<li><em>两个集合必须是有序序列</em></li>
</ul>
<p>示例：</p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><code class="hljs c++"><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;iostream&gt;</span></span><br><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;vector&gt;</span></span><br><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;algorithm&gt;</span></span><br><span class="hljs-keyword">using</span> <span class="hljs-keyword">namespace</span> std;<br><br><span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">print</span><span class="hljs-params">(<span class="hljs-type">int</span> val)</span></span>&#123;<br>    cout&lt;&lt;val&lt;&lt;<span class="hljs-string">&quot; &quot;</span>;<br>&#125;<br><br><span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">test01</span><span class="hljs-params">()</span></span>&#123;<br>    vector&lt;<span class="hljs-type">int</span>&gt;v1;<br>    vector&lt;<span class="hljs-type">int</span>&gt;v2;<br>    vector&lt;<span class="hljs-type">int</span>&gt;v;<br>    <span class="hljs-keyword">for</span>(<span class="hljs-type">int</span> i=<span class="hljs-number">0</span>;i&lt;<span class="hljs-number">10</span>;i++)&#123;<br>        v1.<span class="hljs-built_in">push_back</span>(i);<br>        v2.<span class="hljs-built_in">push_back</span>(i+<span class="hljs-number">5</span>);<br>    &#125;<br>    v.<span class="hljs-built_in">resize</span>(<span class="hljs-built_in">max</span>(v1.<span class="hljs-built_in">size</span>(),v2.<span class="hljs-built_in">size</span>()));<br>    vector&lt;<span class="hljs-type">int</span>&gt;::iterator it=<span class="hljs-built_in">set_difference</span>(v1.<span class="hljs-built_in">begin</span>(),v1.<span class="hljs-built_in">end</span>(),v2.<span class="hljs-built_in">begin</span>(),v2.<span class="hljs-built_in">end</span>(),v.<span class="hljs-built_in">begin</span>());<br>    for_each(v.<span class="hljs-built_in">begin</span>(),it,print);<br>    cout&lt;&lt;endl;<br>&#125;<br></code></pre></td></tr></table></figure>

<blockquote>
<p><strong>总结</strong>：</p>
<ul>
<li>求差集的两个集合必须的有序序列</li>
<li>目标容器开辟空间需要从<strong>两个容器大小取大值</strong></li>
<li>set_difference返回值即是差集中最后一个元素的位置</li>
</ul>
</blockquote>
<h2 id="异常处理"><a href="#异常处理" class="headerlink" title="异常处理"></a>异常处理</h2><p><strong>概念</strong>：</p>
<ul>
<li>异常就是错误，而在程序中难免会有异常出现，但为了让程序正常运行而不是崩溃，则需要使用到异常处理，来解决</li>
<li>传统的异常处理是通过判断返回值来判断程序是否异常。</li>
<li>c++中提供了try、catch、throw的异常处理表达式。</li>
</ul>
<p><strong>函数</strong>：</p>
<ul>
<li><p><code>throw 表达式</code>   throw语句<strong>用来抛出异常</strong>，当有异常发生时，可以通过<strong>throw创建一个异常对象并抛掷</strong>。</p>
</li>
<li><p><code>try&#123;复合语句&#125; catch(异常声明)&#123;异常处理程序&#125;</code>   try内部的异常语句是保护段语句，<strong>当try内部的程序出现异常，则catch子句就会根据异常不同进行捕获异常，然后执行相对应的异常处理程序</strong>。如果出现异常但是catch子句<strong>未匹配到异常，则库函数terminate将被自动调用，默认是调用abort终止程序</strong>。当<strong>捕获异常并执行catch子句的时候则会自动帮你将try语块中的执行了尚未析构的语句析构了</strong>。</p>
</li>
</ul>
<p><strong>异常声明：</strong></p>
<ul>
<li><p>可以在函数的声明中列出这个函数可能抛掷的所有异常类型</p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs c++"><span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">func</span><span class="hljs-params">()</span> <span class="hljs-title">throw</span><span class="hljs-params">(A,B,C,D)</span></span>;<br></code></pre></td></tr></table></figure>
</li>
<li><p>若无异常接口声明，则此函数可以抛掷任何类型的异常</p>
</li>
<li><p>不抛掷任何类型异常的函数声明如下：</p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs c++"><span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">func</span><span class="hljs-params">()</span> <span class="hljs-title">throw</span><span class="hljs-params">()</span></span>;<br>或者：<br><span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">func</span><span class="hljs-params">()</span> <span class="hljs-keyword">noexcept</span></span>;   <span class="hljs-comment">//这个c++推荐使用</span><br></code></pre></td></tr></table></figure></li>
</ul>
<p><strong>异常类</strong>：</p>
<p><img src="https://cdn.jsdelivr.net/gh/MoonforDream/photohouse/hexo/202405190009281.png" srcset="/img/loading.gif" lazyload alt="image"></p>
<h2 id="智能指针"><a href="#智能指针" class="headerlink" title="智能指针"></a>智能指针</h2><p><strong>概念</strong>：</p>
<ul>
<li>智能指针是原始指针的封装，其优点是会<strong>自动分配内存</strong>，不用担心潜在的内存泄露</li>
</ul>
<p><strong>普通指针的不足</strong>：</p>
<ul>
<li>new和new[]的内存需要用delete和delete[]释放</li>
<li>程序员的主观失误，忘了或漏了释放</li>
<li>程序员也不确定何时释放</li>
</ul>
<p><strong>智能指针的设计思路</strong>：</p>
<ul>
<li>智能指针是类模板，在栈上创建智能指针对象</li>
<li>把<strong>普通指针交给智能指针对象</strong></li>
<li>智能指针对象过期时，调用析构函数释放普通指针的内存</li>
</ul>
<h3 id="独占指针-unique-ptr"><a href="#独占指针-unique-ptr" class="headerlink" title="独占指针  unique_ptr"></a>独占指针  unique_ptr</h3><p><strong>概念</strong>：</p>
<ul>
<li><code>unique_ptr</code>**独享一个原始指针(也就是unique_ptr指向的对象)**，也就是说，同时只有一个unique_ptr指向同一个对象，当这个unique_ptr被销毁时，指向的对象也随即被销毁</li>
</ul>
<p><strong>源码简介</strong>：</p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><code class="hljs c++"><span class="hljs-keyword">template</span>&lt;<span class="hljs-keyword">typename</span> T,<span class="hljs-keyword">typename</span> D =default_delete&lt;T&gt; &gt;<br><span class="hljs-keyword">class</span> unique_ptr&#123;<br><span class="hljs-keyword">public</span>:<br>    <span class="hljs-keyword">explicit</span> <span class="hljs-built_in">unique_ptr</span>(pointer p) <span class="hljs-keyword">noexcept</span>;   <span class="hljs-comment">//不可用于转换函数</span><br>    ~<span class="hljs-built_in">unique_ptr</span>() <span class="hljs-keyword">noexcept</span>;<br>    T&amp; <span class="hljs-keyword">operator</span>*() <span class="hljs-type">const</span>;    <span class="hljs-comment">//重载*操作符</span><br>    T* <span class="hljs-keyword">operator</span>-&gt;() <span class="hljs-type">const</span> <span class="hljs-keyword">noexcept</span>;  <span class="hljs-comment">//重载-&gt;运算符</span><br>    <span class="hljs-built_in">unique_ptr</span>(<span class="hljs-type">const</span> unique_ptr&amp;)=<span class="hljs-keyword">delete</span>;  <span class="hljs-comment">//禁用拷贝构造函数</span><br>    unique_ptr&amp; <span class="hljs-keyword">operator</span>=(<span class="hljs-type">const</span> unique_ptr &amp;)=<span class="hljs-keyword">delete</span>;    <span class="hljs-comment">//禁用赋值函数</span><br>    <span class="hljs-built_in">unique_ptr</span>(unique_ptr &amp;&amp;) <span class="hljs-keyword">noexcept</span>;     <span class="hljs-comment">//右值引用</span><br>    unique_ptr&amp; <span class="hljs-keyword">operator</span>=(unique_ptr&amp;&amp;) <span class="hljs-keyword">noexcept</span>;    <span class="hljs-comment">//右值引用</span><br>    <span class="hljs-comment">//...</span><br><span class="hljs-keyword">private</span>:<br>    pointer ptr;  <span class="hljs-comment">//内置的指针</span><br>&#125;<br></code></pre></td></tr></table></figure>







<p><strong>功能描述</strong>：</p>
<ul>
<li>在任何给定时候，<strong>只能有一个指针管理内存(也就是独占指针对象只管理一个指针资源)</strong></li>
<li>当指针超出作用域时，内存将自动释放</li>
<li><strong>unique_ptr指针不可Copy，也不可以进行赋值,只可以Move</strong></li>
<li>可以通过<strong>get()获取裸指针地址</strong>(<strong>&amp;unique_ptr对象得到的是对象指针地址</strong>不是裸指针)</li>
<li>可以通过-&gt;调用成员函数</li>
<li>可以通过*调用dereferencing</li>
</ul>
<p><strong>作为函数的参数</strong>：</p>
<ul>
<li><strong>传引用</strong>(<strong>不能传值</strong>，因为unique_ptr没有拷贝构造函数)</li>
<li><strong>裸指针</strong></li>
</ul>
<p><strong>注意</strong>：</p>
<ul>
<li><strong>不要用同一个裸指针初始化多个unique_ptr对象</strong></li>
<li><strong>不要用unique_ptr管理不是new分配的内存</strong></li>
<li><strong>不支持指针的运算(+、-、++、–)</strong></li>
</ul>
<p>**创建方式(初始化)**：</p>
<ul>
<li><p>通过<strong>已有裸指针</strong>创建</p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs c++"><span class="hljs-keyword">class</span> <span class="hljs-title class_">AA</span>&#123;<br>  ....  <br>&#125;;<br><br><span class="hljs-function"><span class="hljs-type">int</span> <span class="hljs-title">main</span><span class="hljs-params">()</span></span>&#123;<br>    AA* p=<span class="hljs-keyword">new</span> <span class="hljs-built_in">AA</span>(<span class="hljs-string">&quot;小明&quot;</span>);<br>    unique_ptr&lt;AA&gt; pu1=p;<br>    <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;<br>&#125;<br></code></pre></td></tr></table></figure>
</li>
<li><p>通过<strong>new来创建</strong></p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs c++"><span class="hljs-function">unique_ptr&lt;AA&gt; <span class="hljs-title">pu1</span><span class="hljs-params">(<span class="hljs-keyword">new</span> AA(<span class="hljs-string">&quot;小明&quot;</span>))</span></span>;<br></code></pre></td></tr></table></figure>
</li>
<li><p>通过<strong>std::make_unique创建</strong>(推荐)</p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs c++">unique_ptr&lt;AA&gt; pu1=<span class="hljs-built_in">make_unique</span>&lt;AA&gt;(<span class="hljs-string">&quot;小明&quot;</span>);   <span class="hljs-comment">//C++14标准</span><br></code></pre></td></tr></table></figure></li>
</ul>
<p><strong>内置函数和使用方法</strong>：</p>
<ol>
<li><p><code>get()</code>：获取裸指针的地址</p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs c++">unique_ptr&lt;<span class="hljs-type">int</span>&gt; p1=<span class="hljs-built_in">make_unique</span>&lt;<span class="hljs-type">int</span>&gt;(<span class="hljs-number">10</span>);<br>cout&lt;&lt;p1.<span class="hljs-built_in">get</span>()&lt;&lt;endl;  <span class="hljs-comment">//0x6498f94942b0</span><br></code></pre></td></tr></table></figure>
</li>
<li><p><code>release()</code>：<strong>释放对原始指针的控制权</strong>，将unique_ptr对象置为空，<strong>返回裸指针地址</strong>(之前管理的指针地址)。可用于把unique_ptr传递给子函数，子函数将负责释放对象</p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs c++">unique_ptr&lt;<span class="hljs-type">int</span>&gt; p1=<span class="hljs-built_in">make_unique</span>&lt;<span class="hljs-type">int</span>&gt;(<span class="hljs-number">10</span>);<br>cout&lt;&lt;p1.<span class="hljs-built_in">release</span>()&lt;&lt;endl;    <span class="hljs-comment">//0x5fb45e2472b0</span><br><span class="hljs-keyword">if</span>(p1==<span class="hljs-literal">nullptr</span>) cout&lt;&lt;<span class="hljs-string">&quot;p1为空&quot;</span>&lt;&lt;endl;     <span class="hljs-comment">//p1为空</span><br></code></pre></td></tr></table></figure>
</li>
<li><p><code>std::move()</code>：<strong>转移对原始指针的控制权</strong>。(可用于把unique_ptr传递给子函数，子函数形参也是unique_ptr，传值的方法)</p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><code class="hljs c++"><span class="hljs-comment">//函数func4()需要一个unique_ptr对象，并且会对这个对象负责</span><br><span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">func4</span><span class="hljs-params">(unique_ptr&lt;AA&gt; a)</span></span>&#123;<br>    cout&lt;&lt;a-&gt;m_name&lt;&lt;endl;<br>&#125;<br><br><br><span class="hljs-function"><span class="hljs-type">int</span> <span class="hljs-title">main</span><span class="hljs-params">(<span class="hljs-type">int</span> argc, <span class="hljs-type">char</span> *argv[])</span></span><br><span class="hljs-function"></span>&#123;<br>    <span class="hljs-function">unique_ptr&lt;AA&gt; <span class="hljs-title">p</span><span class="hljs-params">(<span class="hljs-keyword">new</span> AA(<span class="hljs-string">&quot;小明&quot;</span>))</span></span>;<br>    cout&lt;&lt;<span class="hljs-string">&quot;开始调用函数.\n&quot;</span>;<br>    <span class="hljs-built_in">func4</span>(std::<span class="hljs-built_in">move</span>(p));   <span class="hljs-comment">//将原始指针的控制权交给func4函数的形参</span><br>    cout&lt;&lt;<span class="hljs-string">&quot;调用函数完成.\n&quot;</span>;<br>    <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;<br>&#125;<br></code></pre></td></tr></table></figure>
</li>
<li><p><code>reset()</code>：<strong>释放unique_ptr指向资源，以及更改指向</strong></p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs c++"><span class="hljs-comment">//函数原型</span><br><span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">reset</span><span class="hljs-params">(T* _ptr=(T*)<span class="hljs-literal">nullptr</span>)</span></span>;<br>unique_ptr&lt;AA&gt;<span class="hljs-built_in">p</span>(<span class="hljs-keyword">new</span> <span class="hljs-built_in">AA</span>(<span class="hljs-string">&quot;小明&quot;</span>));<br>p.<span class="hljs-built_in">reset</span>();   <span class="hljs-comment">//释放p对象所指向的资源对象</span><br>p.<span class="hljs-built_in">reset</span>(<span class="hljs-literal">nullptr</span>);   <span class="hljs-comment">//释放p对象所指向的资源对象</span><br>p.<span class="hljs-built_in">reset</span>(<span class="hljs-keyword">new</span> <span class="hljs-built_in">AA</span>(<span class="hljs-string">&quot;小蓝&quot;</span>));   <span class="hljs-comment">//释放p所指向对象，并指向新的对象</span><br></code></pre></td></tr></table></figure>
</li>
<li><p><code>swap()</code>：<strong>交换两个unique_ptr所指向的对象的控制权</strong></p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><code class="hljs c++"><span class="hljs-comment">//函数原型</span><br><span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">swap</span><span class="hljs-params">(unique_ptr&lt;T&gt;&amp;_Right)</span></span>;<br><br>unique_ptr&lt;AA&gt;<span class="hljs-built_in">p1</span>(<span class="hljs-keyword">new</span> <span class="hljs-built_in">AA</span>(<span class="hljs-string">&quot;小明&quot;</span>));<br>unique_ptr&lt;AA&gt;<span class="hljs-built_in">p2</span>(<span class="hljs-keyword">new</span> <span class="hljs-built_in">AA</span>(<span class="hljs-string">&quot;小红&quot;</span>));<br>p1.<span class="hljs-built_in">swap</span>(p2);<br>cout&lt;&lt;p1-&gt;m_name&lt;&lt;endl;<br>cout&lt;&lt;p2-&gt;m_name&lt;&lt;endl;<br><span class="hljs-comment">//输出：</span><br><span class="hljs-comment">//小红</span><br><span class="hljs-comment">//小明</span><br></code></pre></td></tr></table></figure>
</li>
<li><p><code>[]</code>：unique_ptr重载了操作符[]，<strong>提供了支持数组的具体化版本</strong>，操作符[]<strong>返回的是引用，可以作为左值</strong></p>
<p><strong>使用</strong></p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs c++"><span class="hljs-comment">//unique_ptr&lt;int[]&gt; parr1(new int[3]);  //不指定初始值</span><br><span class="hljs-function">unique_ptr&lt;<span class="hljs-type">int</span>[]&gt; <span class="hljs-title">parr1</span><span class="hljs-params">(<span class="hljs-keyword">new</span> <span class="hljs-type">int</span>[<span class="hljs-number">3</span>](<span class="hljs-number">33</span>,<span class="hljs-number">22</span>,<span class="hljs-number">11</span>))</span></span>;  <span class="hljs-comment">//指定初始值</span><br>cout&lt;&lt;<span class="hljs-string">&quot;parr1[0]=&quot;</span>&lt;&lt;parr1[<span class="hljs-number">0</span>]&lt;&lt;endl;<br>cout&lt;&lt;<span class="hljs-string">&quot;parr1[1]=&quot;</span>&lt;&lt;parr1[<span class="hljs-number">1</span>]&lt;&lt;endl;<br>cout&lt;&lt;<span class="hljs-string">&quot;parr1[2]=&quot;</span>&lt;&lt;parr1[<span class="hljs-number">2</span>]&lt;&lt;endl;<br></code></pre></td></tr></table></figure></li>
</ol>
<p><strong>使用技巧</strong>：</p>
<ol>
<li><p>如果<strong>源unique_ptr对象是一个临时右值(一般是函数的返回值)，编译器允许将这个unique_ptr赋给另一个unique_ptr对象</strong>。如果源unique_ptr将存在一段时间，则编译器不允许赋值！</p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><code class="hljs c++"><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;iostream&gt;</span></span><br><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;memory&gt;</span></span><br><span class="hljs-keyword">using</span> <span class="hljs-keyword">namespace</span> std;<br><br><br>unique_ptr&lt;<span class="hljs-type">int</span>&gt;<span class="hljs-built_in">func</span>()&#123;<br><br>    unique_ptr&lt;<span class="hljs-type">int</span>&gt; pp=<span class="hljs-built_in">make_unique</span>&lt;<span class="hljs-type">int</span>&gt;(<span class="hljs-number">100</span>);<br>    <span class="hljs-keyword">return</span> pp;<br>&#125;<br><br><br><span class="hljs-function"><span class="hljs-type">int</span> <span class="hljs-title">main</span><span class="hljs-params">(<span class="hljs-type">int</span> argc, <span class="hljs-type">char</span> *argv[])</span></span><br><span class="hljs-function"></span>&#123;<br>    unique_ptr&lt;<span class="hljs-type">int</span>&gt; p1=<span class="hljs-built_in">make_unique</span>&lt;<span class="hljs-type">int</span>&gt;(<span class="hljs-number">10</span>);<br>    unique_ptr&lt;<span class="hljs-type">int</span>&gt; p2;<br>    p2=p1;   <span class="hljs-comment">//错误,不可以</span><br><br>    p2=<span class="hljs-built_in">unique_ptr</span>&lt;<span class="hljs-type">int</span>&gt;(<span class="hljs-keyword">new</span> <span class="hljs-built_in">int</span>(<span class="hljs-number">1</span>));   <span class="hljs-comment">//使用匿名对象赋值,可以</span><br>    p1=<span class="hljs-built_in">func</span>();    <span class="hljs-comment">//利用函数返回值赋值，可以</span><br>    std::cout&lt;&lt;*p1&lt;&lt;std::endl;<br>    <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;<br>&#125; <br></code></pre></td></tr></table></figure>
</li>
<li><p><strong>用nullptr给unique_ptr赋值将会释放对象，空的unique_ptr&#x3D;&#x3D;nullptr</strong></p>
<p><img src="https://cdn.jsdelivr.net/gh/MoonforDream/photohouse/hexo/202405190009282.png" srcset="/img/loading.gif" lazyload alt="image-20240417141128949"></p>
</li>
<li><p>一些情况使用技巧</p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br></pre></td><td class="code"><pre><code class="hljs c++"><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;iostream&gt;</span></span><br><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;memory&gt;</span></span><br><span class="hljs-keyword">using</span> <span class="hljs-keyword">namespace</span> std;<br><br><span class="hljs-keyword">class</span> <span class="hljs-title class_">AA</span>&#123;<br><span class="hljs-keyword">public</span>:<br>    string m_name;<br>    <span class="hljs-built_in">AA</span>()&#123;<br>        cout&lt;&lt;m_name&lt;&lt;<span class="hljs-string">&quot;调用构造函数AA().\n&quot;</span>;<br>    &#125;<br>    <span class="hljs-built_in">AA</span>(<span class="hljs-type">const</span> string &amp;name):<span class="hljs-built_in">m_name</span>(name)&#123;<br>        cout&lt;&lt;<span class="hljs-string">&quot;调用构造函数AA(&quot;</span>&lt;&lt;m_name&lt;&lt;<span class="hljs-string">&quot;).\n&quot;</span>;<br>    &#125;<br>    ~<span class="hljs-built_in">AA</span>()&#123;<br>        cout&lt;&lt;<span class="hljs-string">&quot;调用了析构函数~AA(&quot;</span>&lt;&lt;m_name&lt;&lt;<span class="hljs-string">&quot;).\n&quot;</span>;<br>    &#125;<br>&#125;;<br><br><br><span class="hljs-comment">//函数func1()需要一个原始指针，但不对指针负责</span><br><span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">func1</span><span class="hljs-params">(<span class="hljs-type">const</span> AA* a)</span></span>&#123;<br>    cout&lt;&lt;a-&gt;m_name&lt;&lt;endl;<br>&#125;<br><br><span class="hljs-comment">//函数func2()需要一个裸指针，并且对这个指针负责</span><br><span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">func2</span><span class="hljs-params">(AA* a)</span></span>&#123;<br>    cout&lt;&lt;a-&gt;m_name&lt;&lt;endl;<br>    <span class="hljs-keyword">delete</span> a;<br>&#125;<br><br><span class="hljs-comment">//函数func3()需要一个unique_ptr对象,不会对这个对象负责</span><br><span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">func3</span><span class="hljs-params">(<span class="hljs-type">const</span> unique_ptr&lt;AA&gt; &amp;a)</span></span>&#123;<br>    cout&lt;&lt;a-&gt;m_name&lt;&lt;endl;<br>&#125;<br><br><span class="hljs-comment">//函数func4()需要一个unique_ptr对象，并且会对这个对象负责</span><br><span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">func4</span><span class="hljs-params">(unique_ptr&lt;AA&gt; a)</span></span>&#123;<br>    cout&lt;&lt;a-&gt;m_name&lt;&lt;endl;<br>&#125;<br><br><br><span class="hljs-function"><span class="hljs-type">int</span> <span class="hljs-title">main</span><span class="hljs-params">(<span class="hljs-type">int</span> argc, <span class="hljs-type">char</span> *argv[])</span></span><br><span class="hljs-function"></span>&#123;<br>    <span class="hljs-function">unique_ptr&lt;AA&gt; <span class="hljs-title">p</span><span class="hljs-params">(<span class="hljs-keyword">new</span> AA(<span class="hljs-string">&quot;小明&quot;</span>))</span></span>;<br>    cout&lt;&lt;<span class="hljs-string">&quot;开始调用函数.\n&quot;</span>;<br>    <span class="hljs-built_in">func1</span>(p.<span class="hljs-built_in">get</span>());<br>    <span class="hljs-built_in">func2</span>(p.<span class="hljs-built_in">release</span>());<br>    <span class="hljs-built_in">func3</span>(p);<br>    <span class="hljs-built_in">func4</span>(std::<span class="hljs-built_in">move</span>(p));<br>    cout&lt;&lt;<span class="hljs-string">&quot;调用函数完成.\n&quot;</span>;<br>    <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;<br>&#125;<br></code></pre></td></tr></table></figure>
</li>
<li><p><strong>unique_ptr</strong>也可以像普通指针一样，当指向一个类继承体系的基类对象时，<strong>也具有多态性质</strong>，如同使用裸指针管理基类对象和派生类对象那样</p>
</li>
<li><p><strong>unique_ptr不是绝对安全</strong>，如果程序中调用exit()退出，全局的unique_ptr可以自动释放，但局部的unique_ptr无法释放</p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><code class="hljs c++"><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;iostream&gt;</span></span><br><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;memory&gt;</span></span><br><span class="hljs-keyword">using</span> <span class="hljs-keyword">namespace</span> std;<br><br><span class="hljs-keyword">class</span> <span class="hljs-title class_">AA</span>&#123;<br><span class="hljs-keyword">public</span>:<br>    string m_name;<br>    <span class="hljs-built_in">AA</span>()&#123;<br>        cout&lt;&lt;m_name&lt;&lt;<span class="hljs-string">&quot;调用构造函数AA().\n&quot;</span>;<br>    &#125;<br>    <span class="hljs-built_in">AA</span>(<span class="hljs-type">const</span> string &amp;name):<span class="hljs-built_in">m_name</span>(name)&#123;<br>        cout&lt;&lt;<span class="hljs-string">&quot;调用构造函数AA(&quot;</span>&lt;&lt;m_name&lt;&lt;<span class="hljs-string">&quot;).\n&quot;</span>;<br>    &#125;<br>    ~<span class="hljs-built_in">AA</span>()&#123;<br>        cout&lt;&lt;<span class="hljs-string">&quot;调用了析构函数~AA(&quot;</span>&lt;&lt;m_name&lt;&lt;<span class="hljs-string">&quot;).\n&quot;</span>;<br>    &#125;<br>&#125;;<br><br><span class="hljs-function">unique_ptr&lt;AA&gt; <span class="hljs-title">p1</span><span class="hljs-params">(<span class="hljs-keyword">new</span> AA(<span class="hljs-string">&quot;小明全局&quot;</span>))</span></span>;<br><br><br><span class="hljs-function"><span class="hljs-type">int</span> <span class="hljs-title">main</span><span class="hljs-params">(<span class="hljs-type">int</span> argc, <span class="hljs-type">char</span> *argv[])</span></span><br><span class="hljs-function"></span>&#123;<br>    <span class="hljs-function">unique_ptr&lt;AA&gt; <span class="hljs-title">p</span><span class="hljs-params">(<span class="hljs-keyword">new</span> AA(<span class="hljs-string">&quot;小明局部&quot;</span>))</span></span>;<br>    <span class="hljs-comment">//return 0;  使用return全部自动释放</span><br>    <span class="hljs-built_in">exit</span>(<span class="hljs-number">0</span>);   <span class="hljs-comment">//局部无法进行释放</span><br>&#125;<br><span class="hljs-comment">//打印日志</span><br>|| 调用构造函数<span class="hljs-built_in">AA</span>(小明全局).<br>|| 调用构造函数<span class="hljs-built_in">AA</span>(小明局部).<br>|| 调用了析构函数~<span class="hljs-built_in">AA</span>(小明全局).<br>|| Exited with code <span class="hljs-number">0</span><br></code></pre></td></tr></table></figure></li>
</ol>
<h3 id="共享指针-shared-ptr"><a href="#共享指针-shared-ptr" class="headerlink" title="共享指针 shared_ptr"></a>共享指针 shared_ptr</h3><p><strong>概念</strong>：</p>
<ul>
<li><code>shared_ptr</code><strong>共享它指向的对象，多个shared_ptr可以指向(关联)相同的对象，在内部采用计数机制来实现</strong>,共享不是复制，资源只有一个</li>
<li>当<strong>新的shared_ptr与对象关联</strong>时，<strong>引用计数增加1</strong></li>
<li>当<strong>shared_ptr超出作用域</strong>时，<strong>引用计数减1</strong>。</li>
<li>当<strong>引用计数为0</strong>时，则表示没有任何shared_ptr与对象相联，则<strong>释放该对象</strong></li>
</ul>
<p><strong>基本用法：</strong></p>
<p>注：shared_ptr的构造函数也是explicit，但是，<strong>没有删除拷贝构造函数和赋值函数</strong></p>
<ol>
<li><p><code>初始化</code>：</p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><code class="hljs c++"><span class="hljs-comment">//方法1：</span><br><span class="hljs-function">shared_ptr <span class="hljs-title">p</span><span class="hljs-params">(<span class="hljs-keyword">new</span> AA(<span class="hljs-string">&quot;小明&quot;</span>))</span></span>;  <span class="hljs-comment">//分配内存并初始化</span><br><br><span class="hljs-comment">//方法2[推荐]:</span><br>shared_ptr p=<span class="hljs-built_in">make_shared</span>&lt;AA&gt;(<span class="hljs-string">&quot;小明&quot;</span>);  <span class="hljs-comment">//C++11标准，效率更高</span><br><br><span class="hljs-comment">//方法3：</span><br>AA* p=<span class="hljs-keyword">new</span> <span class="hljs-built_in">AA</span>(<span class="hljs-string">&quot;小明&quot;</span>);<br><span class="hljs-function">shared_ptr&lt;AA&gt; <span class="hljs-title">p0</span><span class="hljs-params">(p)</span></span>;   <span class="hljs-comment">//用已存在的裸指针初始化</span><br><br><span class="hljs-comment">//方法4：</span><br><span class="hljs-function">shared_ptr&lt;AA&gt; <span class="hljs-title">p0</span><span class="hljs-params">(<span class="hljs-keyword">new</span> AA(<span class="hljs-string">&quot;小明&quot;</span>))</span></span>;<br><span class="hljs-function">shared_ptr&lt;AA&gt; <span class="hljs-title">p1</span><span class="hljs-params">(p0)</span></span>;    <span class="hljs-comment">//用已存在的shared_ptr初始化，计数加1</span><br>shared_ptr&lt;AA&gt; p2=p0;   <span class="hljs-comment">//用已存在的shared_ptr初始化，计数加1</span><br></code></pre></td></tr></table></figure>
</li>
<li><p><code>use_count()</code>：<strong>显示shared_ptr所指向的资源引用次数</strong></p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs c++">shared_ptr&lt;AA&gt; p0=<span class="hljs-built_in">make_shared</span>&lt;AA&gt;(<span class="hljs-string">&quot;小明&quot;</span>);<br><span class="hljs-function">shared_ptr&lt;AA&gt; <span class="hljs-title">p1</span><span class="hljs-params">(p0)</span></span>;<br>shared_ptr&lt;AA&gt; p2=p0;<br>cout&lt;&lt;p0.<span class="hljs-built_in">use_count</span>()&lt;&lt;<span class="hljs-string">&quot;\n&quot;</span>;  <span class="hljs-comment">//3</span><br></code></pre></td></tr></table></figure>
</li>
<li><p><code>get()</code>：<strong>显示shared_ptr所指向的资源地址</strong></p>
</li>
<li><p><code>unique()</code>：<strong>判断shared_ptr所指向的资源是否被其他shared_ptr对象所共享</strong>，如果use.count()为1，返回true，否则返回false</p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs c++">shared_ptr&lt;AA&gt; p0=<span class="hljs-built_in">make_shared</span>&lt;AA&gt;(<span class="hljs-string">&quot;小明&quot;</span>);<br><span class="hljs-function">shared_ptr&lt;AA&gt; <span class="hljs-title">p1</span><span class="hljs-params">(p0)</span></span>;<br>shared_ptr&lt;AA&gt; p2=p0;<br>cout&lt;&lt;p0.<span class="hljs-built_in">unique</span>()&lt;&lt;<span class="hljs-string">&quot;\n&quot;</span>;  <span class="hljs-comment">//0</span><br>shared_ptr&lt;AA&gt; p3=<span class="hljs-built_in">make_shared</span>&lt;AA&gt;(<span class="hljs-string">&quot;111&quot;</span>);<br>cout&lt;&lt;p3.<span class="hljs-built_in">unique</span>()&lt;&lt;<span class="hljs-string">&quot;\n&quot;</span>;  <span class="hljs-comment">//1</span><br></code></pre></td></tr></table></figure>
</li>
<li><p><code>=</code>：shared_ptr重载了&#x3D;操作符，<strong>支持赋值，</strong>因为将右值shared_ptr赋值给了左值shared_ptr，因此<strong>右值shared_ptr所指向资源计数+1,则左值shared_ptr所指向资源计数-1</strong></p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><code class="hljs c++"><span class="hljs-function"><span class="hljs-type">int</span> <span class="hljs-title">main</span><span class="hljs-params">(<span class="hljs-type">int</span> argc, <span class="hljs-type">char</span> *argv[])</span></span><br><span class="hljs-function"></span>&#123;<br>    shared_ptr&lt;AA&gt; p0=<span class="hljs-built_in">make_shared</span>&lt;AA&gt;(<span class="hljs-string">&quot;小明&quot;</span>);<br>    <span class="hljs-function">shared_ptr&lt;AA&gt; <span class="hljs-title">p1</span><span class="hljs-params">(p0)</span></span>;<br>    shared_ptr&lt;AA&gt; p2=p0;<br>    shared_ptr&lt;AA&gt; p3=<span class="hljs-built_in">make_shared</span>&lt;AA&gt;(<span class="hljs-string">&quot;111&quot;</span>);<br>    shared_ptr&lt;AA&gt; p4=p3;<br>    shared_ptr&lt;AA&gt; p5=p3;<br>    p2=p5;   <span class="hljs-comment">//p3+1,p0-1</span><br>    cout&lt;&lt;p0.<span class="hljs-built_in">use_count</span>()&lt;&lt;<span class="hljs-string">&quot;\n&quot;</span>;   <span class="hljs-comment">//2</span><br>    cout&lt;&lt;p3.<span class="hljs-built_in">use_count</span>()&lt;&lt;<span class="hljs-string">&quot;\n&quot;</span>;   <span class="hljs-comment">//4</span><br>    <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;<br>&#125;<br></code></pre></td></tr></table></figure>
</li>
<li><p><code>[]</code>：shared_ptr重载了操作符[]，<strong>提供了支持数组的具体化版本</strong>，操作符[]<strong>返回的是引用，可以作为左值</strong></p>
<p><strong>使用</strong></p>
</li>
<li><p><code>std::move()</code>：可以将转移对原始指针的控制权，<strong>还可以将unique_ptr转移成shared_ptr(反过来不行)</strong></p>
</li>
<li><p><code>reset()</code>：<strong>改变与资源的关联关系，以及指向</strong></p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs c++">shared_ptr&lt;AA&gt; p=<span class="hljs-built_in">make_shared</span>&lt;AA&gt;(<span class="hljs-string">&quot;小明&quot;</span>);<br>p.<span class="hljs-built_in">reset</span>();    <span class="hljs-comment">//解除与资源的关系，资源的引用计数减1</span><br>p.<span class="hljs-built_in">reset</span>(<span class="hljs-keyword">new</span> <span class="hljs-built_in">AA</span>(<span class="hljs-string">&quot;111&quot;</span>));   <span class="hljs-comment">//解除与资源的关系，原资源的引用计数-1,关联新的资源，新资源引用计数+1</span><br></code></pre></td></tr></table></figure>
</li>
<li><p><code>swap()</code>：<strong>交换两个shared_ptr的控制权</strong></p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs c++"><span class="hljs-comment">//函数原型</span><br><span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">swap</span><span class="hljs-params">(shared_ptr&lt;T&gt; &amp;_Right)</span></span>;<br></code></pre></td></tr></table></figure></li>
</ol>
<p><strong>作为函数的参数</strong>：</p>
<ul>
<li><strong>传引用</strong>(<strong>不能传值</strong>，因为unique_ptr没有拷贝构造函数)</li>
<li><strong>裸指针</strong></li>
</ul>
<p><strong>注意</strong>：</p>
<ul>
<li><strong>不要用同一个裸指针初始化多个shared_ptr对象</strong></li>
<li><strong>不要用shared_ptr管理不是new分配的内存</strong></li>
<li><strong>不支持指针的运算(+、-、++、–)</strong></li>
</ul>
<p><strong>使用技巧</strong>：</p>
<ol>
<li><strong>用nullptr给shared_ptr赋值时将计数减1</strong>,如果计数为0，将释放对象，空的shared_ptr&#x3D;&#x3D;nullptr</li>
<li><strong>shared_ptr</strong>也可以像普通指针一样，当指向一个类继承体系的基类对象时，<strong>也具有多态性质</strong>，如同使用裸指针管理基类对象和派生类对象那样</li>
<li><strong>shared_ptr不是绝对安全</strong>，如果程序中调用exit()退出，<strong>全局的shared_ptr可以自动释放，但局部的shared_ptr无法释放</strong></li>
<li>如果unique_ptr能解决问题，就不要在用shared_ptr，<strong>unique_ptr的效率更高，占用的资源更少</strong></li>
</ol>
<p><strong>shared_ptr的线程安全性</strong>：</p>
<ul>
<li>shared_ptr的<strong>引用计数本身是线程安全</strong>(引用计数是原子操作)</li>
<li><strong>多个线程同时读同一个shared_ptr对象是线程安全的</strong></li>
<li>如果<strong>多个线程对同一个shared_ptr对象进行读和写，则需要加锁</strong></li>
<li><strong>多线程读写shared_ptr所指向的同一个对象</strong>，不管是相同的shared_ptr对象，还是不同的shared_ptr对象，也<strong>需要加锁保护</strong></li>
</ul>
<p><strong>shared_ptr存在问题</strong>：</p>
<ul>
<li>shared_ptr内部维护一个共享的引用计数器，多个shared_ptr可以指向同一个资源</li>
<li>如果<strong>出现了循环引用</strong>的情况，<strong>引用计数永远无法归0，资源不会被释放</strong></li>
</ul>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br></pre></td><td class="code"><pre><code class="hljs c++"><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;iostream&gt;</span></span><br><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;memory&gt;</span></span><br><span class="hljs-keyword">using</span> <span class="hljs-keyword">namespace</span> std;<br><br><span class="hljs-keyword">class</span> <span class="hljs-title class_">BB</span>;<br><br><span class="hljs-keyword">class</span> <span class="hljs-title class_">AA</span>&#123;<br><span class="hljs-keyword">public</span>:<br>    string m_name;<br>    <span class="hljs-built_in">AA</span>()&#123;<br>        cout&lt;&lt;m_name&lt;&lt;<span class="hljs-string">&quot;调用构造函数AA().\n&quot;</span>;<br>    &#125;<br>    <span class="hljs-built_in">AA</span>(<span class="hljs-type">const</span> string &amp;name):<span class="hljs-built_in">m_name</span>(name)&#123;<br>        cout&lt;&lt;<span class="hljs-string">&quot;调用构造函数AA(&quot;</span>&lt;&lt;m_name&lt;&lt;<span class="hljs-string">&quot;).\n&quot;</span>;<br>    &#125;<br>    ~<span class="hljs-built_in">AA</span>()&#123;<br>        cout&lt;&lt;<span class="hljs-string">&quot;调用了析构函数~AA(&quot;</span>&lt;&lt;m_name&lt;&lt;<span class="hljs-string">&quot;).\n&quot;</span>;<br>    &#125;<br>    <span class="hljs-comment">//引用BB类资源</span><br>    shared_ptr&lt;BB&gt; m_p;<br>&#125;;<br><br><br><span class="hljs-keyword">class</span> <span class="hljs-title class_">BB</span>&#123;<br><span class="hljs-keyword">public</span>:<br>    string m_name;<br>    <span class="hljs-built_in">BB</span>()&#123;<br>        cout&lt;&lt;m_name&lt;&lt;<span class="hljs-string">&quot;调用构造函数BB().\n&quot;</span>;<br>    &#125;<br>    <span class="hljs-built_in">BB</span>(<span class="hljs-type">const</span> string &amp;name):<span class="hljs-built_in">m_name</span>(name)&#123;<br>        cout&lt;&lt;<span class="hljs-string">&quot;调用构造函数BB(&quot;</span>&lt;&lt;m_name&lt;&lt;<span class="hljs-string">&quot;).\n&quot;</span>;<br>    &#125;<br>    ~<span class="hljs-built_in">BB</span>()&#123;<br>        cout&lt;&lt;<span class="hljs-string">&quot;调用了析构函数~BB(&quot;</span>&lt;&lt;m_name&lt;&lt;<span class="hljs-string">&quot;).\n&quot;</span>;<br>    &#125;<br>    <span class="hljs-comment">//引用AA资源</span><br>    shared_ptr&lt;AA&gt; m_p;<br>&#125;;<br><br><br><span class="hljs-function"><span class="hljs-type">int</span> <span class="hljs-title">main</span><span class="hljs-params">(<span class="hljs-type">int</span> argc, <span class="hljs-type">char</span> *argv[])</span></span><br><span class="hljs-function"></span>&#123;<br>    shared_ptr&lt;AA&gt; p0=<span class="hljs-built_in">make_shared</span>&lt;AA&gt;(<span class="hljs-string">&quot;小明1&quot;</span>);   <br>    shared_ptr&lt;BB&gt; p1=<span class="hljs-built_in">make_shared</span>&lt;BB&gt;(<span class="hljs-string">&quot;小明2&quot;</span>);<br>    <span class="hljs-comment">//循环引用</span><br>    p0-&gt;m_p=p1;<br>    p1-&gt;m_p=p0;<br><br>    <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;<br>&#125;<br><span class="hljs-comment">//输出结果</span><br>|| 调用构造函数<span class="hljs-built_in">AA</span>(小明<span class="hljs-number">1</span>).<br>|| 调用构造函数<span class="hljs-built_in">BB</span>(小明<span class="hljs-number">2</span>).<br>|| Exited with code <span class="hljs-number">0</span><br><span class="hljs-comment">//没有调用析构函数</span><br></code></pre></td></tr></table></figure>















<h3 id="智能指针删除器"><a href="#智能指针删除器" class="headerlink" title="智能指针删除器"></a>智能指针删除器</h3><p><strong>概念</strong>：</p>
<ul>
<li>在默认情况下，智能指针过期时，它会自动调用缺省的删除器来删除资源</li>
<li><strong>程序员可以自定义删除器</strong>，改变智能指针释放资源的行为</li>
<li><strong>删除器可以是全局函数、仿函数和Lambda表达式，形参为原始指针</strong></li>
</ul>
<p>示例：</p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br></pre></td><td class="code"><pre><code class="hljs c++"><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;iostream&gt;</span></span><br><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;memory&gt;</span></span><br><span class="hljs-keyword">using</span> <span class="hljs-keyword">namespace</span> std;<br><br><span class="hljs-keyword">class</span> <span class="hljs-title class_">AA</span>&#123;<br><span class="hljs-keyword">public</span>:<br>    string m_name;<br>    <span class="hljs-built_in">AA</span>()&#123;<br>        cout&lt;&lt;m_name&lt;&lt;<span class="hljs-string">&quot;调用构造函数AA().\n&quot;</span>;<br>    &#125;<br>    <span class="hljs-built_in">AA</span>(<span class="hljs-type">const</span> string &amp;name):<span class="hljs-built_in">m_name</span>(name)&#123;<br>        cout&lt;&lt;<span class="hljs-string">&quot;调用构造函数AA(&quot;</span>&lt;&lt;m_name&lt;&lt;<span class="hljs-string">&quot;).\n&quot;</span>;<br>    &#125;<br>    ~<span class="hljs-built_in">AA</span>()&#123;<br>        cout&lt;&lt;<span class="hljs-string">&quot;调用了析构函数~AA(&quot;</span>&lt;&lt;m_name&lt;&lt;<span class="hljs-string">&quot;).\n&quot;</span>;<br>    &#125;<br>&#125;;<br><br><span class="hljs-comment">//删除器,普通函数</span><br><span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">deletefunc</span><span class="hljs-params">(AA* a)</span></span>&#123;<br>    cout&lt;&lt;<span class="hljs-string">&quot;自定义删除器(全局函数)。\n&quot;</span>;<br>    <span class="hljs-keyword">delete</span> a;<br>&#125;<br><br><span class="hljs-comment">//删除器，仿函数</span><br><span class="hljs-keyword">struct</span> <span class="hljs-title class_">deleteclass</span>&#123;<br>    <span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">operator</span><span class="hljs-params">()</span><span class="hljs-params">(AA* a)</span></span>&#123;<br>        cout&lt;&lt;<span class="hljs-string">&quot;自定义删除器(仿函数).\n&quot;</span>;<br>        <span class="hljs-keyword">delete</span> a;<br>    &#125;<br>&#125;;<br><br><span class="hljs-comment">//删除器,Lambda表达式</span><br><span class="hljs-keyword">auto</span> deletelamb=[](AA* a)&#123;<br>    cout&lt;&lt;<span class="hljs-string">&quot;自定义删除器(Lambda).\n&quot;</span>;<br>    <span class="hljs-keyword">delete</span> a;<br>&#125;;<br><br><span class="hljs-function"><span class="hljs-type">int</span> <span class="hljs-title">main</span><span class="hljs-params">(<span class="hljs-type">int</span> argc, <span class="hljs-type">char</span> *argv[])</span></span><br><span class="hljs-function"></span>&#123;<br>    shared_ptr&lt;AA&gt; p0=<span class="hljs-built_in">make_shared</span>&lt;AA&gt;(<span class="hljs-string">&quot;小明&quot;</span>);   <span class="hljs-comment">//使用缺省的删除器</span><br>    <br>    <span class="hljs-comment">//shared_ptr自定义删除器</span><br>    <span class="hljs-function">shared_ptr&lt;AA&gt; <span class="hljs-title">p1</span><span class="hljs-params">(<span class="hljs-keyword">new</span> AA(<span class="hljs-string">&quot;111&quot;</span>),deletefunc)</span></span>;<br>    <span class="hljs-function">shared_ptr&lt;AA&gt; <span class="hljs-title">p2</span><span class="hljs-params">(<span class="hljs-keyword">new</span> AA(<span class="hljs-string">&quot;111&quot;</span>),deleteclass())</span></span>;<br>    <span class="hljs-function">shared_ptr&lt;AA&gt; <span class="hljs-title">p3</span><span class="hljs-params">(<span class="hljs-keyword">new</span> AA(<span class="hljs-string">&quot;111&quot;</span>),deletelamb)</span></span>;<br><br>    <span class="hljs-comment">//unique_ptr自定义删除器</span><br>    <span class="hljs-function">unique_ptr&lt;AA,<span class="hljs-title">decltype</span><span class="hljs-params">(deletefunc)</span>*&gt; <span class="hljs-title">pu1</span><span class="hljs-params">(<span class="hljs-keyword">new</span> AA(<span class="hljs-string">&quot;111&quot;</span>),deletefunc)</span></span>;  <span class="hljs-comment">//模板参数使用了decltype推导，也可以直接写</span><br>    <span class="hljs-comment">//unique_ptr&lt;AA,void(*)(AA*)&gt; pu1(new AA(&quot;111&quot;),deletefunc);</span><br>    <span class="hljs-function">unique_ptr&lt;AA,deleteclass&gt; <span class="hljs-title">pu2</span><span class="hljs-params">(<span class="hljs-keyword">new</span> AA(<span class="hljs-string">&quot;111&quot;</span>),deleteclass())</span></span>;<br>    <span class="hljs-function">unique_ptr&lt;AA,<span class="hljs-title">decltype</span><span class="hljs-params">(deletelamb)</span>&gt; <span class="hljs-title">pu3</span><span class="hljs-params">(<span class="hljs-keyword">new</span> AA(<span class="hljs-string">&quot;111&quot;</span>),deletelamb)</span></span>;<br>    <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;<br>&#125;<br></code></pre></td></tr></table></figure>



























<h3 id="弱智能指针-weak-ptr"><a href="#弱智能指针-weak-ptr" class="headerlink" title="弱智能指针 weak_ptr"></a>弱智能指针 weak_ptr</h3><p><strong>引言</strong>：为了解决shared_ptr循环引用带来的未自动清理的情况，C++还引入了weak_ptr指针来帮助shared_ptr解决</p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br></pre></td><td class="code"><pre><code class="hljs c++"><span class="hljs-comment">//将循环引用的shared_ptr改成使用weak_ptr可以解决问题</span><br><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;iostream&gt;</span></span><br><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;memory&gt;</span></span><br><span class="hljs-keyword">using</span> <span class="hljs-keyword">namespace</span> std;<br><br><span class="hljs-keyword">class</span> <span class="hljs-title class_">BB</span>;<br><br><span class="hljs-keyword">class</span> <span class="hljs-title class_">AA</span>&#123;<br><span class="hljs-keyword">public</span>:<br>    string m_name;<br>    <span class="hljs-built_in">AA</span>()&#123;<br>        cout&lt;&lt;m_name&lt;&lt;<span class="hljs-string">&quot;调用构造函数AA().\n&quot;</span>;<br>    &#125;<br>    <span class="hljs-built_in">AA</span>(<span class="hljs-type">const</span> string &amp;name):<span class="hljs-built_in">m_name</span>(name)&#123;<br>        cout&lt;&lt;<span class="hljs-string">&quot;调用构造函数AA(&quot;</span>&lt;&lt;m_name&lt;&lt;<span class="hljs-string">&quot;).\n&quot;</span>;<br>    &#125;<br>    ~<span class="hljs-built_in">AA</span>()&#123;<br>        cout&lt;&lt;<span class="hljs-string">&quot;调用了析构函数~AA(&quot;</span>&lt;&lt;m_name&lt;&lt;<span class="hljs-string">&quot;).\n&quot;</span>;<br>    &#125;<br>    <span class="hljs-comment">//引用BB类资源</span><br>    weak_ptr&lt;BB&gt; m_p;<br>&#125;;<br><br><br><span class="hljs-keyword">class</span> <span class="hljs-title class_">BB</span>&#123;<br><span class="hljs-keyword">public</span>:<br>    string m_name;<br>    <span class="hljs-built_in">BB</span>()&#123;<br>        cout&lt;&lt;m_name&lt;&lt;<span class="hljs-string">&quot;调用构造函数BB().\n&quot;</span>;<br>    &#125;<br>    <span class="hljs-built_in">BB</span>(<span class="hljs-type">const</span> string &amp;name):<span class="hljs-built_in">m_name</span>(name)&#123;<br>        cout&lt;&lt;<span class="hljs-string">&quot;调用构造函数BB(&quot;</span>&lt;&lt;m_name&lt;&lt;<span class="hljs-string">&quot;).\n&quot;</span>;<br>    &#125;<br>    ~<span class="hljs-built_in">BB</span>()&#123;<br>        cout&lt;&lt;<span class="hljs-string">&quot;调用了析构函数~BB(&quot;</span>&lt;&lt;m_name&lt;&lt;<span class="hljs-string">&quot;).\n&quot;</span>;<br>    &#125;<br>    <span class="hljs-comment">//引用AA资源</span><br>    weak_ptr&lt;AA&gt; m_p;<br>&#125;;<br><br><br><span class="hljs-function"><span class="hljs-type">int</span> <span class="hljs-title">main</span><span class="hljs-params">(<span class="hljs-type">int</span> argc, <span class="hljs-type">char</span> *argv[])</span></span><br><span class="hljs-function"></span>&#123;<br>    shared_ptr&lt;AA&gt; p0=<span class="hljs-built_in">make_shared</span>&lt;AA&gt;(<span class="hljs-string">&quot;小明1&quot;</span>);   <br>    shared_ptr&lt;BB&gt; p1=<span class="hljs-built_in">make_shared</span>&lt;BB&gt;(<span class="hljs-string">&quot;小明2&quot;</span>);<br>    <span class="hljs-comment">//循环引用</span><br>    p0-&gt;m_p=p1;<br>    p1-&gt;m_p=p0;<br><br>    <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;<br>&#125;<br><span class="hljs-comment">//输出结果</span><br>|| 调用构造函数<span class="hljs-built_in">AA</span>(小明<span class="hljs-number">1</span>).<br>|| 调用构造函数<span class="hljs-built_in">BB</span>(小明<span class="hljs-number">2</span>).<br>|| 调用了析构函数~<span class="hljs-built_in">BB</span>(小明<span class="hljs-number">2</span>).<br>|| 调用了析构函数~<span class="hljs-built_in">AA</span>(小明<span class="hljs-number">1</span>).<br>|| Exited with code <span class="hljs-number">0</span><br></code></pre></td></tr></table></figure>





<p><strong>概念</strong>：</p>
<ul>
<li><code>weak_ptr</code>是为了<strong>配合shared_ptr而引入的</strong>，它指向一个由shared_ptr管理的资源但不影响资源的生命周期，也就是说，<strong>将一个weak_ptr绑定到一个shared_ptr不会改变shared_ptr的引用计数</strong></li>
<li><strong>不论是否有weak_ptr指向，如果最后一个指向资源的shared_ptr被销毁，资源就会被释放</strong></li>
<li>weak_ptr更像是shared_ptr的助手而不是智能指针</li>
</ul>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br></pre></td><td class="code"><pre><code class="hljs c++"><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;iostream&gt;</span></span><br><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;memory&gt;</span></span><br><span class="hljs-keyword">using</span> <span class="hljs-keyword">namespace</span> std;<br><br><span class="hljs-keyword">class</span> <span class="hljs-title class_">BB</span>;<br><br><span class="hljs-keyword">class</span> <span class="hljs-title class_">AA</span>&#123;<br><span class="hljs-keyword">public</span>:<br>    string m_name;<br>    <span class="hljs-built_in">AA</span>()&#123;<br>        cout&lt;&lt;m_name&lt;&lt;<span class="hljs-string">&quot;调用构造函数AA().\n&quot;</span>;<br>    &#125;<br>    <span class="hljs-built_in">AA</span>(<span class="hljs-type">const</span> string &amp;name):<span class="hljs-built_in">m_name</span>(name)&#123;<br>        cout&lt;&lt;<span class="hljs-string">&quot;调用构造函数AA(&quot;</span>&lt;&lt;m_name&lt;&lt;<span class="hljs-string">&quot;).\n&quot;</span>;<br>    &#125;<br>    ~<span class="hljs-built_in">AA</span>()&#123;<br>        cout&lt;&lt;<span class="hljs-string">&quot;调用了析构函数~AA(&quot;</span>&lt;&lt;m_name&lt;&lt;<span class="hljs-string">&quot;).\n&quot;</span>;<br>    &#125;<br>    <span class="hljs-comment">//引用BB类资源</span><br>    weak_ptr&lt;BB&gt; m_p;<br>&#125;;<br><br><br><span class="hljs-keyword">class</span> <span class="hljs-title class_">BB</span>&#123;<br><span class="hljs-keyword">public</span>:<br>    string m_name;<br>    <span class="hljs-built_in">BB</span>()&#123;<br>        cout&lt;&lt;m_name&lt;&lt;<span class="hljs-string">&quot;调用构造函数BB().\n&quot;</span>;<br>    &#125;<br>    <span class="hljs-built_in">BB</span>(<span class="hljs-type">const</span> string &amp;name):<span class="hljs-built_in">m_name</span>(name)&#123;<br>        cout&lt;&lt;<span class="hljs-string">&quot;调用构造函数BB(&quot;</span>&lt;&lt;m_name&lt;&lt;<span class="hljs-string">&quot;).\n&quot;</span>;<br>    &#125;<br>    ~<span class="hljs-built_in">BB</span>()&#123;<br>        cout&lt;&lt;<span class="hljs-string">&quot;调用了析构函数~BB(&quot;</span>&lt;&lt;m_name&lt;&lt;<span class="hljs-string">&quot;).\n&quot;</span>;<br>    &#125;<br>    <span class="hljs-comment">//引用AA资源</span><br>    weak_ptr&lt;AA&gt; m_p;<br>&#125;;<br><br><br><span class="hljs-function"><span class="hljs-type">int</span> <span class="hljs-title">main</span><span class="hljs-params">(<span class="hljs-type">int</span> argc, <span class="hljs-type">char</span> *argv[])</span></span><br><span class="hljs-function"></span>&#123;<br>    shared_ptr&lt;AA&gt; p0=<span class="hljs-built_in">make_shared</span>&lt;AA&gt;(<span class="hljs-string">&quot;小明1&quot;</span>);   <br>    shared_ptr&lt;BB&gt; p1=<span class="hljs-built_in">make_shared</span>&lt;BB&gt;(<span class="hljs-string">&quot;小明2&quot;</span>);<br>    <br>    cout&lt;&lt;p0.<span class="hljs-built_in">use_count</span>()&lt;&lt;endl;<br>    cout&lt;&lt;p1.<span class="hljs-built_in">use_count</span>()&lt;&lt;endl;<br>    <span class="hljs-comment">//循环引用</span><br>    p0-&gt;m_p=p1;<br>    p1-&gt;m_p=p0;<br><br>    cout&lt;&lt;p0.<span class="hljs-built_in">use_count</span>()&lt;&lt;endl;<br>    cout&lt;&lt;p1.<span class="hljs-built_in">use_count</span>()&lt;&lt;endl;<br>    <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;<br>&#125;<br><span class="hljs-comment">//输出结果</span><br>|| 调用构造函数<span class="hljs-built_in">AA</span>(小明<span class="hljs-number">1</span>).<br>|| 调用构造函数<span class="hljs-built_in">BB</span>(小明<span class="hljs-number">2</span>).<br>|| <span class="hljs-number">1</span><br>|| <span class="hljs-number">1</span><br>|| <span class="hljs-number">1</span><br>|| <span class="hljs-number">1</span><br>|| 调用了析构函数~<span class="hljs-built_in">BB</span>(小明<span class="hljs-number">2</span>).<br>|| 调用了析构函数~<span class="hljs-built_in">AA</span>(小明<span class="hljs-number">1</span>).<br>|| Exited with code <span class="hljs-number">0</span><br></code></pre></td></tr></table></figure>















<p><strong>基本用法</strong>：</p>
<ul>
<li><code>operator=();</code>：重载了&#x3D;操作符，可以<strong>将shared_ptr或weak_ptr赋值给weak_ptr</strong></li>
<li><code>expired()</code>：<strong>判断weak_ptr所指资源是否过期</strong>(是否被销毁)</li>
<li><code>lock()</code>：<strong>将weak_ptr升级成shared_ptr</strong>，如果<strong>指向资源存在</strong>，将weak_ptr升级成shared_ptr，<strong>返回shared_ptr</strong>；如果<strong>资源已过期</strong>，<strong>返回空的shared_ptr</strong></li>
<li><code>reset()</code>：将当前weak_ptr指针置为空</li>
<li><code>swap()</code>：交换两个weak_ptr控制权</li>
</ul>
<p><strong>注意</strong>：</p>
<ul>
<li>weak_ptr不控制对象的生命周期，但是它可以知道对象是否还活着</li>
<li><strong>lock()函数是线程安全的，因为它是一个原子操作的</strong>(对于多线程最好使用lock而不是expired)</li>
</ul>
<p>(多线程)错误做法：</p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><code class="hljs c++"><span class="hljs-function"><span class="hljs-type">int</span> <span class="hljs-title">main</span><span class="hljs-params">(<span class="hljs-type">int</span> argc, <span class="hljs-type">char</span> *argv[])</span></span><br><span class="hljs-function"></span>&#123;<br>    shared_ptr&lt;AA&gt; p0=<span class="hljs-built_in">make_shared</span>&lt;AA&gt;(<span class="hljs-string">&quot;小明1&quot;</span>);<br>    &#123;<br><br>        shared_ptr&lt;BB&gt; p1=<span class="hljs-built_in">make_shared</span>&lt;BB&gt;(<span class="hljs-string">&quot;小明2&quot;</span>);<br>    <br>        p0-&gt;m_p=p1;<br>        p1-&gt;m_p=p0;<br>        <br>        <span class="hljs-keyword">if</span>(p0-&gt;m_p.<span class="hljs-built_in">expired</span>()) cout&lt;&lt;<span class="hljs-string">&quot;语句块内部：p0-&gt;m_p已过期.\n&quot;</span>;<br>        <span class="hljs-keyword">else</span> cout&lt;&lt;<span class="hljs-string">&quot;语句块内部：p0-&gt;m_p.lock()-&gt;m_name&quot;</span>&lt;&lt;p0-&gt;m_p.<span class="hljs-built_in">lock</span>()-&gt;m_name&lt;&lt;endl;<br>    &#125;<br><br>    <span class="hljs-keyword">if</span>(p0-&gt;m_p.<span class="hljs-built_in">expired</span>()) cout&lt;&lt;<span class="hljs-string">&quot;语句块外部：p0-&gt;m_p已过期.\n&quot;</span>;<br>    <span class="hljs-keyword">else</span> cout&lt;&lt;<span class="hljs-string">&quot;语句块外部：p0-&gt;m_p.lock()-&gt;m_name&quot;</span>&lt;&lt;p0-&gt;m_p.<span class="hljs-built_in">lock</span>()-&gt;m_name&lt;&lt;endl;<br>    <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;<br>&#125;<br></code></pre></td></tr></table></figure>



<p>(多线程)正确做法：</p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><code class="hljs c++"><span class="hljs-function"><span class="hljs-type">int</span> <span class="hljs-title">main</span><span class="hljs-params">(<span class="hljs-type">int</span> argc, <span class="hljs-type">char</span> *argv[])</span></span><br><span class="hljs-function"></span>&#123;<br>    shared_ptr&lt;AA&gt; p0=<span class="hljs-built_in">make_shared</span>&lt;AA&gt;(<span class="hljs-string">&quot;小明1&quot;</span>);<br>    &#123;<br><br>        shared_ptr&lt;BB&gt; p1=<span class="hljs-built_in">make_shared</span>&lt;BB&gt;(<span class="hljs-string">&quot;小明2&quot;</span>);<br>    <br>        p0-&gt;m_p=p1;<br>        p1-&gt;m_p=p0;<br>        <br>        shared_ptr&lt;BB&gt; pp=p0-&gt;m_p.<span class="hljs-built_in">lock</span>();  <span class="hljs-comment">//把weak_ptr提升为shared_ptr</span><br>        <span class="hljs-keyword">if</span>(pp==<span class="hljs-literal">nullptr</span>) cout&lt;&lt;<span class="hljs-string">&quot;语句块内部：p0-&gt;m_p已过期.\n&quot;</span>;<br>        <span class="hljs-keyword">else</span> cout&lt;&lt;<span class="hljs-string">&quot;语句块内部：pp-&gt;m_name=&quot;</span>&lt;&lt;pp-&gt;m_name&lt;&lt;endl;<br>    &#125;<br><br>    shared_ptr&lt;BB&gt; pp=p0-&gt;m_p.<span class="hljs-built_in">lock</span>();<br>    <span class="hljs-keyword">if</span>(pp==<span class="hljs-literal">nullptr</span>) cout&lt;&lt;<span class="hljs-string">&quot;语句块外部：p0-&gt;m_p已过期.\n&quot;</span>;<br>    <span class="hljs-keyword">else</span> cout&lt;&lt;<span class="hljs-string">&quot;语句块外部：pp-&gt;m_name=&quot;</span>&lt;&lt;pp-&gt;m_name&lt;&lt;endl;<br>    <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;<br>&#125;<br></code></pre></td></tr></table></figure>


                
              </div>
            
            <hr/>
            <div>
              <div class="post-metas my-3">
  
    <div class="post-meta mr-3 d-flex align-items-center">
      <i class="iconfont icon-category"></i>
      

<span class="category-chains">
  
  
    
      <span class="category-chain">
        
  <a href="/categories/C/" class="category-chain-item">C++</a>
  
  

      </span>
    
  
</span>

    </div>
  
  
    <div class="post-meta">
      <i class="iconfont icon-tags"></i>
      
        <a href="/tags/C/" class="print-no-link">#C++</a>
      
    </div>
  
</div>


              
  

  <div class="license-box my-3">
    <div class="license-title">
      <div>C++学习</div>
      <div>https://moonfordream.github.io/posts/C-学习/</div>
    </div>
    <div class="license-meta">
      
        <div class="license-meta-item">
          <div>作者</div>
          <div>Moon</div>
        </div>
      
      
        <div class="license-meta-item license-meta-date">
          <div>发布于</div>
          <div>2024年5月19日</div>
        </div>
      
      
      
        <div class="license-meta-item">
          <div>许可协议</div>
          <div>
            
              
              
                <a class="print-no-link" target="_blank" href="https://creativecommons.org/licenses/by/4.0/">
                  <span class="hint--top hint--rounded" aria-label="BY - 署名">
                    <i class="iconfont icon-by"></i>
                  </span>
                </a>
              
            
          </div>
        </div>
      
    </div>
    <div class="license-icon iconfont"></div>
  </div>



              
                <div class="post-prevnext my-3">
                  <article class="post-prev col-6">
                    
                    
                      <a href="/posts/Makefile%E5%9F%BA%E6%9C%AC%E4%BD%BF%E7%94%A8/" title="Makefile基本使用">
                        <i class="iconfont icon-arrowleft"></i>
                        <span class="hidden-mobile">Makefile基本使用</span>
                        <span class="visible-mobile">上一篇</span>
                      </a>
                    
                  </article>
                  <article class="post-next col-6">
                    
                    
                      <a href="/posts/hello-world/" title="Hello World">
                        <span class="hidden-mobile">Hello World</span>
                        <span class="visible-mobile">下一篇</span>
                        <i class="iconfont icon-arrowright"></i>
                      </a>
                    
                  </article>
                </div>
              
            </div>

            
          </article>
        </div>
      </div>
    </div>

    <div class="side-col d-none d-lg-block col-lg-2">
      
  <aside class="sidebar" style="margin-left: -1rem">
    <div id="toc">
  <p class="toc-header">
    <i class="iconfont icon-list"></i>
    <span>目录</span>
  </p>
  <div class="toc-body" id="toc-body"></div>
</div>



  </aside>


    </div>
  </div>
</div>





  



  



  



  



  







    

    
      <a id="scroll-top-button" aria-label="TOP" href="#" role="button">
        <i class="iconfont icon-arrowup" aria-hidden="true"></i>
      </a>
    

    
      <div class="modal fade" id="modalSearch" tabindex="-1" role="dialog" aria-labelledby="ModalLabel"
     aria-hidden="true">
  <div class="modal-dialog modal-dialog-scrollable modal-lg" role="document">
    <div class="modal-content">
      <div class="modal-header text-center">
        <h4 class="modal-title w-100 font-weight-bold">搜索</h4>
        <button type="button" id="local-search-close" class="close" data-dismiss="modal" aria-label="Close">
          <span aria-hidden="true">&times;</span>
        </button>
      </div>
      <div class="modal-body mx-3">
        <div class="md-form mb-5">
          <input type="text" id="local-search-input" class="form-control validate">
          <label data-error="x" data-success="v" for="local-search-input">关键词</label>
        </div>
        <div class="list-group" id="local-search-result"></div>
      </div>
    </div>
  </div>
</div>

    

    
  </main>

  <footer>
    <div class="footer-inner">
  
    <div class="footer-content">
       <a href="https://hexo.io" target="_blank" rel="nofollow noopener"><span>Hexo</span></a> <i class="iconfont icon-love"></i> <a href="https://github.com/MoonforDream" target="_blank" rel="nofollow noopener"><span>Moon</span></a> 
    </div>
  
  
  
  
</div>

  </footer>

  <!-- Scripts -->
  
  <script  src="https://lib.baomitu.com/nprogress/0.2.0/nprogress.min.js" ></script>
  <link  rel="stylesheet" href="https://lib.baomitu.com/nprogress/0.2.0/nprogress.min.css" />

  <script>
    NProgress.configure({"showSpinner":false,"trickleSpeed":100})
    NProgress.start()
    window.addEventListener('load', function() {
      NProgress.done();
    })
  </script>


<script  src="https://lib.baomitu.com/jquery/3.6.4/jquery.min.js" ></script>
<script  src="https://lib.baomitu.com/twitter-bootstrap/4.6.1/js/bootstrap.min.js" ></script>
<script  src="/js/events.js" ></script>
<script  src="/js/plugins.js" ></script>


  <script  src="https://lib.baomitu.com/typed.js/2.0.12/typed.min.js" ></script>
  <script>
    (function (window, document) {
      var typing = Fluid.plugins.typing;
      var subtitle = document.getElementById('subtitle');
      if (!subtitle || !typing) {
        return;
      }
      var text = subtitle.getAttribute('data-typed-text');
      
        typing(text);
      
    })(window, document);
  </script>




  
    <script  src="/js/img-lazyload.js" ></script>
  




  
<script>
  Fluid.utils.createScript('https://lib.baomitu.com/tocbot/4.20.1/tocbot.min.js', function() {
    var toc = jQuery('#toc');
    if (toc.length === 0 || !window.tocbot) { return; }
    var boardCtn = jQuery('#board-ctn');
    var boardTop = boardCtn.offset().top;

    window.tocbot.init(Object.assign({
      tocSelector     : '#toc-body',
      contentSelector : '.markdown-body',
      linkClass       : 'tocbot-link',
      activeLinkClass : 'tocbot-active-link',
      listClass       : 'tocbot-list',
      isCollapsedClass: 'tocbot-is-collapsed',
      collapsibleClass: 'tocbot-is-collapsible',
      scrollSmooth    : true,
      includeTitleTags: true,
      headingsOffset  : -boardTop,
    }, CONFIG.toc));
    if (toc.find('.toc-list-item').length > 0) {
      toc.css('visibility', 'visible');
    }

    Fluid.events.registerRefreshCallback(function() {
      if ('tocbot' in window) {
        tocbot.refresh();
        var toc = jQuery('#toc');
        if (toc.length === 0 || !tocbot) {
          return;
        }
        if (toc.find('.toc-list-item').length > 0) {
          toc.css('visibility', 'visible');
        }
      }
    });
  });
</script>


  <script src=https://lib.baomitu.com/clipboard.js/2.0.11/clipboard.min.js></script>

  <script>Fluid.plugins.codeWidget();</script>


  
<script>
  Fluid.utils.createScript('https://lib.baomitu.com/anchor-js/4.3.1/anchor.min.js', function() {
    window.anchors.options = {
      placement: CONFIG.anchorjs.placement,
      visible  : CONFIG.anchorjs.visible
    };
    if (CONFIG.anchorjs.icon) {
      window.anchors.options.icon = CONFIG.anchorjs.icon;
    }
    var el = (CONFIG.anchorjs.element || 'h1,h2,h3,h4,h5,h6').split(',');
    var res = [];
    for (var item of el) {
      res.push('.markdown-body > ' + item.trim());
    }
    if (CONFIG.anchorjs.placement === 'left') {
      window.anchors.options.class = 'anchorjs-link-left';
    }
    window.anchors.add(res.join(', '));

    Fluid.events.registerRefreshCallback(function() {
      if ('anchors' in window) {
        anchors.removeAll();
        var el = (CONFIG.anchorjs.element || 'h1,h2,h3,h4,h5,h6').split(',');
        var res = [];
        for (var item of el) {
          res.push('.markdown-body > ' + item.trim());
        }
        if (CONFIG.anchorjs.placement === 'left') {
          anchors.options.class = 'anchorjs-link-left';
        }
        anchors.add(res.join(', '));
      }
    });
  });
</script>


  
<script>
  Fluid.utils.createScript('https://lib.baomitu.com/fancybox/3.5.7/jquery.fancybox.min.js', function() {
    Fluid.plugins.fancyBox();
  });
</script>


  <script>Fluid.plugins.imageCaption();</script>

  <script  src="/js/local-search.js" ></script>





<!-- 主题的启动项，将它保持在最底部 -->
<!-- the boot of the theme, keep it at the bottom -->
<script  src="/js/boot.js" ></script>


  

  <noscript>
    <div class="noscript-warning">博客在允许 JavaScript 运行的环境下浏览效果更佳</div>
  </noscript>
</body>
</html>
